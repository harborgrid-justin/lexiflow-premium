# ============================================
# LexiFlow Backend Environment Configuration
# ============================================
# Copy this file to .env and update with your values
# WARNING: Never commit .env file to version control

# --------------------------------------------
# Application Settings
# --------------------------------------------
NODE_ENV=development
PORT=3000
WS_PORT=3001
API_PREFIX=api/v1
API_VERSION=v1
APP_NAME=LexiFlow
APP_URL=http://localhost:3000

# --------------------------------------------
# Database Configuration (PostgreSQL)
# --------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=lexiflow_db
DB_USERNAME=lexiflow_user
DB_PASSWORD=lexiflow_password

# Database Connection Pool
DB_POOL_MAX=20
DB_POOL_MIN=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_QUERY_TIMEOUT=60000
DB_STATEMENT_TIMEOUT=60000

# Database Features
DB_SYNCHRONIZE=false
DB_LOGGING=false
DB_MIGRATIONS_RUN=false
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=false

# Database Retry Configuration
DB_RETRY_ATTEMPTS=10
DB_RETRY_DELAY=3000

# Legacy Database Config (for backward compatibility)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=lexiflow_db
DATABASE_USER=lexiflow_user
DATABASE_PASSWORD=lexiflow_password

# --------------------------------------------
# Redis Configuration
# --------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# Redis Connection Pool
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_CONNECT_TIMEOUT=10000

# --------------------------------------------
# JWT Authentication
# --------------------------------------------
JWT_SECRET=lexiflow_jwt_secret_enterprise_2024
JWT_EXPIRES_IN=900
JWT_EXPIRATION=3600
JWT_REFRESH_SECRET=lexiflow_refresh_secret_2024
JWT_REFRESH_EXPIRES_IN=604800
JWT_REFRESH_EXPIRATION=604800

# --------------------------------------------
# Security & Rate Limiting
# --------------------------------------------
BCRYPT_ROUNDS=12
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=100
RATE_LIMIT_MAX=100
THROTTLE_TTL=60000
THROTTLE_LIMIT=10

# CORS Configuration
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# --------------------------------------------
# Email Configuration (SMTP)
# --------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@lexiflow.com
SMTP_PASSWORD=your_email_password
SMTP_FROM=LexiFlow <noreply@lexiflow.com>

# Alternative Email Variables
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_FROM=noreply@lexiflow.com
MAIL_FROM_NAME=LexiFlow

# --------------------------------------------
# File Upload Configuration
# --------------------------------------------
UPLOAD_PATH=./uploads
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,jpg,jpeg,png

# --------------------------------------------
# Logging Configuration
# --------------------------------------------
LOG_LEVEL=debug
LOG_DIR=./logs
LOG_MAX_FILES=14d
LOG_MAX_SIZE=20m

# --------------------------------------------
# AI/ML Services (Optional)
# --------------------------------------------
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# AWS Configuration (for S3, etc.)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=lexiflow-documents

# --------------------------------------------
# WebSocket Configuration
# --------------------------------------------
WS_HEARTBEAT_INTERVAL=30000
WS_HEARTBEAT_TIMEOUT=60000
WS_MAX_PAYLOAD=1048576

# --------------------------------------------
# Session Configuration
# --------------------------------------------
SESSION_SECRET=your-session-secret-change-this
SESSION_MAX_AGE=86400000

# --------------------------------------------
# Admin Tools (Development Only)
# --------------------------------------------
# pgAdmin
PGADMIN_EMAIL=admin@lexiflow.com
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# Redis Commander
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin
REDIS_COMMANDER_PORT=8081

# --------------------------------------------
# GraphQL Configuration
# --------------------------------------------
GRAPHQL_PLAYGROUND=true
GRAPHQL_DEBUG=true
GRAPHQL_INTROSPECTION=true
GRAPHQL_DEPTH_LIMIT=10
GRAPHQL_COMPLEXITY_LIMIT=1000

# --------------------------------------------
# Billing & Payment (Stripe)
# --------------------------------------------
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# --------------------------------------------
# Document Processing
# --------------------------------------------
OCR_ENABLED=true
OCR_LANGUAGE=eng
OCR_ENGINE=tesseract
TESSERACT_PATH=/usr/bin/tesseract

# PDF Processing
PDF_MAX_PAGES=1000
PDF_QUALITY=medium

# --------------------------------------------
# External Integrations
# --------------------------------------------
PACER_API_KEY=your_pacer_api_key
PACER_API_URL=https://pacer.uscourts.gov/api

# --------------------------------------------
# Cache Configuration
# --------------------------------------------
CACHE_TTL=300
CACHE_MAX_ITEMS=1000

# --------------------------------------------
# Monitoring & Analytics
# --------------------------------------------
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development

# --------------------------------------------
# Feature Flags
# --------------------------------------------
FEATURE_AI_ANALYSIS=true
FEATURE_DOCUMENT_OCR=true
FEATURE_BULK_OPERATIONS=true
FEATURE_WEBHOOKS=true
FEATURE_API_VERSIONING=true

# --------------------------------------------
# Compliance & Audit
# --------------------------------------------
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
DATA_RETENTION_DAYS=2555

# --------------------------------------------
# Backup Configuration
# --------------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_DIR=./backups

# --------------------------------------------
# Development Tools
# --------------------------------------------
# Mailhog (for email testing in development)
MAILHOG_HOST=localhost
MAILHOG_SMTP_PORT=1025
MAILHOG_UI_PORT=8025
