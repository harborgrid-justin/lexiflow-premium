import{j as e,X as B,F as g,ae as $,q as D,v as M,a5 as P,bz as L,ac as W,c1 as H,aj as I,a0 as C,ct as O,cH as U,cI as z,bh as q,r as b,l as Q,b3 as J,c9 as G,U as K}from"./vendor-core-V-oW58GW.js";import{c as s,u as V}from"./useQueryHooks-Oyt-TMLP.js";import{D as X}from"./dataService-BWLMkXM4.js";import{q as Y}from"./queryKeys-BBVgMz36.js";import{u as Z}from"./useFilterAndSearch-B2zKLOlA.js";import{u as _}from"./useSelectionState-DfTDWAAj.js";import{u as A}from"./useToggle-CjLp2PQ4.js";import{u as y}from"./ThemeContext-OPG61qw5.js";import{B as x}from"./Button-CDQlLg6j.js";import{A as ee}from"./AdaptiveLoader-D5wOoiN1.js";import{M as se}from"./Modal-Rns91qFF.js";import{h as te}from"./case-detail-q84K17Pa.js";import{T as re,a as le,b as h,c as ae,d as ie,e as p}from"./Table-C_bcd1kC.js";import{U as oe}from"./UserAvatar-BPVf-Spq.js";import{B as ne}from"./Badge-bF-hTHJZ.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";import"./SyncContext-B5_p5hCg.js";import"./schemas-B2_dy3tf.js";import"./VirtualList-r2WXvtCD.js";import"./AppShell-Cug-APl3.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./formatters-stMuSkc6.js";import"./EmptyState-7A4cJUVU.js";import"./useNotify-DdRjm5G5.js";import"./Card-CDOiP5UM.js";import"./MetricCard-BH_9X7pi.js";import"./useSessionStorage-D_292xEY.js";import"./ErrorState-WL3az5ve.js";import"./ConfirmDialog--jvbqDAw.js";import"./Kanban-BI78PbzY.js";import"./dateUtils-rLIRMrtk.js";import"./FilterPanel-BteidCPx.js";import"./Tabs-7xONCRTX.js";import"./Input-Dmln04Yk.js";import"./TextArea-DrtcCAyn.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const ce=({advisor:o,onClose:a})=>{const{theme:t}=y();return e.jsxs("div",{className:s("w-96 border-l flex flex-col shadow-xl animate-in slide-in-from-right duration-300 z-10",t.surface.default,t.border.default),children:[e.jsxs("div",{className:s("p-4 border-b flex justify-between items-center",t.surface.highlight,t.border.default),children:[e.jsx("h3",{className:s("font-bold text-lg mb-0",t.text.primary),children:"Advisor Profile"}),e.jsx("button",{onClick:a,className:s("p-1 rounded transition-colors",t.text.tertiary,`hover:${t.surface.default}`),children:e.jsx(B,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:s("w-20 h-20 rounded-full mx-auto mb-3 flex items-center justify-center text-2xl font-bold border-2 border-white shadow-md",t.primary.light,t.primary.text),children:o.name.charAt(0)}),e.jsx("h3",{className:s("text-xl font-bold",t.text.primary),children:o.name}),e.jsx("p",{className:s("text-sm",t.text.secondary),children:o.specialty}),e.jsxs("div",{className:"flex justify-center gap-2 mt-3",children:[e.jsx("span",{className:s("text-xs px-2 py-1 rounded font-medium border",t.primary.light,t.primary.text,t.border.default),children:o.status}),e.jsxs("span",{className:s("text-xs px-2 py-1 rounded font-mono border",t.surface.highlight,t.text.secondary,t.border.default),children:["$",o.rate,"/hr"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:s("font-bold text-base border-b pb-2",t.text.primary),children:"Deliverables"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:s("p-3 rounded border flex items-start gap-3 transition-colors cursor-pointer",t.surface.default,t.border.default,`hover:${t.primary.border}`),children:[e.jsx(g,{className:"h-5 w-5 text-rose-500 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:s("text-sm font-bold truncate",t.text.primary),children:"Initial Expert Report"}),e.jsx("p",{className:s("text-xs",t.text.secondary),children:"PDF • 4.2 MB • Oct 15"})]}),e.jsx($,{className:s("h-4 w-4 transition-colors",t.text.tertiary,`hover:${t.primary.text}`)})]}),e.jsxs("div",{className:s("p-3 rounded border flex items-start gap-3 transition-colors cursor-pointer",t.surface.default,t.border.default,t.primary.border),children:[e.jsx(g,{className:s("h-5 w-5 shrink-0",t.primary.text)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:s("text-sm font-bold truncate",t.text.primary),children:"Rebuttal to Defense Expert"}),e.jsx("p",{className:s("text-xs",t.text.secondary),children:"Draft • Due: Tomorrow"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:s("font-bold text-base border-b pb-2",t.text.primary),children:"Financials"}),e.jsxs("div",{className:s("grid grid-cols-2 gap-3 text-sm",t.text.secondary),children:[e.jsxs("div",{children:[e.jsx("strong",{className:t.text.primary,children:"Hourly Rate:"})," $",o.rate]}),e.jsxs("div",{children:[e.jsx("strong",{className:t.text.primary,children:"Total Billed:"})," $45,000"]}),e.jsxs("div",{children:[e.jsx("strong",{className:t.text.primary,children:"Hours Logged:"})," 120"]}),e.jsxs("div",{children:[e.jsx("strong",{className:t.text.primary,children:"Reports Filed:"})," ",o.reports]}),e.jsxs("div",{children:[e.jsx("strong",{className:t.text.primary,children:"Retainer:"})," $10,000"]}),e.jsxs("div",{children:[e.jsx("strong",{className:t.text.primary,children:"Incurred:"})," $4,500"]})]}),e.jsxs("div",{className:s("text-xs flex items-center justify-center pt-2",t.text.tertiary),children:[e.jsx(D,{className:"h-3 w-3 mr-1"})," Last Invoice: 12 days ago"]})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-100 rounded-lg",children:[e.jsxs("h5",{className:"text-sm font-bold text-emerald-800 mb-1 flex items-center",children:[e.jsx(M,{className:"h-4 w-4 mr-2"})," Conflict Check"]}),e.jsx("p",{className:"text-xs text-emerald-700",children:"Cleared on Sep 01, 2023. No adverse relations found with opposing parties."})]})]}),e.jsxs("div",{className:s("p-4 border-t flex gap-2",t.border.default),children:[e.jsx(x,{variant:"outline",className:"flex-1",children:"Message"}),e.jsx(x,{variant:"primary",className:"flex-1",children:"Assign Task"})]})]})},de=({advisors:o,onSelect:a,selectedId:t})=>{const{theme:r}=y();return e.jsx("div",{className:s("flex-1 overflow-auto custom-scrollbar p-6",r.surface.default),children:e.jsxs(re,{children:[e.jsxs(le,{children:[e.jsx(h,{children:"Advisor Name"}),e.jsx(h,{children:"Role & Specialty"}),e.jsx(h,{children:"Engagement Status"}),e.jsx(h,{children:"Readiness"}),e.jsx(h,{children:"Rate / Hr"}),e.jsx(h,{className:"text-right",children:"Actions"})]}),e.jsx(ae,{children:o.map(l=>e.jsxs(ie,{onClick:()=>a(l),className:s("cursor-pointer",t===l.id?r.surface.highlight:""),children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{name:l.name,size:"md"}),e.jsxs("div",{children:[e.jsx("p",{className:s("font-bold text-sm",r.text.primary),children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("button",{className:s("p-1 rounded transition-colors",r.text.tertiary,`hover:${r.surface.highlight}`),onClick:c=>{c.stopPropagation(),window.location.href=`mailto:${l.email}`},children:e.jsx(P,{className:"h-3 w-3"})}),e.jsx("button",{className:s("p-1 rounded transition-colors",r.text.tertiary,`hover:${r.surface.highlight}`),onClick:c=>{c.stopPropagation()},children:e.jsx(L,{className:"h-3 w-3"})})]})]})]})}),e.jsx(p,{children:e.jsxs("div",{className:s("flex flex-col"),children:[e.jsx("span",{className:s("font-medium text-sm",r.text.primary),children:l.role}),e.jsx("span",{className:s("text-xs",r.text.secondary),children:l.specialty})]})}),e.jsx(p,{children:e.jsx(ne,{variant:l.status==="Retained"||l.status==="Active"?"success":l.status==="Pending"?"warning":"neutral",children:l.status})}),e.jsx(p,{children:e.jsxs("div",{className:"w-24",children:[e.jsxs("div",{className:s("flex justify-between text-[10px] mb-1",r.text.secondary),children:[e.jsx("span",{children:"Trial Prep"}),e.jsxs("span",{className:"font-bold",children:[l.readiness,"%"]})]}),e.jsx("div",{className:s("w-full rounded-full h-1.5 border",r.surface.highlight,r.border.default),children:e.jsx("div",{className:s("h-full rounded-full transition-all",l.readiness===100?"bg-emerald-500":r.primary.DEFAULT),style:{width:`${l.readiness}%`}})})]})}),e.jsx(p,{children:e.jsxs("span",{className:s("font-mono font-medium",r.text.primary),children:["$",l.rate]})}),e.jsx(p,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(x,{size:"sm",variant:"ghost",icon:W,title:"Tasks"}),e.jsx(x,{size:"sm",variant:"ghost",icon:g,title:"Reports",children:l.reports>0&&e.jsx("span",{className:s("ml-1 text-[10px] px-1.5 rounded-full",r.primary.light,r.primary.text),children:l.reports})}),e.jsx("button",{className:s("p-1.5 rounded transition-colors",r.text.secondary,`hover:${r.surface.highlight}`),children:e.jsx(H,{className:"h-4 w-4"})})]})})]},l.id))})]})})},xe=({activeCategory:o,onSelectCategory:a,counts:t})=>{const{theme:r}=y(),l=[{id:"All",label:"All Advisors",icon:I,count:t.all},{id:"Experts",label:"Expert Witnesses",icon:C,count:t.experts},{id:"Consultants",label:"Jury & Strategy",icon:O,count:t.consultants}],c=[{id:"Forensic Accounting",label:"Forensics",icon:U},{id:"Medical Diagnostics",label:"Medical",icon:z},{id:"Botany / Environmental",label:"Environmental",icon:C},{id:"Voir Dire Strategy",label:"Jury Selection",icon:q}];return e.jsxs("div",{className:s("w-64 border-r flex flex-col shrink-0 hidden md:flex",r.surface.highlight,r.border.default),children:[e.jsxs("div",{className:s("p-4 border-b",r.border.default),children:[e.jsx("h4",{className:s("text-xs font-bold uppercase tracking-wide mb-3",r.text.tertiary),children:"Roles"}),e.jsx("div",{className:"space-y-1",children:l.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:s("w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors flex justify-between items-center",o===n.id?s(r.surface.default,r.primary.text,"shadow-sm border",r.border.default):r.text.secondary),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(n.icon,{className:s("h-4 w-4 mr-3 opacity-70")}),n.label]}),e.jsx("span",{className:s("text-xs px-2 py-0.5 rounded-full",r.surface.highlight,r.text.secondary),children:n.count})]},n.id))})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:s("text-xs font-bold uppercase tracking-wide mb-3",r.text.tertiary),children:"Specialties"}),e.jsx("div",{className:"space-y-1",children:c.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:s("w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center",o===n.id?s(r.surface.default,r.primary.text,"font-medium"):r.text.secondary),children:[e.jsx(n.icon,{className:s("h-3.5 w-3.5 mr-3 opacity-60")}),n.label]},n.id))})]})]})},as=({caseId:o})=>{const{theme:a}=y(),t=_(),r=A(),l=A(),[c,n]=b.useState("all"),[u,N]=b.useState("all"),[f,v]=b.useState("all"),{data:j=[],isLoading:S}=V(Y.warRoom.advisors(o||""),()=>X.warRoom.getAdvisors(o||"")),{filteredItems:w,searchQuery:F,setSearchQuery:T,category:m,setCategory:k}=Z({items:j,config:{categoryField:"specialty",searchFields:["name","specialty"],arrayFields:[]},initialCategory:"All"}),R=Q.useMemo(()=>{let i=w;return m!=="All"&&(i=i.filter(d=>m==="Experts"?d.role==="Expert Witness":m==="Consultants"?d.role!=="Expert Witness":d.specialty===m)),c!=="all"&&(i=i.filter(d=>d.role===c)),u!=="all"&&(i=i.filter(d=>d.specialty===u)),f!=="all"&&(i=i.filter(d=>d.status===f)),i},[w,m,c,u,f]),E=i=>{t.select(i),r.open()};return S?e.jsx(ee,{contentType:"list",itemCount:6,shimmer:!0}):e.jsxs("div",{className:s("flex flex-col h-full rounded-lg shadow-sm border overflow-hidden",a.surface.default,a.border.default),children:[e.jsxs("div",{className:s("p-4 border-b flex justify-between items-center gap-4",a.surface.highlight,a.border.default),children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("h3",{className:s("font-bold text-lg whitespace-nowrap",a.text.primary),children:"Advisory Board"}),e.jsx("div",{className:s("h-6 w-px",a.border.default)}),e.jsx(te,{value:F,onChange:T,placeholder:"Search experts & consultants...",className:"w-full max-w-md border-none shadow-none p-0 bg-transparent"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:l.isOpen?"primary":"secondary",icon:J,onClick:l.toggle,className:"hidden sm:flex",children:"Filter"}),e.jsx(x,{variant:r.isOpen?"primary":"secondary",icon:G,onClick:r.toggle,className:"hidden sm:flex",children:"Inspector"}),e.jsx(x,{variant:"primary",icon:K,children:"Retain New"})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx(xe,{activeCategory:m,onSelectCategory:k,counts:{all:j.length,experts:j.filter(i=>i.role==="Expert Witness").length,consultants:j.filter(i=>i.role!=="Expert Witness").length}}),e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col relative",children:e.jsx(de,{advisors:R,onSelect:E,selectedId:t.selected?.id})}),r.isOpen&&t.selected&&e.jsx(ce,{advisor:t.selected,onClose:r.close})]}),e.jsx(se,{isOpen:l.isOpen,onClose:l.close,title:"Filter Advisors",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:s("block text-xs font-semibold uppercase mb-1.5",a.text.secondary),children:"Role"}),e.jsxs("select",{title:"Filter by role",className:s("w-full px-3 py-2 border rounded-md text-sm",a.surface.default,a.border.default),value:c,onChange:i=>n(i.target.value),children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"Expert Witness",children:"Expert Witness"}),e.jsx("option",{value:"Consultant",children:"Consultant"}),e.jsx("option",{value:"Technical Advisor",children:"Technical Advisor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:s("block text-xs font-semibold uppercase mb-1.5",a.text.secondary),children:"Specialty"}),e.jsxs("select",{title:"Filter by specialty",className:s("w-full px-3 py-2 border rounded-md text-sm",a.surface.default,a.border.default),value:u,onChange:i=>N(i.target.value),children:[e.jsx("option",{value:"all",children:"All Specialties"}),e.jsx("option",{value:"Medical",children:"Medical"}),e.jsx("option",{value:"Financial",children:"Financial"}),e.jsx("option",{value:"Forensic",children:"Forensic"}),e.jsx("option",{value:"Engineering",children:"Engineering"}),e.jsx("option",{value:"Technology",children:"Technology"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:s("block text-xs font-semibold uppercase mb-1.5",a.text.secondary),children:"Status"}),e.jsxs("select",{title:"Filter by status",className:s("w-full px-3 py-2 border rounded-md text-sm",a.surface.default,a.border.default),value:f,onChange:i=>v(i.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"Retained",children:"Retained"}),e.jsx("option",{value:"Consulting",children:"Consulting"}),e.jsx("option",{value:"Potential",children:"Potential"})]})]}),e.jsxs("div",{className:s("flex justify-end gap-2 pt-4 border-t",a.border.default),children:[e.jsx(x,{variant:"ghost",onClick:()=>{n("all"),N("all"),v("all")},children:"Clear Filters"}),e.jsx(x,{variant:"primary",onClick:l.close,children:"Apply"})]})]})})]})};export{as as AdvisoryBoard};
