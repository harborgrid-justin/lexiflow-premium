import{r as n,j as e,k,al as I,ab as B,bA as H,a7 as P,bq as R,cB as E,cC as O}from"./vendor-core-V-oW58GW.js";import{u as L,d as v,c as r}from"./useQueryHooks-Oyt-TMLP.js";import{D as p}from"./dataService-BWLMkXM4.js";import{u as V}from"./ThemeContext-OPG61qw5.js";import"./SyncContext-B5_p5hCg.js";import{u as g}from"./useModalState-Cst_3NmK.js";import{u as q,h as K}from"./case-detail-q84K17Pa.js";import{getTodayString as Q}from"./dateUtils-rLIRMrtk.js";import{V as U}from"./VirtualList-r2WXvtCD.js";import{B as W}from"./Badge-bF-hTHJZ.js";import{B as d}from"./Button-CDQlLg6j.js";import{I as o}from"./Input-Dmln04Yk.js";import{C as $}from"./ConfirmDialog--jvbqDAw.js";import{M as z}from"./Modal-Rns91qFF.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";import"./schemas-B2_dy3tf.js";import"./AppShell-Cug-APl3.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./formatters-stMuSkc6.js";import"./Table-C_bcd1kC.js";import"./EmptyState-7A4cJUVU.js";import"./useNotify-DdRjm5G5.js";import"./Card-CDOiP5UM.js";import"./MetricCard-BH_9X7pi.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-D_292xEY.js";import"./ErrorState-WL3az5ve.js";import"./Kanban-BI78PbzY.js";import"./FilterPanel-BteidCPx.js";import"./AdaptiveLoader-D5wOoiN1.js";import"./UserAvatar-BPVf-Spq.js";import"./Tabs-7xONCRTX.js";import"./TextArea-DrtcCAyn.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const Le=()=>{const{theme:t}=V(),[u,j]=n.useState(""),l=g(),c=g(),[x,h]=n.useState(null),[a,i]=n.useState({}),{data:m=[],refetch:b}=L(["assets","all"],p.assets.getAll),N=n.useMemo(()=>Array.isArray(m)?m:[],[m]),{mutate:w}=v(p.assets.add,{invalidateKeys:[["assets","all"]],onSuccess:()=>{l.close(),i({})}}),{mutate:y}=v(p.assets.delete,{invalidateKeys:[["assets","all"]]}),A=()=>{if(!a.name)return;const s={id:`AST-${Date.now()}`,name:a.name,type:a.type||"Hardware",assignedTo:a.assignedTo||"Unassigned",status:a.status||"Active",purchaseDate:a.purchaseDate||Q(),value:Number(a.value)||0,serialNumber:a.serialNumber};w(s)},T=s=>{h(s),c.open()},S=()=>{x&&(y(x),h(null))},C=s=>{switch(s){case"Hardware":return e.jsx(O,{className:"h-4 w-4"});case"Mobile":return e.jsx(E,{className:"h-4 w-4"});default:return e.jsx(R,{className:"h-4 w-4"})}},{filteredItems:D,isSearching:f}=q({items:N,query:u,fields:["name","assignedTo","serialNumber","type"]}),M=s=>e.jsxs("div",{className:r("flex items-center border-b hover:bg-slate-50 h-[60px] px-4 transition-colors",t.border.default),children:[e.jsx("div",{className:r("w-[15%] font-mono text-xs",t.text.secondary),children:s.id}),e.jsx("div",{className:r("w-[25%] font-medium",t.text.primary),children:s.name}),e.jsx("div",{className:"w-[15%]",children:e.jsxs("div",{className:r("flex items-center gap-2 text-xs",t.text.secondary),children:[C(s.type)," ",s.type]})}),e.jsx("div",{className:"w-[20%] text-sm text-slate-600",children:s.assignedTo}),e.jsx("div",{className:r("w-[15%] text-xs",t.text.secondary),children:s.purchaseDate}),e.jsx("div",{className:"w-[10%]",children:e.jsx(W,{variant:s.status==="Active"?"success":s.status==="Subscription"?"info":"warning",children:s.status})}),e.jsxs("div",{className:"w-[10%] flex justify-end gap-2",children:[e.jsx("button",{title:"Edit asset",className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("button",{title:"Delete asset",onClick:()=>T(s.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:e.jsx(P,{className:"h-4 w-4"})})]})]},s.id);return e.jsxs("div",{className:"space-y-6 animate-fade-in h-full flex flex-col",children:[e.jsxs("div",{className:r("flex flex-col md:flex-row justify-between items-center gap-4 p-4 rounded-lg border shadow-sm shrink-0",t.surface.default,t.border.default),children:[e.jsxs("div",{children:[e.jsx("h3",{className:r("font-bold text-lg",t.text.primary),children:"IT & Asset Management"}),e.jsx("p",{className:r("text-sm",t.text.secondary),children:"Track hardware, software licenses, and office inventory."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",icon:k,onClick:()=>b(),children:"Refresh"}),e.jsx(d,{variant:"primary",icon:I,onClick:l.open,children:"Add Asset"})]})]}),e.jsxs("div",{className:"shrink-0 relative",children:[e.jsx(K,{value:u,onChange:j,placeholder:"Search assets by tag or assignee..."}),f&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:e.jsx(B,{className:"h-4 w-4 animate-spin text-blue-500"})})]}),e.jsxs("div",{className:r("flex-1 flex flex-col border rounded-lg overflow-hidden shadow-sm bg-white",t.border.default),children:[e.jsxs("div",{className:r("flex items-center px-4 py-3 border-b font-bold text-xs uppercase tracking-wider bg-slate-50 shrink-0",t.border.default,t.text.secondary),children:[e.jsx("div",{className:"w-[15%]",children:"Asset Tag"}),e.jsx("div",{className:"w-[25%]",children:"Item Name"}),e.jsx("div",{className:"w-[15%]",children:"Type"}),e.jsx("div",{className:"w-[20%]",children:"Assigned To"}),e.jsx("div",{className:"w-[15%]",children:"Purchase"}),e.jsx("div",{className:"w-[10%]",children:"Status"}),e.jsx("div",{className:"w-[10%] text-right",children:"Actions"})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsx(U,{items:D,height:"100%",itemHeight:60,renderItem:M,emptyMessage:f?"Searching...":"No assets found."})})]}),e.jsx(z,{isOpen:l.isOpen,onClose:l.close,title:"Register Asset",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(o,{label:"Item Name",value:a.name||"",onChange:s=>i({...a,name:s.target.value}),placeholder:"e.g. MacBook Pro M3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:r("block text-xs font-semibold uppercase mb-1.5",t.text.secondary),children:"Type"}),e.jsxs("select",{title:"Select asset type",className:r("w-full px-3 py-2 border rounded-md text-sm",t.surface.default,t.border.default,t.text.primary),value:a.type,onChange:s=>i({...a,type:s.target.value}),children:[e.jsx("option",{value:"Hardware",children:"Hardware"}),e.jsx("option",{value:"Software",children:"Software"}),e.jsx("option",{value:"Mobile",children:"Mobile"})]})]}),e.jsx(o,{label:"Serial Number",value:a.serialNumber||"",onChange:s=>i({...a,serialNumber:s.target.value})})]}),e.jsx(o,{label:"Assigned To",value:a.assignedTo||"",onChange:s=>i({...a,assignedTo:s.target.value}),placeholder:"Employee Name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{label:"Purchase Date",type:"date",value:a.purchaseDate||"",onChange:s=>i({...a,purchaseDate:s.target.value})}),e.jsx(o,{label:"Value",type:"number",value:a.value||"",onChange:s=>i({...a,value:Number(s.target.value)})})]}),e.jsx($,{isOpen:c.isOpen,onClose:c.close,onConfirm:S,title:"Delete Asset",message:"Are you sure you want to delete this asset record? This action cannot be undone.",variant:"danger",confirmText:"Delete Asset"}),e.jsxs("div",{className:"pt-4 flex justify-end gap-2 border-t mt-4",children:[e.jsx(d,{variant:"secondary",onClick:l.close,children:"Cancel"}),e.jsx(d,{variant:"primary",onClick:A,children:"Save Asset"})]})]})})]})};export{Le as AssetManager};
