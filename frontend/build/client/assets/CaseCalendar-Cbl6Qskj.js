import{r as u,j as e,aa as W,ae as $,aO as O,a1 as V,q as H,b9 as R}from"./vendor-core-V-oW58GW.js";import{u as I,b as S,c as t}from"./useQueryHooks-BdeOvP9e.js";import{B as L}from"./Badge-B08w10nz.js";import{B as v}from"./Button-PaGqeZoR.js";import{C as q}from"./Card-D56KNEnI.js";import{M as P}from"./Modal-BlJFylOy.js";import{u as Q}from"./ThemeContext-OPG61qw5.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./dataService-75QCl8KS.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";import"./SyncContext-DYD5yPAv.js";const ce=()=>{const{isDark:s}=Q(),[d,c]=u.useState("month"),[o,p]=u.useState(new Date),[r,h]=u.useState(null),[l,w]=u.useState(!1),[m,y]=u.useState("all"),[g,D]=u.useState("all"),{data:j}=I(["calendar","events",o.toISOString().split("T")[0]],async()=>{const a=await S.docket.getAll(),x=await S.cases.getAll(),n=[];return a.forEach(i=>{const N=x.find(b=>String(b.id)===String(i.caseId));i.date&&n.push({id:`docket-${i.id}`,matterId:i.caseId,matterTitle:N?.title||"Unknown Matter",title:i.title||i.description||"Docket Entry",type:i.type==="Hearing"?"hearing":i.type==="Filing"?"filing":i.type==="Motion"?"deadline":"other",startTime:i.date,priority:"medium",status:"scheduled",description:i.description})}),x.forEach(i=>{i.closeDate&&n.push({id:`deadline-${i.id}`,matterId:i.id,matterTitle:i.title,title:"Matter Deadline",type:"deadline",startTime:i.closeDate,priority:"medium",status:"scheduled",reminder:1440})}),n}),{data:f}=I(["matters","all"],()=>S.cases.getAll()),M=u.useMemo(()=>j?j.filter(a=>{const x=m==="all"||a.type===m,n=g==="all"||a.matterId===g;return x&&n}):[],[j,m,g]),E=a=>{p(x=>{const n=new Date(x);return a==="prev"?n.setMonth(n.getMonth()-1):n.setMonth(n.getMonth()+1),n})},A=a=>{p(x=>{const n=new Date(x);return a==="prev"?n.setDate(n.getDate()-7):n.setDate(n.getDate()+7),n})},z=()=>{p(new Date)},B=()=>{const a=o.getFullYear(),x=o.getMonth(),n=new Date(a,x,1),i=new Date(n);i.setDate(i.getDate()-n.getDay());const N=[];let b=[];for(let C=0;C<42;C++){const T=new Date(i);T.setDate(T.getDate()+C),b.push(T),b.length===7&&(N.push(b),b=[])}return N},U=a=>M?M.filter(x=>new Date(x.startTime).toDateString()===a.toDateString()):[],k=a=>{h(a),w(!0)},F=a=>{const x={hearing:"bg-red-500",deadline:"bg-amber-500",meeting:"bg-blue-500",filing:"bg-purple-500",trial:"bg-rose-500",other:"bg-slate-500"};return x[a]||x.other};return e.jsxs("div",{className:t("h-full flex flex-col",s?"bg-slate-900":"bg-slate-50"),children:[e.jsxs("div",{className:t("border-b px-6 py-4",s?"bg-slate-800 border-slate-700":"bg-white border-slate-200"),children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"outline",size:"sm",onClick:z,children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Today"]}),e.jsxs(v,{variant:"outline",size:"sm",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>d==="month"?E("prev"):A("prev"),children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("div",{className:t("text-lg font-semibold min-w-[200px] text-center",s?"text-slate-100":"text-slate-900"),children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>d==="month"?E("next"):A("next"),children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:t("flex items-center gap-1 p-1 rounded-lg",s?"bg-slate-700":"bg-slate-100"),children:[e.jsx("button",{onClick:()=>c("month"),className:t("px-3 py-1.5 rounded text-sm font-medium transition-colors",d==="month"?s?"bg-slate-600 text-slate-100":"bg-white text-slate-900 shadow-sm":s?"text-slate-400 hover:text-slate-200":"text-slate-600 hover:text-slate-900"),children:"Month"}),e.jsx("button",{onClick:()=>c("week"),className:t("px-3 py-1.5 rounded text-sm font-medium transition-colors",d==="week"?s?"bg-slate-600 text-slate-100":"bg-white text-slate-900 shadow-sm":s?"text-slate-400 hover:text-slate-200":"text-slate-600 hover:text-slate-900"),children:"Week"}),e.jsx("button",{onClick:()=>c("day"),className:t("px-3 py-1.5 rounded text-sm font-medium transition-colors",d==="day"?s?"bg-slate-600 text-slate-100":"bg-white text-slate-900 shadow-sm":s?"text-slate-400 hover:text-slate-200":"text-slate-600 hover:text-slate-900"),children:"Day"}),e.jsx("button",{onClick:()=>c("agenda"),className:t("px-3 py-1.5 rounded text-sm font-medium transition-colors",d==="agenda"?s?"bg-slate-600 text-slate-100":"bg-white text-slate-900 shadow-sm":s?"text-slate-400 hover:text-slate-200":"text-slate-600 hover:text-slate-900"),children:"Agenda"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:m,onChange:a=>y(a.target.value),className:t("px-3 py-1.5 rounded-lg border text-sm",s?"bg-slate-700 border-slate-600 text-slate-100":"bg-white border-slate-300 text-slate-900"),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"hearing",children:"Hearings"}),e.jsx("option",{value:"deadline",children:"Deadlines"}),e.jsx("option",{value:"meeting",children:"Meetings"}),e.jsx("option",{value:"filing",children:"Filings"}),e.jsx("option",{value:"trial",children:"Trials"})]}),e.jsxs("select",{value:g,onChange:a=>D(a.target.value),className:t("px-3 py-1.5 rounded-lg border text-sm",s?"bg-slate-700 border-slate-600 text-slate-100":"bg-white border-slate-300 text-slate-900"),children:[e.jsx("option",{value:"all",children:"All Matters"}),f?.map(a=>e.jsxs("option",{value:a.id,children:[a.caseNumber||a.id," - ",a.title]},a.id))]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[d==="month"&&e.jsx(Y,{weeks:B(),currentDate:o,onEventClick:k,getEventsForDate:U,getEventTypeColor:F,isDark:s}),d==="agenda"&&e.jsx(G,{events:M||[],onEventClick:k,getEventTypeColor:F,isDark:s})]}),l&&r&&e.jsx(J,{event:r,onClose:()=>w(!1),isDark:s})]})},Y=({weeks:s,currentDate:d,onEventClick:c,getEventsForDate:o,getEventTypeColor:p,isDark:r})=>{const h=new Date,l=m=>m.toDateString()===h.toDateString(),w=m=>m.getMonth()===d.getMonth();return e.jsxs("div",{className:t("rounded-lg border overflow-hidden",r?"border-slate-700":"border-slate-200"),children:[e.jsx("div",{className:t("grid grid-cols-7 border-b",r?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"),children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(m=>e.jsx("div",{className:t("px-3 py-2 text-center text-sm font-semibold",r?"text-slate-400":"text-slate-600"),children:m},m))}),e.jsx("div",{className:t("grid grid-cols-7",r?"bg-slate-900":"bg-white"),children:s.map((m,y)=>m.map((g,D)=>{const j=o(g);return e.jsxs("div",{className:t("min-h-[120px] border-r border-b p-2",r?"border-slate-700":"border-slate-200",!w(g)&&(r?"bg-slate-800/30":"bg-slate-50")),children:[e.jsx("div",{className:t("text-sm font-medium mb-2",l(g)?"flex items-center justify-center w-7 h-7 rounded-full bg-blue-500 text-white":w(g)?r?"text-slate-300":"text-slate-700":r?"text-slate-600":"text-slate-400"),children:g.getDate()}),e.jsxs("div",{className:"space-y-1",children:[j.slice(0,3).map(f=>e.jsx("button",{onClick:()=>c(f),className:t("w-full text-left px-2 py-1 rounded text-xs truncate",p(f.type),"text-white hover:opacity-90 transition-opacity"),children:f.title},f.id)),j.length>3&&e.jsxs("div",{className:t("text-xs px-2",r?"text-slate-400":"text-slate-600"),children:["+",j.length-3," more"]})]})]},`${y}-${D}`)}))})]})},G=({events:s,onEventClick:d,getEventTypeColor:c,isDark:o})=>{const p=u.useMemo(()=>{const r=new Map;return s.forEach(h=>{const l=new Date(h.startTime).toDateString();r.has(l)||r.set(l,[]),r.get(l).push(h)}),Array.from(r.entries()).sort((h,l)=>new Date(h[0]).getTime()-new Date(l[0]).getTime())},[s]);return e.jsx("div",{className:"space-y-6",children:p.map(([r,h])=>e.jsxs("div",{children:[e.jsx("h3",{className:t("text-lg font-semibold mb-3",o?"text-slate-100":"text-slate-900"),children:new Date(r).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),e.jsx("div",{className:"space-y-2",children:h.map(l=>e.jsx("div",{className:"cursor-pointer",onClick:()=>d(l),children:e.jsx(q,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:t("w-1 h-full rounded-full",c(l.type))}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:t("font-semibold",o?"text-slate-100":"text-slate-900"),children:l.title}),e.jsx("p",{className:t("text-sm mt-1",o?"text-slate-400":"text-slate-600"),children:l.matterTitle})]}),e.jsx(L,{variant:l.priority==="high"?"error":l.priority==="medium"?"warning":"neutral",children:l.priority})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:t("w-4 h-4",o?"text-slate-400":"text-slate-500")}),e.jsx("span",{className:t(o?"text-slate-400":"text-slate-600"),children:new Date(l.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]}),l.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:t("w-4 h-4",o?"text-slate-400":"text-slate-500")}),e.jsx("span",{className:t(o?"text-slate-400":"text-slate-600"),children:l.location})]})]})]})]})})},l.id))})]},r))})},J=({event:s,onClose:d,isDark:c})=>e.jsx(P,{isOpen:!0,onClose:d,title:s.title,size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:t("text-sm font-medium",c?"text-slate-300":"text-slate-700"),children:"Matter"}),e.jsx("p",{className:t("text-sm mt-1",c?"text-slate-400":"text-slate-600"),children:s.matterTitle})]}),e.jsxs("div",{children:[e.jsx("label",{className:t("text-sm font-medium",c?"text-slate-300":"text-slate-700"),children:"Date & Time"}),e.jsx("p",{className:t("text-sm mt-1",c?"text-slate-400":"text-slate-600"),children:new Date(s.startTime).toLocaleString()})]}),s.location&&e.jsxs("div",{children:[e.jsx("label",{className:t("text-sm font-medium",c?"text-slate-300":"text-slate-700"),children:"Location"}),e.jsx("p",{className:t("text-sm mt-1",c?"text-slate-400":"text-slate-600"),children:s.location})]}),s.attendees&&s.attendees.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:t("text-sm font-medium",c?"text-slate-300":"text-slate-700"),children:"Attendees"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:s.attendees.map((o,p)=>e.jsx(L,{variant:"neutral",children:o},p))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{variant:"primary",className:"flex-1",children:"Edit Event"}),e.jsx(v,{variant:"outline",onClick:d,children:"Close"})]})]})});export{ce as CaseCalendar};
