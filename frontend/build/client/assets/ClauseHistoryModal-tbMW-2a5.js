import{r as l,j as r,b1 as d,co as p,X as c}from"./vendor-core-V-oW58GW.js";import{a as x}from"./case-detail-CN_DMmR8.js";import{u as h}from"./ThemeContext-OPG61qw5.js";import{c as t}from"./useQueryHooks-BdeOvP9e.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./Button-PaGqeZoR.js";import"./Badge-B08w10nz.js";import"./schemas-B2_dy3tf.js";import"./SyncContext-DYD5yPAv.js";import"./dataService-75QCl8KS.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";import"./VirtualList-B1zORm91.js";import"./AppShell-Z1zGEOCG.js";import"./tabs.config-F85gN5xx.js";import"./PageHeader-os9pD5mt.js";import"./formatters-stMuSkc6.js";import"./Table-C8OsWLsz.js";import"./EmptyState-BwtZeBY5.js";import"./useNotify-Bhb3OIEg.js";import"./dateUtils-rLIRMrtk.js";import"./Card-D56KNEnI.js";import"./MetricCard-CDV5joW_.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-HC9RvMcM.js";import"./ErrorState-BA0dmAVI.js";import"./ConfirmDialog-CTAXMvML.js";import"./Modal-BlJFylOy.js";import"./Kanban-BbECSZhC.js";import"./FilterPanel-C0WYx6xs.js";import"./AdaptiveLoader-gvY3s3Bs.js";import"./UserAvatar-lVqVFNPb.js";import"./Tabs-BTz8yyZK.js";import"./Input-JNgj1Ekc.js";import"./TextArea-BMpffac7.js";import"./geminiService-DjDdWyh4.js";import"./TaskCreationModal-B2VECu1_.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const ae=({clause:i,onClose:a})=>{const{theme:e}=h(),[o,m]=l.useState(!1);return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[r.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm transition-opacity",onClick:a,"aria-hidden":"true"}),r.jsxs("div",{className:t("relative w-full max-w-4xl max-h-[90vh] flex flex-col rounded-lg shadow-2xl overflow-hidden",e.surface.default,e.border.default),children:[r.jsxs("div",{className:t("p-4 border-b flex justify-between items-center shrink-0",e.surface.highlight,e.border.default),children:[r.jsxs("h3",{id:"modal-title",className:t("font-bold text-lg flex items-center",e.text.primary),children:[r.jsx(d,{className:t("mr-2 h-5 w-5",e.primary.text),"aria-hidden":"true"}),"History: ",i.name]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[i.versions&&i.versions.length>1&&r.jsxs("button",{onClick:()=>m(!o),className:t("px-3 py-1.5 text-xs font-medium rounded border transition-colors flex items-center",o?t(e.primary.light,e.primary.text,e.primary.border):t(e.surface.default,e.text.secondary,e.border.default,`hover:${e.surface.highlight}`)),children:[r.jsx(p,{className:"h-3 w-3 mr-1.5","aria-hidden":"true"})," ",o?"Exit Compare":"Compare Versions"]}),r.jsx("button",{onClick:a,className:t("p-1 rounded hover:bg-slate-200",e.text.tertiary),"aria-label":"Close",children:r.jsx(c,{className:"h-5 w-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o&&i.versions&&i.versions.length>=2?r.jsx("div",{className:"h-96",children:r.jsx(x,{oldText:i.versions[1]?.content||"",newText:i.versions[0]?.content||"",oldLabel:`Version ${i.versions[1]?.version||"N/A"}`,newLabel:`Version ${i.versions[0]?.version||"N/A"} (Current)`})}):r.jsx("div",{className:"space-y-4",children:i.versions?.map(n=>{const s=n;return r.jsxs("div",{className:t("border rounded-lg p-4 transition-colors group",e.border.default,`hover:${e.surface.highlight}`),children:[r.jsx("div",{className:"flex justify-between items-start mb-2",children:r.jsxs("div",{children:[r.jsxs("span",{className:t("inline-flex items-center px-2 py-0.5 rounded text-xs font-bold mr-2",s.version===i.version?t(e.status.success.bg,e.status.success.text):t(e.surface.highlight,e.text.secondary)),children:["v",s.version]}),r.jsxs("span",{className:t("text-xs",e.text.tertiary),children:["Edited by ",s.author," on ",s.updatedAt]})]})}),r.jsx("p",{className:t("text-sm font-serif leading-relaxed",e.text.primary),children:s.content})]},s.id||s.version)})})})]})]})};export{ae as ClauseHistoryModal};
