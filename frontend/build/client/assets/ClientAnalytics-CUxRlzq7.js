import{j as t}from"./vendor-core-V-oW58GW.js";import{C as a}from"./Card-D56KNEnI.js";import{D as x}from"./dataService-75QCl8KS.js";import{u as y}from"./useQueryHooks-BdeOvP9e.js";import{j as h}from"./case-detail-CN_DMmR8.js";import{u as j}from"./ThemeContext-OPG61qw5.js";import{R as m,B as l,C as g,X as n,Y as c,T as p,L as v,a as o}from"./vendor-charts-KZIdMATq.js";import"./vendor-misc-Dwkhvdtg.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";import"./Button-PaGqeZoR.js";import"./Badge-B08w10nz.js";import"./schemas-B2_dy3tf.js";import"./SyncContext-DYD5yPAv.js";import"./VirtualList-B1zORm91.js";import"./AppShell-Z1zGEOCG.js";import"./tabs.config-F85gN5xx.js";import"./PageHeader-os9pD5mt.js";import"./formatters-stMuSkc6.js";import"./Table-C8OsWLsz.js";import"./EmptyState-BwtZeBY5.js";import"./useNotify-Bhb3OIEg.js";import"./dateUtils-rLIRMrtk.js";import"./MetricCard-CDV5joW_.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-HC9RvMcM.js";import"./ErrorState-BA0dmAVI.js";import"./ConfirmDialog-CTAXMvML.js";import"./Modal-BlJFylOy.js";import"./Kanban-BbECSZhC.js";import"./FilterPanel-C0WYx6xs.js";import"./AdaptiveLoader-gvY3s3Bs.js";import"./UserAvatar-lVqVFNPb.js";import"./Tabs-BTz8yyZK.js";import"./Input-JNgj1Ekc.js";import"./TextArea-BMpffac7.js";import"./geminiService-DjDdWyh4.js";import"./TaskCreationModal-B2VECu1_.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const ut=()=>{const{mode:d}=j(),e=h(),{data:r}=y(["crm","analytics"],()=>x.crm.getAnalytics(d)),u=typeof r=="object"&&r!==null&&"revenue"in r&&Array.isArray(r.revenue)?r.revenue:[],f=typeof r=="object"&&r!==null&&"sources"in r&&Array.isArray(r.sources)?r.sources:[],s={revenue:u,sources:f};return t.jsx("div",{className:"space-y-6 animate-fade-in",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(a,{title:"Revenue Composition (Retained vs New)",children:t.jsx("div",{className:"h-80 w-full",children:t.jsx(m,{width:"100%",height:"100%",children:t.jsxs(l,{data:s.revenue,margin:{top:20,right:30,left:20,bottom:5},children:[t.jsx(g,{strokeDasharray:"3 3",vertical:!1,stroke:e.grid}),t.jsx(n,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:e.text,fontSize:12}}),t.jsx(c,{axisLine:!1,tickLine:!1,tick:{fill:e.text,fontSize:12},tickFormatter:i=>`$${i/1e3}k`}),t.jsx(p,{cursor:{fill:e.grid},formatter:i=>`$${(typeof i=="number"?i:0).toLocaleString()}`,contentStyle:e.tooltipStyle}),t.jsx(v,{}),t.jsx(o,{dataKey:"retained",name:"Retained Revenue",stackId:"a",fill:e.colors.blue,radius:[0,0,4,4]}),t.jsx(o,{dataKey:"new",name:"New Business",stackId:"a",fill:e.colors.emerald,radius:[4,4,0,0]})]})})})}),t.jsx(a,{title:"Lead Source Efficiency",children:t.jsx("div",{className:"h-80 w-full",children:t.jsx(m,{width:"100%",height:"100%",children:t.jsxs(l,{data:s.sources,layout:"vertical",margin:{left:40},children:[t.jsx(n,{type:"number",hide:!0}),t.jsx(c,{dataKey:"name",type:"category",tick:{fill:e.text,fontSize:12}}),t.jsx(p,{cursor:{fill:e.grid},contentStyle:e.tooltipStyle}),t.jsx(o,{dataKey:"value",fill:e.colors.purple,radius:[0,4,4,0],barSize:24})]})})})})]})})};export{ut as ClientAnalytics};
