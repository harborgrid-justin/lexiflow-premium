import{j as t}from"./vendor-core-V-oW58GW.js";import{C as a}from"./Card-CDOiP5UM.js";import{D as x}from"./dataService-BWLMkXM4.js";import{u as y}from"./useQueryHooks-Oyt-TMLP.js";import{j as h}from"./case-detail-q84K17Pa.js";import{u as j}from"./ThemeContext-OPG61qw5.js";import{R as m,B as l,C as g,X as n,Y as c,T as p,L as v,a as o}from"./vendor-charts-KZIdMATq.js";import"./vendor-misc-Dwkhvdtg.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";import"./Button-CDQlLg6j.js";import"./Badge-bF-hTHJZ.js";import"./schemas-B2_dy3tf.js";import"./SyncContext-B5_p5hCg.js";import"./VirtualList-r2WXvtCD.js";import"./AppShell-Cug-APl3.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./formatters-stMuSkc6.js";import"./Table-C_bcd1kC.js";import"./EmptyState-7A4cJUVU.js";import"./useNotify-DdRjm5G5.js";import"./MetricCard-BH_9X7pi.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-D_292xEY.js";import"./ErrorState-WL3az5ve.js";import"./ConfirmDialog--jvbqDAw.js";import"./Modal-Rns91qFF.js";import"./Kanban-BI78PbzY.js";import"./dateUtils-rLIRMrtk.js";import"./FilterPanel-BteidCPx.js";import"./AdaptiveLoader-D5wOoiN1.js";import"./UserAvatar-BPVf-Spq.js";import"./Tabs-7xONCRTX.js";import"./Input-Dmln04Yk.js";import"./TextArea-DrtcCAyn.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const ut=()=>{const{mode:d}=j(),e=h(),{data:r}=y(["crm","analytics"],()=>x.crm.getAnalytics(d)),u=typeof r=="object"&&r!==null&&"revenue"in r&&Array.isArray(r.revenue)?r.revenue:[],f=typeof r=="object"&&r!==null&&"sources"in r&&Array.isArray(r.sources)?r.sources:[],s={revenue:u,sources:f};return t.jsx("div",{className:"space-y-6 animate-fade-in",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(a,{title:"Revenue Composition (Retained vs New)",children:t.jsx("div",{className:"h-80 w-full",children:t.jsx(m,{width:"100%",height:"100%",children:t.jsxs(l,{data:s.revenue,margin:{top:20,right:30,left:20,bottom:5},children:[t.jsx(g,{strokeDasharray:"3 3",vertical:!1,stroke:e.grid}),t.jsx(n,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:e.text,fontSize:12}}),t.jsx(c,{axisLine:!1,tickLine:!1,tick:{fill:e.text,fontSize:12},tickFormatter:i=>`$${i/1e3}k`}),t.jsx(p,{cursor:{fill:e.grid},formatter:i=>`$${(typeof i=="number"?i:0).toLocaleString()}`,contentStyle:e.tooltipStyle}),t.jsx(v,{}),t.jsx(o,{dataKey:"retained",name:"Retained Revenue",stackId:"a",fill:e.colors.blue,radius:[0,0,4,4]}),t.jsx(o,{dataKey:"new",name:"New Business",stackId:"a",fill:e.colors.emerald,radius:[4,4,0,0]})]})})})}),t.jsx(a,{title:"Lead Source Efficiency",children:t.jsx("div",{className:"h-80 w-full",children:t.jsx(m,{width:"100%",height:"100%",children:t.jsxs(l,{data:s.sources,layout:"vertical",margin:{left:40},children:[t.jsx(n,{type:"number",hide:!0}),t.jsx(c,{dataKey:"name",type:"category",tick:{fill:e.text,fontSize:12}}),t.jsx(p,{cursor:{fill:e.grid},contentStyle:e.tooltipStyle}),t.jsx(o,{dataKey:"value",fill:e.colors.purple,radius:[0,4,4,0],barSize:24})]})})})})]})})};export{ut as ClientAnalytics};
