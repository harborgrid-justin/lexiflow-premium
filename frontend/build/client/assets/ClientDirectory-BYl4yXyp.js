import{j as e,bB as B,aT as g,bM as S,r as c,aF as L}from"./vendor-core-V-oW58GW.js";import{c as r,C as b,d as M}from"./useQueryHooks-Oyt-TMLP.js";import"./type-mappings-DEPYyX4d.js";import{h as E}from"./case-detail-q84K17Pa.js";import{T as P,a as R,b as i,c as V,d as z,e as o}from"./Table-C_bcd1kC.js";import{B as y}from"./Badge-bF-hTHJZ.js";import{B as x}from"./Button-CDQlLg6j.js";import{C as v}from"./FilterPanel-BteidCPx.js";import{u as N}from"./ThemeContext-OPG61qw5.js";import{D}from"./dataService-BWLMkXM4.js";import{u as G}from"./useNotify-DdRjm5G5.js";import{a as I}from"./useDomainData-O9f-h_PA.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./schemas-B2_dy3tf.js";import"./SyncContext-B5_p5hCg.js";import"./VirtualList-r2WXvtCD.js";import"./AppShell-Cug-APl3.js";import"./preload-helper-BXl3LOEh.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./formatters-stMuSkc6.js";import"./EmptyState-7A4cJUVU.js";import"./Card-CDOiP5UM.js";import"./MetricCard-BH_9X7pi.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-D_292xEY.js";import"./ErrorState-WL3az5ve.js";import"./ConfirmDialog--jvbqDAw.js";import"./Modal-Rns91qFF.js";import"./Kanban-BI78PbzY.js";import"./dateUtils-rLIRMrtk.js";import"./AdaptiveLoader-D5wOoiN1.js";import"./UserAvatar-BPVf-Spq.js";import"./Tabs-7xONCRTX.js";import"./Input-Dmln04Yk.js";import"./TextArea-DrtcCAyn.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const H=({client:a,onGenerateToken:n})=>{const{theme:t}=N();return e.jsxs("div",{className:r("p-6 rounded-lg border shadow-sm transition-all hover:shadow-md group",t.surface.default,t.border.default),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:r("h-12 w-12 rounded-full flex items-center justify-center font-bold text-lg border",t.primary.light,t.primary.text,t.primary.border),children:(a.name||"").substring(0,2)}),e.jsx(y,{variant:a.status===b.ACTIVE?"success":"neutral",children:a.status})]}),e.jsx("h3",{className:r("font-bold text-lg mb-1",t.text.primary),children:a.name}),e.jsxs("p",{className:r("text-sm flex items-center mb-4",t.text.secondary),children:[e.jsx(B,{className:"h-3 w-3 mr-1"})," ",a.industry]}),e.jsxs("div",{className:r("grid grid-cols-2 gap-4 text-sm pt-4 border-t",t.border.default),children:[e.jsxs("div",{children:[e.jsx("p",{className:r("text-[10px] uppercase font-bold",t.text.tertiary),children:"Lifetime Billed"}),e.jsx(v,{value:a.totalBilled,className:r("font-bold",t.text.primary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:r("text-[10px] uppercase font-bold",t.text.tertiary),children:"Active Matters"}),e.jsx("p",{className:r("font-bold",t.text.primary),children:(a.matters||[]).length})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(x,{size:"sm",variant:"outline",className:"flex-1",icon:g,onClick:()=>n(a.id),children:"Portal"}),e.jsx(x,{size:"sm",variant:"ghost",className:"px-2",icon:S})]})]})};function Pe({clients:a,onOpenPortal:n}){const{theme:t}=N(),C=G(),[l,w]=c.useState(""),[d,p]=c.useState("grid"),{data:h=[]}=I(),{mutate:u}=M(D.clients.generatePortalToken,{onSuccess:(s,T)=>{const k=s;C.success(`Portal Access Token Generated: ${k.substring(0,12)}...`);const f=m.find(A=>A.id===T);f&&n(f)}}),m=Array.isArray(a)?a:Array.isArray(h)?h:[],j=c.useMemo(()=>m.filter(s=>(s.name||"").toLowerCase().includes(l.toLowerCase())||(s.industry||"").toLowerCase().includes(l.toLowerCase())),[m,l]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(E,{value:l,onChange:w,placeholder:"Search clients...",className:"w-full max-w-lg"}),e.jsxs("div",{className:r("flex bg-slate-100 p-1 rounded-lg border",t.border.default),children:[e.jsx("button",{onClick:()=>p("grid"),className:r("px-3 py-1 text-xs font-medium rounded-md transition-all",d==="grid"?"bg-white shadow text-slate-900":"text-slate-500 hover:text-slate-700"),children:"Grid"}),e.jsx("button",{onClick:()=>p("list"),className:r("px-3 py-1 text-xs font-medium rounded-md transition-all",d==="list"?"bg-white shadow text-slate-900":"text-slate-500 hover:text-slate-700"),children:"List"})]})]}),d==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>e.jsx(H,{client:s,onGenerateToken:u},s.id))}):e.jsxs(P,{children:[e.jsxs(R,{children:[e.jsx(i,{children:"Client Name"}),e.jsx(i,{children:"Industry"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Active Matters"}),e.jsx(i,{children:"Total Revenue"}),e.jsx(i,{className:"text-right",children:"Actions"})]}),e.jsx(V,{children:j.map(s=>e.jsxs(z,{children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:r("h-8 w-8 rounded-full flex items-center justify-center font-bold text-xs border",t.primary.light,t.primary.text,t.primary.border),children:(s.name||"").substring(0,2)}),e.jsx("span",{className:r("font-medium",t.text.primary),children:s.name})]})}),e.jsx(o,{children:s.industry}),e.jsx(o,{children:e.jsx(y,{variant:s.status===b.ACTIVE?"success":"neutral",children:s.status})}),e.jsx(o,{children:(s.matters||[]).length}),e.jsx(o,{children:e.jsx(v,{value:s.totalBilled})}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{size:"sm",variant:"ghost",className:t.text.secondary,icon:g,onClick:()=>u(s.id),children:"Portal"}),e.jsx("button",{className:r("p-1.5 rounded hover:bg-slate-100",t.text.tertiary),children:e.jsx(L,{className:"h-4 w-4"})})]})})]},s.id))})]})]})}export{Pe as ClientDirectory};
