import{r as P,j as e,aj as w,al as H,a5 as z,cd as K,cM as Q,a7 as U}from"./vendor-core-V-oW58GW.js";import{T as V,a as $,b as u,c as G,d as S,e as c}from"./Table-C_bcd1kC.js";import{B as J}from"./Badge-bF-hTHJZ.js";import{B as i}from"./Button-CDQlLg6j.js";import{I as d}from"./Input-Dmln04Yk.js";import{T as A}from"./TextArea-DrtcCAyn.js";import{M as v}from"./Modal-Rns91qFF.js";import{u as L,d as g,q as f,c as l}from"./useQueryHooks-Oyt-TMLP.js";import{D as h}from"./dataService-BWLMkXM4.js";import{u as W}from"./ThemeContext-OPG61qw5.js";import"./SyncContext-B5_p5hCg.js";import{q as j}from"./queryKeys-BBVgMz36.js";import{u as C}from"./useModalState-Cst_3NmK.js";import{u as X}from"./useSelectionState-DfTDWAAj.js";import{u as Y}from"./useNotify-DdRjm5G5.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const ve=()=>{const{theme:n}=W(),o=Y(),{data:y=[]}=L(j.discoveryExtended.custodians(),()=>h.custodians.getAll()),N=Array.isArray(y)?y:[],m=C(),x=C(),p=C(),r=X(),[a,t]=P.useState({}),{mutate:E}=g(async s=>h.custodians.create(s),{onSuccess:()=>{f.invalidate(j.discoveryExtended.custodians()),m.close(),t({}),o.success("Custodian created successfully")},onError:()=>o.error("Failed to create custodian")}),{mutate:D}=g(async s=>h.custodians.update(s.id,s),{onSuccess:()=>{f.invalidate(j.discoveryExtended.custodians()),x.close(),r.deselect(),t({}),o.success("Custodian updated successfully")},onError:()=>o.error("Failed to update custodian")}),{mutate:T}=g(async s=>h.custodians.delete(s),{onSuccess:()=>{f.invalidate(j.discoveryExtended.custodians()),p.close(),r.deselect(),o.success("Custodian deleted successfully")},onError:()=>o.error("Failed to delete custodian")}),M=()=>{if(!a.name||!a.email){o.error("Name and email are required");return}const s=new Date,F=`cust-${Date.now()}`,b=s.toISOString().split("T")[0],I={id:F,caseId:"case-1",name:a.name,email:a.email,department:a.department||"",role:a.role||"",status:"Pending",notes:a.notes,createdAt:b,updatedAt:b};E(I)},k=()=>{if(!r.selected||!a.name||!a.email){o.error("Name and email are required");return}const s={...r.selected,...a,updatedAt:new Date().toISOString().split("T")[0]};D(s)},O=()=>{r.selected&&T(r.selected.id)},R=s=>{r.select(s),t(s),x.open()},q=s=>{r.select(s),p.open()},B=s=>{switch(s){case"Active":return"success";case"On Hold":return"warning";case"Released":return"neutral";case"Pending":return"info";default:return"neutral"}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:l("flex justify-between items-center p-4 rounded-lg border shadow-sm",n.surface.default,n.border.default),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:l("font-bold flex items-center",n.text.primary),children:[e.jsx(w,{className:"h-5 w-5 mr-2 text-blue-500"})," Custodian Management"]}),e.jsx("p",{className:l("text-sm",n.text.secondary),children:"Manage data custodians and legal hold recipients."})]}),e.jsx(i,{variant:"primary",icon:H,onClick:()=>{t({}),m.open()},children:"Add Custodian"})]}),e.jsxs(V,{children:[e.jsxs($,{children:[e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Department"}),e.jsx(u,{children:"Role"}),e.jsx(u,{children:"Status"}),e.jsx(u,{children:"Actions"})]}),e.jsxs(G,{children:[N.map(s=>e.jsxs(S,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:l("h-4 w-4",n.text.tertiary)}),e.jsx("span",{className:l("font-medium",n.text.primary),children:s.name})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(z,{className:l("h-3 w-3",n.text.tertiary)}),s.email]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(K,{className:l("h-3 w-3",n.text.tertiary)}),s.department||"-"]})}),e.jsx(c,{children:s.role||"-"}),e.jsx(c,{children:e.jsx(J,{variant:B(s.status),children:s.status})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"ghost",icon:Q,onClick:()=>R(s),children:"Edit"}),e.jsx(i,{size:"sm",variant:"ghost",icon:U,onClick:()=>q(s),children:"Delete"})]})})]},s.id)),N.length===0&&e.jsx(S,{children:e.jsx(c,{colSpan:6,className:l("text-center py-8 italic",n.text.tertiary),children:'No custodians found. Click "Add Custodian" to create one.'})})]})]}),e.jsx(v,{isOpen:m.isOpen,onClose:m.close,title:"Add New Custodian",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(d,{label:"Full Name",value:a.name||"",onChange:s=>t({...a,name:s.target.value}),placeholder:"Enter custodian's full name"}),e.jsx(d,{label:"Email Address",type:"email",value:a.email||"",onChange:s=>t({...a,email:s.target.value}),placeholder:"custodian@company.com"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{label:"Department",value:a.department||"",onChange:s=>t({...a,department:s.target.value}),placeholder:"e.g., Engineering"}),e.jsx(d,{label:"Role / Title",value:a.role||"",onChange:s=>t({...a,role:s.target.value}),placeholder:"e.g., Senior Developer"})]}),e.jsx(A,{label:"Notes",value:a.notes||"",onChange:s=>t({...a,notes:s.target.value}),placeholder:"Additional notes about this custodian...",rows:3}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"secondary",onClick:m.close,children:"Cancel"}),e.jsx(i,{variant:"primary",onClick:M,children:"Create Custodian"})]})]})}),e.jsx(v,{isOpen:x.isOpen,onClose:x.close,title:"Edit Custodian",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(d,{label:"Full Name",value:a.name||"",onChange:s=>t({...a,name:s.target.value})}),e.jsx(d,{label:"Email Address",type:"email",value:a.email||"",onChange:s=>t({...a,email:s.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{label:"Department",value:a.department||"",onChange:s=>t({...a,department:s.target.value})}),e.jsx(d,{label:"Role / Title",value:a.role||"",onChange:s=>t({...a,role:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:l("block text-xs font-bold uppercase mb-1.5",n.text.secondary),children:"Status"}),e.jsxs("select",{title:"Select custodian status",className:l("w-full p-2 border rounded text-sm",n.surface.default,n.border.default),value:a.status||"",onChange:s=>t({...a,status:s.target.value}),children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Released",children:"Released"})]})]}),e.jsx(A,{label:"Notes",value:a.notes||"",onChange:s=>t({...a,notes:s.target.value}),rows:3}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"secondary",onClick:x.close,children:"Cancel"}),e.jsx(i,{variant:"primary",onClick:k,children:"Save Changes"})]})]})}),e.jsx(v,{isOpen:p.isOpen,onClose:p.close,title:"Delete Custodian",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("p",{className:l("mb-6",n.text.primary),children:["Are you sure you want to delete ",e.jsx("strong",{children:r.selected?.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(i,{variant:"secondary",onClick:p.close,children:"Cancel"}),e.jsx(i,{variant:"primary",onClick:O,children:"Delete"})]})]})})]})};export{ve as Custodians,ve as default};
