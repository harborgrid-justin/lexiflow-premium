import{r as S,l as u,j as e,bs as T,al as R,b4 as E,aa as k,bD as P,b9 as M,ac as O,F as I}from"./vendor-core-V-oW58GW.js";import{B as V}from"./Badge-B08w10nz.js";import{B as n}from"./Button-PaGqeZoR.js";import{I as c}from"./Input-JNgj1Ekc.js";import{T as B}from"./TextArea-BMpffac7.js";import{T as W,a as L,b as l,c as A,d as j,e as i}from"./Table-C8OsWLsz.js";import{T as _}from"./TaskCreationModal-B2VECu1_.js";import{u as z,d as F,c as r}from"./useQueryHooks-BdeOvP9e.js";import{u as H}from"./ThemeContext-OPG61qw5.js";import{a as K}from"./SyncContext-DYD5yPAv.js";import{D as N,S as f}from"./dataService-75QCl8KS.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./queryKeys-BBVgMz36.js";import"./useNotify-Bhb3OIEg.js";import"./Modal-BlJFylOy.js";import"./search.config-B6mvIgDA.js";import"./UserAvatar-lVqVFNPb.js";import"./type-mappings-DEPYyX4d.js";import"./preload-helper-BXl3LOEh.js";const me=()=>{const{theme:a}=H(),{openWindow:g,closeWindow:v}=K(),[t,o]=S.useState({}),{data:m=[]}=z([f.DISCOVERY_EXT_DEPO,"all"],()=>N.discovery.getDepositions()),x=Array.isArray(m)?m:[],{mutate:w}=F(N.discovery.addDeposition,{invalidateKeys:[[f.DISCOVERY_EXT_DEPO,"all"]],onSuccess:()=>{v("schedule-depo"),o({})}}),y=()=>{if(!t.witnessName||!t.date)return;const s={id:`DEP-${Date.now()}`,caseId:"C-2024-001",witnessName:t.witnessName,date:t.date,location:t.location||"Remote",status:"Scheduled",courtReporter:t.courtReporter,prepNotes:t.prepNotes};w(s)},D=()=>{g("schedule-depo","Schedule Deposition",e.jsxs("div",{className:"p-6 space-y-4 bg-white",children:[e.jsx(c,{label:"Witness Name",value:t.witnessName||"",onChange:s=>o({...t,witnessName:s.target.value}),placeholder:"e.g. Jane Doe"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Date",type:"date",value:t.date||"",onChange:s=>o({...t,date:s.target.value})}),e.jsx(c,{label:"Location",value:t.location||"",onChange:s=>o({...t,location:s.target.value}),placeholder:"e.g. Remote (Zoom)"})]}),e.jsx(c,{label:"Court Reporter / Vendor",value:t.courtReporter||"",onChange:s=>o({...t,courtReporter:s.target.value}),placeholder:"e.g. Veritext"}),e.jsx(B,{label:"Prep Notes",value:t.prepNotes||"",onChange:s=>o({...t,prepNotes:s.target.value}),placeholder:"Key topics to cover..."}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(n,{variant:"primary",onClick:y,children:"Save Schedule"})})]}))},[b,p]=u.useState(!1),[d,h]=u.useState(null),C=s=>{h(s),p(!0)};return e.jsxs(e.Fragment,{children:[d&&e.jsx(_,{isOpen:b,onClose:()=>{p(!1),h(null)},initialTitle:`Prepare for Depo: ${d.witnessName}`,relatedModule:"Deposition",relatedItemId:d.id}),e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:r("flex justify-between items-center p-4 rounded-lg border shadow-sm",a.surface.default,a.border.default),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:r("font-bold flex items-center",a.text.primary),children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-indigo-600"})," Deposition Calendar"]}),e.jsx("p",{className:r("text-sm",a.text.secondary),children:"Manage witness schedules and preparation tasks."})]}),e.jsx(n,{variant:"primary",icon:R,onClick:D,children:"Schedule New"})]}),e.jsxs(W,{children:[e.jsxs(L,{children:[e.jsx(l,{children:"Witness"}),e.jsx(l,{children:"Date & Time"}),e.jsx(l,{children:"Location"}),e.jsx(l,{children:"Reporter / Vendor"}),e.jsx(l,{children:"Status"}),e.jsx(l,{className:"text-right",children:"Actions"})]}),e.jsxs(A,{children:[x.map(s=>e.jsxs(j,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-50 p-2 rounded-full text-indigo-600",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:r("font-bold text-sm",a.text.primary),children:s.witnessName}),e.jsx("p",{className:r("text-xs font-mono",a.text.tertiary),children:s.id})]})]})}),e.jsx(i,{children:e.jsxs("div",{className:r("flex items-center text-sm",a.text.primary),children:[e.jsx(k,{className:r("h-4 w-4 mr-2",a.text.tertiary)})," ",new Date(s.date).toLocaleDateString()]})}),e.jsx(i,{children:e.jsxs("div",{className:r("flex items-center text-sm",a.text.primary),children:[s.location.toLowerCase().includes("zoom")||s.location.toLowerCase().includes("remote")?e.jsx(P,{className:"h-4 w-4 mr-2 text-blue-500"}):e.jsx(M,{className:r("h-4 w-4 mr-2",a.text.tertiary)}),s.location]})}),e.jsx(i,{className:r("text-sm",a.text.secondary),children:s.courtReporter||"-"}),e.jsx(i,{children:e.jsx(V,{variant:s.status==="Scheduled"?"info":s.status==="Completed"?"success":"neutral",children:s.status})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{size:"sm",variant:"ghost",icon:O,onClick:()=>C(s),children:"Prep"}),e.jsx(n,{size:"sm",variant:"ghost",icon:I,className:"text-blue-600",children:"Exhibits"})]})})]},s.id)),x.length===0&&e.jsx(j,{children:e.jsx(i,{colSpan:6,className:r("text-center py-8 italic",a.text.tertiary),children:"No depositions scheduled."})})]})]})]})]})};export{me as DiscoveryDepositions,me as default};
