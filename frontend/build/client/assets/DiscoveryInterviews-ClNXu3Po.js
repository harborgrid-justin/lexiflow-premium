import{j as e,b4 as p,aa as v,ac as j,r as f,bb as g,al as N}from"./vendor-core-V-oW58GW.js";import{D as u}from"./dataService-BWLMkXM4.js";import{B as x}from"./Button-CDQlLg6j.js";import{T as w,a as y,b as c,c as b,d as C,e as d}from"./Table-C_bcd1kC.js";import{B as D}from"./Badge-bF-hTHJZ.js";import{u as h}from"./ThemeContext-OPG61qw5.js";import{c as l,u as S,d as T}from"./useQueryHooks-Oyt-TMLP.js";import{M as I}from"./Modal-Rns91qFF.js";import{I as m}from"./Input-Dmln04Yk.js";import{T as M}from"./TextArea-DrtcCAyn.js";import"./SyncContext-B5_p5hCg.js";import{u as B}from"./useModalState-Cst_3NmK.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const k=({interviews:r,onManage:n})=>{const{theme:i}=h();return e.jsxs(w,{children:[e.jsxs(y,{children:[e.jsx(c,{children:"Custodian"}),e.jsx(c,{children:"Department"}),e.jsx(c,{children:"Date"}),e.jsx(c,{children:"Status"}),e.jsx(c,{children:"Notes"}),e.jsx(c,{className:"text-right",children:"Action"})]}),e.jsx(b,{children:r.map(s=>e.jsxs(C,{children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:l("h-4 w-4",i.text.tertiary)}),e.jsx("span",{className:l("font-bold",i.text.primary),children:s.custodianName})]})}),e.jsx(d,{children:s.department}),e.jsx(d,{children:e.jsxs("div",{className:l("flex items-center text-xs",i.text.secondary),children:[e.jsx(v,{className:"h-3 w-3 mr-1"})," ",s.interviewDate||"Unscheduled"]})}),e.jsx(d,{children:e.jsx(D,{variant:s.status==="Completed"?"success":s.status==="Scheduled"?"info":"warning",children:s.status})}),e.jsx(d,{className:l("max-w-xs truncate text-xs",i.text.secondary),children:s.notes}),e.jsx(d,{className:"text-right",children:e.jsx(x,{size:"sm",variant:"ghost",icon:j,onClick:()=>n(s),children:"Manage"})})]},s.id))})]})},A=({isOpen:r,onClose:n,onSave:i})=>{const[s,o]=f.useState({}),a=()=>{i(s),o({})};return e.jsx(I,{isOpen:r,onClose:n,title:"Schedule Interview",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(m,{label:"Custodian Name",value:s.custodianName||"",onChange:t=>o({...s,custodianName:t.target.value}),placeholder:"e.g. John Doe"}),e.jsx(m,{label:"Department",value:s.department||"",onChange:t=>o({...s,department:t.target.value}),placeholder:"e.g. Engineering"}),e.jsx(m,{label:"Date",type:"date",value:s.interviewDate||"",onChange:t=>o({...s,interviewDate:t.target.value})}),e.jsx(M,{label:"Notes / Agenda",value:s.notes||"",onChange:t=>o({...s,notes:t.target.value}),placeholder:"Topics to discuss..."}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(x,{variant:"primary",onClick:a,children:"Save Schedule"})})]})})},W=()=>{const{theme:r}=h(),n=B(),{data:i=[]}=S(["discovery-interviews","all"],()=>u.discovery.getInterviews()),{mutate:s}=T(u.discovery.createInterview,{invalidateKeys:[["discovery-interviews","all"]],onSuccess:()=>n.close()}),o=a=>{if(!a.custodianName)return;const t=`INT-${Date.now()}`;s({id:t,caseId:"C-2024-001",custodianName:a.custodianName,department:a.department||"General",status:"Scheduled",interviewDate:a.interviewDate,notes:a.notes})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:l("flex justify-between items-center p-4 rounded-lg border shadow-sm",r.surface.default,r.border.default),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:l("font-bold flex items-center",r.text.primary),children:[e.jsx(g,{className:"h-5 w-5 mr-2 text-blue-600"})," Custodian Interviews"]}),e.jsx("p",{className:l("text-sm",r.text.secondary),children:"Track interviews to identify data sources and preservation scope."})]}),e.jsx(x,{variant:"primary",icon:N,onClick:n.open,children:"Log Interview"})]}),e.jsx(k,{interviews:i,onManage:a=>console.log("Manage",a)}),e.jsx(A,{isOpen:n.isOpen,onClose:n.close,onSave:o})]})};export{W as DiscoveryInterviews,W as default};
