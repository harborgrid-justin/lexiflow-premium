const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/case-detail-CN_DMmR8.js","assets/vendor-core-V-oW58GW.js","assets/vendor-misc-Dwkhvdtg.js","assets/vendor-charts-KZIdMATq.js","assets/Button-PaGqeZoR.js","assets/ThemeContext-OPG61qw5.js","assets/useQueryHooks-BdeOvP9e.js","assets/Badge-B08w10nz.js","assets/schemas-B2_dy3tf.js","assets/SyncContext-DYD5yPAv.js","assets/dataService-75QCl8KS.js","assets/preload-helper-BXl3LOEh.js","assets/type-mappings-DEPYyX4d.js","assets/VirtualList-B1zORm91.js","assets/AppShell-Z1zGEOCG.js","assets/tabs.config-F85gN5xx.js","assets/PageHeader-os9pD5mt.js","assets/formatters-stMuSkc6.js","assets/Table-C8OsWLsz.js","assets/EmptyState-BwtZeBY5.js","assets/useNotify-Bhb3OIEg.js","assets/dateUtils-rLIRMrtk.js","assets/Card-D56KNEnI.js","assets/MetricCard-CDV5joW_.js","assets/queryKeys-BBVgMz36.js","assets/useSessionStorage-HC9RvMcM.js","assets/ErrorState-BA0dmAVI.js","assets/ConfirmDialog-CTAXMvML.js","assets/Modal-BlJFylOy.js","assets/Kanban-BbECSZhC.js","assets/FilterPanel-C0WYx6xs.js","assets/AdaptiveLoader-gvY3s3Bs.js","assets/UserAvatar-lVqVFNPb.js","assets/Tabs-BTz8yyZK.js","assets/Input-JNgj1Ekc.js","assets/TextArea-BMpffac7.js","assets/geminiService-DjDdWyh4.js","assets/TaskCreationModal-B2VECu1_.js","assets/search.config-B6mvIgDA.js","assets/useToggle-CjLp2PQ4.js","assets/sanitize-k_Tw3ej1.js","assets/useModalState-Cst_3NmK.js","assets/scheduler-BERajRBE.js","assets/RouteErrorBoundary-Nha8Il06.js","assets/meta-utils-lVs9HXG9.js"])))=>i.map(i=>d[i]);
import{_ as N}from"./preload-helper-BXl3LOEh.js";import{r as c,j as e,bd as v,ad as y,D as w,G as P,cK as S,bn as C,F as D,a6 as F}from"./vendor-core-V-oW58GW.js";import{B as k}from"./Button-PaGqeZoR.js";import{C as T}from"./Card-D56KNEnI.js";import{u as E}from"./ThemeContext-OPG61qw5.js";import{u as I,c as r}from"./useQueryHooks-BdeOvP9e.js";import{g as O}from"./case-detail-CN_DMmR8.js";import{d as L}from"./queryKeys-Dex4MaB7.js";import{a as _}from"./discoverySchemas-nx9p4LOg.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./Badge-B08w10nz.js";import"./schemas-B2_dy3tf.js";import"./SyncContext-DYD5yPAv.js";import"./dataService-75QCl8KS.js";import"./type-mappings-DEPYyX4d.js";import"./VirtualList-B1zORm91.js";import"./AppShell-Z1zGEOCG.js";import"./tabs.config-F85gN5xx.js";import"./PageHeader-os9pD5mt.js";import"./formatters-stMuSkc6.js";import"./Table-C8OsWLsz.js";import"./EmptyState-BwtZeBY5.js";import"./useNotify-Bhb3OIEg.js";import"./dateUtils-rLIRMrtk.js";import"./MetricCard-CDV5joW_.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-HC9RvMcM.js";import"./ErrorState-BA0dmAVI.js";import"./ConfirmDialog-CTAXMvML.js";import"./Modal-BlJFylOy.js";import"./Kanban-BbECSZhC.js";import"./FilterPanel-C0WYx6xs.js";import"./AdaptiveLoader-gvY3s3Bs.js";import"./UserAvatar-lVqVFNPb.js";import"./Tabs-BTz8yyZK.js";import"./Input-JNgj1Ekc.js";import"./TextArea-BMpffac7.js";import"./geminiService-DjDdWyh4.js";import"./TaskCreationModal-B2VECu1_.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const A=async()=>{const{DocumentService:n}=await N(async()=>{const{DocumentService:l}=await import("./case-detail-CN_DMmR8.js").then(t=>t.t);return{DocumentService:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]));return n},Te=({request:n,onBack:l})=>{const{theme:t}=E(),[p,m]=c.useState(!1),[d,f]=c.useState([]),{data:h}=I(L.discovery.productions.config(),async()=>{const s=localStorage.getItem("production-config-cache");if(s){const o=JSON.parse(s);if(Date.now()-o.timestamp<864e5)return o.config}return null},{staleTime:864e5}),[a,i]=c.useState(h||{batesPrefix:"PROD-",startNumber:100,format:"PDF",includeLoadFile:!0,ocr:!0,stampConfidential:"None"});c.useEffect(()=>{localStorage.setItem("production-config-cache",JSON.stringify({config:a,timestamp:Date.now()}))},[a]),O({"mod+p":()=>{x()},escape:()=>{l()}});const b=async s=>{if(s.target.files&&s.target.files.length>0){m(!0);const o=Array.from(s.target.files),g=await A();for(const u of o)await g.processFile(u),f(j=>[...j,u.name]);m(!1)}},x=()=>{const s=_(a);if(!s.success){console.error("Validation errors:",s.error.errors);return}alert("Production job queued. You will be notified upon completion."),l()};return e.jsxs("div",{className:r("flex flex-col h-full rounded-lg shadow-sm border animate-fade-in",t.surface.default,t.border.default),children:[e.jsxs("div",{className:r("p-4 border-b flex justify-between items-center",t.border.default,t.surface.highlight),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:l,className:r("mr-3 p-2 rounded-full transition-colors",t.text.secondary,`hover:${t.surface.default}`),children:e.jsx(v,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:r("text-lg font-bold",t.text.primary),children:"Production Wizard"}),e.jsx("p",{className:r("text-xs",t.text.secondary),children:n?`Target: ${n.title}`:"General Volume"})]})]}),e.jsx(k,{size:"sm",variant:"primary",onClick:x,children:"Finalize & Produce"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden",children:[e.jsxs("div",{className:r("w-full lg:w-96 border-r p-6 space-y-6 overflow-y-auto",t.border.default,t.surface.highlight),children:[e.jsx(T,{title:"Production Settings",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:r("block text-xs font-semibold uppercase mb-1",t.text.secondary),children:"Bates Numbering"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:r("w-20 p-2 border rounded text-sm",t.surface.default,t.border.default,t.text.primary),placeholder:"Prefix",value:a.batesPrefix,onChange:s=>i({...a,batesPrefix:s.target.value})}),e.jsx("input",{className:r("flex-1 p-2 border rounded text-sm font-mono",t.surface.default,t.border.default,t.text.primary),type:"number",value:a.startNumber,onChange:s=>i({...a,startNumber:parseInt(s.target.value)})})]}),e.jsxs("p",{className:r("text-xs mt-1",t.text.tertiary),children:["Next: ",a.batesPrefix,String(a.startNumber).padStart(6,"0")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:r("block text-xs font-semibold uppercase mb-1",t.text.secondary),children:"Format"}),e.jsxs("select",{className:r("w-full p-2 border rounded text-sm",t.surface.default,t.border.default,t.text.primary),value:a.format,onChange:s=>i({...a,format:s.target.value}),children:[e.jsx("option",{value:"PDF",children:"PDF + Text"}),e.jsx("option",{value:"Native",children:"Native Only"}),e.jsx("option",{value:"TIFF",children:"TIFF (Single Page)"})]})]}),e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsxs("label",{className:r("flex items-center text-sm cursor-pointer",t.text.primary),children:[e.jsx("input",{type:"checkbox",className:"mr-2 rounded text-blue-600",checked:a.includeLoadFile,onChange:s=>i({...a,includeLoadFile:s.target.checked})}),"Include Load File (.dat/.opt)"]}),e.jsxs("label",{className:r("flex items-center text-sm cursor-pointer",t.text.primary),children:[e.jsx("input",{type:"checkbox",className:"mr-2 rounded text-blue-600",checked:a.ocr,onChange:s=>i({...a,ocr:s.target.checked})}),"Perform OCR if missing"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:r("block text-xs font-semibold uppercase mb-1",t.text.secondary),children:"Confidentiality Stamp"}),e.jsxs("select",{className:r("w-full p-2 border rounded text-sm",t.surface.default,t.border.default,t.text.primary),value:a.stampConfidential,onChange:s=>i({...a,stampConfidential:s.target.value}),children:[e.jsx("option",{value:"None",children:"None"}),e.jsx("option",{value:"CONFIDENTIAL",children:"CONFIDENTIAL"}),e.jsx("option",{value:"ATTORNEY EYES ONLY",children:"ATTORNEY EYES ONLY"})]})]})]})}),e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-green-800 text-xs flex items-start",children:[e.jsx(y,{className:"h-4 w-4 mr-2 shrink-0 mt-0.5"}),e.jsx("p",{children:"Privilege filter active. Documents tagged 'Privileged' will be auto-flagged for withheld log and excluded from export."})]})]}),e.jsx("div",{className:r("flex-1 p-8 overflow-y-auto",t.surface.default),children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:r("border p-4 rounded-lg flex flex-col items-center justify-center text-center cursor-pointer transition-colors",t.border.default,`hover:${t.surface.highlight}`),children:[e.jsx(w,{className:"h-6 w-6 text-blue-500 mb-2"}),e.jsx("span",{className:r("text-sm font-bold",t.text.primary),children:"Import from Review"})]}),e.jsxs("div",{className:r("border p-4 rounded-lg flex flex-col items-center justify-center text-center cursor-pointer transition-colors",t.border.default,`hover:${t.surface.highlight}`),children:[e.jsx(P,{className:"h-6 w-6 text-purple-500 mb-2"}),e.jsx("span",{className:r("text-sm font-bold",t.text.primary),children:"Local Upload"})]}),e.jsxs("div",{className:r("border p-4 rounded-lg flex flex-col items-center justify-center text-center cursor-pointer transition-colors",t.border.default,`hover:${t.surface.highlight}`),children:[e.jsx(S,{className:r("h-6 w-6 mb-2",t.text.secondary)}),e.jsx("span",{className:r("text-sm font-bold",t.text.primary),children:"Print to Mail"})]})]}),e.jsxs("div",{className:r("border-2 border-dashed rounded-lg p-10 text-center cursor-pointer transition-colors relative",t.border.default,`hover:${t.surface.highlight}`),children:[e.jsx("input",{type:"file",multiple:!0,className:"absolute inset-0 opacity-0 cursor-pointer",onChange:b}),p?e.jsx("div",{className:"text-blue-600 font-medium animate-pulse",children:"Processing & Bates Stamping..."}):e.jsxs("div",{children:[e.jsx(C,{className:r("h-10 w-10 mx-auto mb-3",t.text.tertiary)}),e.jsx("span",{className:r("text-lg font-medium block",t.text.primary),children:"Drag & Drop Documents"}),e.jsx("span",{className:r("text-sm",t.text.secondary),children:"or click to browse responsive files"})]})]}),d.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:r("text-sm font-bold uppercase mb-3 border-b pb-2 flex justify-between",t.text.secondary,t.border.default),children:[e.jsx("span",{children:"Staged Documents"}),e.jsxs("span",{children:[d.length," Items"]})]}),e.jsx("div",{className:"space-y-2",children:d.map((s,o)=>e.jsxs("div",{className:r("flex justify-between items-center text-sm p-3 shadow-sm border rounded transition-colors",t.surface.default,t.border.default,`hover:${t.primary.border}`),children:[e.jsxs("span",{className:r("flex items-center font-medium",t.text.primary),children:[e.jsx(D,{className:"h-4 w-4 mr-3 text-blue-500"})," ",s]}),e.jsxs("div",{className:r("flex items-center text-xs",t.text.tertiary),children:[e.jsxs("span",{className:r("mr-3 font-mono px-1 rounded border",t.surface.highlight,t.border.default,t.text.secondary),children:[a.batesPrefix,String(a.startNumber+o).padStart(6,"0")]}),e.jsx(F,{className:"h-4 w-4 text-green-500"})]})]},o))})]})]})})]})]})};export{Te as DiscoveryProduction,Te as default};
