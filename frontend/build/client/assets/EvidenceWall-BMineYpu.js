import{j as t,af as w,b6 as A,bK as C,v as F,T,bh as k,F as E,r as u,ab as I}from"./vendor-core-V-oW58GW.js";import{u as $}from"./useFilterAndSearch-B2zKLOlA.js";import{u as h}from"./ThemeContext-OPG61qw5.js";import{a as M}from"./SyncContext-B5_p5hCg.js";import{F as P,h as L}from"./case-detail-q84K17Pa.js";import"./vendor-misc-Dwkhvdtg.js";import"./schemas-B2_dy3tf.js";import"./dataService-BWLMkXM4.js";import{c as o}from"./useQueryHooks-Oyt-TMLP.js";import"./VirtualList-r2WXvtCD.js";import"./Button-CDQlLg6j.js";import"./Badge-bF-hTHJZ.js";import"./AppShell-Cug-APl3.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./Table-C_bcd1kC.js";import"./EmptyState-7A4cJUVU.js";import"./UserAvatar-BPVf-Spq.js";import"./type-mappings-DEPYyX4d.js";import"./Card-CDOiP5UM.js";import"./MetricCard-BH_9X7pi.js";import"./Kanban-BI78PbzY.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./useNotify-DdRjm5G5.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-D_292xEY.js";import"./ErrorState-WL3az5ve.js";import"./ConfirmDialog--jvbqDAw.js";import"./Modal-Rns91qFF.js";import"./dateUtils-rLIRMrtk.js";import"./FilterPanel-BteidCPx.js";import"./formatters-stMuSkc6.js";import"./AdaptiveLoader-D5wOoiN1.js";import"./Tabs-7xONCRTX.js";import"./Input-Dmln04Yk.js";import"./TextArea-DrtcCAyn.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const S=({className:s})=>t.jsx("div",{className:s,children:"Document Preview (stub)"}),B=({item:s,onView:a})=>{const{theme:r}=h(),c=n=>n==="Motion"?t.jsx(k,{className:"h-12 w-12 opacity-50 text-purple-500"}):n==="Order"?t.jsx(E,{className:"h-12 w-12 opacity-50 text-rose-500"}):t.jsx(P,{type:n,className:"h-12 w-12 opacity-50"});return t.jsxs("div",{className:o("group relative flex flex-col rounded-xl border shadow-sm transition-all hover:shadow-md cursor-pointer",r.surface.default,r.border.default,s.hot?"ring-2 ring-rose-500/20":""),children:[t.jsxs("div",{className:o("aspect-[4/3] rounded-t-xl flex items-center justify-center relative overflow-hidden",r.surface.highlight),children:[c(s.type),s.hot&&t.jsx("span",{className:"absolute top-2 right-2 bg-rose-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm",children:"HOT"}),t.jsxs("div",{className:"absolute inset-0 bg-slate-900/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:n=>{n.stopPropagation(),a()},className:o("p-2 rounded-full shadow-lg transition-colors",r.surface.default,r.text.primary,`hover:${r.primary.text}`),title:"View",children:t.jsx(w,{className:"h-4 w-4"})}),t.jsx("button",{className:o("p-2 rounded-full shadow-lg transition-colors",r.surface.default,r.text.primary,`hover:${r.primary.text}`),title:"Open",children:t.jsx(A,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"flex gap-2 mt-2",children:t.jsxs("button",{className:o("px-3 py-1 text-white text-[10px] font-bold rounded-full shadow flex items-center transition-colors",r.primary.DEFAULT,`hover:${r.primary.hover}`),title:"Add to Binder",children:[t.jsx(C,{className:"h-3 w-3 mr-1"})," Binder"]})})]})]}),t.jsxs("div",{className:"p-3",children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.num&&t.jsx("span",{className:o("font-mono text-[10px] font-bold px-1.5 rounded border",r.surface.highlight,r.text.secondary,r.border.default),children:s.num.substring(0,8)}),s.status==="Admitted"&&t.jsx(F,{className:"h-3.5 w-3.5 text-emerald-500"}),s.status==="Excluded"&&t.jsx(T,{className:"h-3.5 w-3.5 text-rose-500"})]}),t.jsx("h4",{className:o("font-bold text-sm line-clamp-2 leading-tight mb-2",r.text.primary),children:s.title}),t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{className:o(r.text.tertiary),children:s.type}),s.status&&t.jsx("span",{className:o("font-medium",s.status==="Admitted"||s.status==="Filed"?"text-emerald-600":r.text.secondary),children:s.status})]})]})]})},Et=({warRoomData:s})=>{const{theme:a}=h(),{openWindow:r}=M(),[c,n]=u.useTransition(),x=u.useMemo(()=>{const e=(s.documents||[]).map(l=>{const i=l;return{id:i.id,title:i.title,type:i.type,status:i.status||"Available",hot:(i.tags||[]).includes("Hot")||(i.tags||[]).includes("Critical"),party:"Unknown",num:i.id,desc:i.content?.substring(0,100),original:i}}),m=(s.evidence||[]).map(l=>{const i=l;return{id:i.id,title:i.title,type:i.type,status:i.admissibility||"Pending",hot:(i.tags||[]).includes("Key Doc"),party:"Joint",num:i.id,desc:i.description,original:i}}),N=(s.motions||[]).map(l=>({id:l.id,title:l.title,type:"Motion",status:l.status,hot:!0,party:"Appellant",num:l.id,desc:`Motion Type: ${l.type}`,original:l}));return[...e,...m,...N]},[s]),{filteredItems:f,searchQuery:p,setSearchQuery:y,category:d,setCategory:g}=$({items:x,config:{categoryField:"type",searchFields:["title","desc","num"],arrayFields:[]},initialCategory:"All"}),j=e=>{n(()=>{g(e)})},b=e=>{const m=`ev-wall-${e.id}`;r(m,`Evidence Preview: ${e.title}`,t.jsx("div",{className:o("h-full",a.background),children:t.jsx(S,{documentId:e.id,className:"h-full"})}))},v=f.filter(e=>e.title.toLowerCase().includes(p.toLowerCase())||e.desc&&e.desc.toLowerCase().includes(p.toLowerCase())?d==="All"?!0:d==="Hot Docs"?e.hot:d==="Admitted"?e.status==="Admitted"||e.status==="Filed":d==="Motions"?e.type==="Motion":e.party===d:!1);return t.jsxs("div",{className:"space-y-6 animate-fade-in h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center gap-4 shrink-0",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(L,{value:p,onChange:y,placeholder:"Search exhibits & filings...",className:"w-full"}),c&&t.jsx("div",{className:"absolute right-12 top-1/2 -translate-y-1/2",children:t.jsx(I,{className:o("h-4 w-4 animate-spin",a.primary.text)})})]}),t.jsx("div",{className:o("flex p-1 rounded-lg border",a.surface.highlight,a.border.default),children:["All","Hot Docs","Admitted","Motions"].map(e=>t.jsx("button",{onClick:()=>j(e),className:o("px-3 py-1.5 text-xs font-medium rounded-md transition-all",d===e?o(a.surface.default,a.text.primary,"shadow"):o(a.text.secondary,`hover:${a.text.primary}`)),children:e},e))})]}),t.jsxs("div",{className:o("grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto pb-4 content-start",c?"opacity-70 transition-opacity":""),children:[v.map(e=>t.jsx(B,{item:e,onView:()=>b(e)},e.id)),t.jsxs("div",{className:o("border-2 border-dashed rounded-xl flex flex-col items-center justify-center p-6 transition-colors cursor-pointer",a.border.default,a.text.tertiary,`hover:${a.primary.border}`,`hover:${a.primary.text}`),children:[t.jsx("span",{className:"text-2xl font-light mb-2",children:"+"}),t.jsx("span",{className:"text-xs font-medium",children:"Add Evidence"})]})]})]})};export{Et as EvidenceWall};
