import{r as j,j as e,cI as v,al as y,b4 as f,aa as g}from"./vendor-core-V-oW58GW.js";import{T as N,a as b,b as l,c as C,d as x,e as i}from"./Table-C_bcd1kC.js";import{B as d}from"./Button-CDQlLg6j.js";import{B as E}from"./Badge-bF-hTHJZ.js";import{u as w}from"./ThemeContext-OPG61qw5.js";import{u as S,d as T,c as r}from"./useQueryHooks-Oyt-TMLP.js";import{D as p}from"./dataService-BWLMkXM4.js";import{M}from"./Modal-Rns91qFF.js";import{I as c}from"./Input-Dmln04Yk.js";import{T as R}from"./TextArea-DrtcCAyn.js";import"./SyncContext-B5_p5hCg.js";import{u as D}from"./useModalState-Cst_3NmK.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const J=()=>{const{theme:t}=w(),o=D(),[s,n]=j.useState({}),{data:m=[]}=S(["examinations","all"],()=>p.discovery.getExaminations()),{mutate:h}=T(p.discovery.addExamination,{invalidateKeys:[["examinations","all"]],onSuccess:()=>{o.close(),n({})}}),u=()=>{!s.examinee||!s.type||h({id:`exam-${Date.now()}`,caseId:"General",examinee:s.examinee,type:s.type,doctorName:s.doctorName||"Pending Selection",date:s.date||"",status:"Scheduled",goodCause:s.goodCause||""})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:r("flex justify-between items-center p-4 rounded-lg border shadow-sm",t.surface.default,t.border.default),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:r("font-bold flex items-center",t.text.primary),children:[e.jsx(v,{className:"h-5 w-5 mr-2 text-rose-500"})," Physical & Mental Examinations (Rule 35)"]}),e.jsx("p",{className:r("text-sm",t.text.secondary),children:"Manage IME appointments and reports."})]}),e.jsx(d,{variant:"primary",icon:y,onClick:o.open,children:"Order Exam"})]}),e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsx(l,{children:"Examinee"}),e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Doctor / Examiner"}),e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Report"})]}),e.jsxs(C,{children:[m.map(a=>e.jsxs(x,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:r("h-4 w-4",t.text.tertiary)}),e.jsx("span",{className:r("font-medium",t.text.primary),children:a.examinee})]})}),e.jsx(i,{children:a.type}),e.jsx(i,{children:a.doctorName}),e.jsx(i,{children:a.date?e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(g,{className:"h-3 w-3 mr-1"}),a.date]}):"-"}),e.jsx(i,{children:e.jsx(E,{variant:a.status==="Report Received"?"success":a.status==="Disputed"?"error":"info",children:a.status})}),e.jsx(i,{children:e.jsx(d,{size:"sm",variant:"ghost",disabled:a.status!=="Report Received",children:"View Report"})})]},a.id)),m.length===0&&e.jsx(x,{children:e.jsx(i,{colSpan:6,className:r("text-center py-8 italic",t.text.tertiary),children:"No examinations scheduled."})})]})]}),e.jsx(M,{isOpen:o.isOpen,onClose:o.close,title:"Order Rule 35 Examination",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(c,{label:"Examinee Name",value:s.examinee||"",onChange:a=>n({...s,examinee:a.target.value})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:r("block text-xs font-bold uppercase mb-1.5",t.text.secondary),children:"Type"}),e.jsxs("select",{title:"Select examination type",className:r("w-full p-2 border rounded text-sm",t.surface.default,t.border.default),value:s.type,onChange:a=>n({...s,type:a.target.value}),children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Physical",children:"Physical"}),e.jsx("option",{value:"Mental",children:"Mental"})]})]}),e.jsx(c,{type:"date",label:"Date",value:s.date||"",onChange:a=>n({...s,date:a.target.value})})]}),e.jsx(c,{label:"Examiner (Doctor)",value:s.doctorName||"",onChange:a=>n({...s,doctorName:a.target.value})}),e.jsx(R,{label:"Good Cause Statement",placeholder:"Detail why condition is in controversy...",value:s.goodCause||"",onChange:a=>n({...s,goodCause:a.target.value}),rows:3}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(d,{variant:"primary",onClick:u,children:"Create Order"})})]})})]})};export{J as Examinations,J as default};
