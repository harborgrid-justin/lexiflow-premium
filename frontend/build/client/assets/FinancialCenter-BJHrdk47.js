import{j as e,b5 as A,b6 as L,cv as C,F as D,r as k,ae as F,al as M}from"./vendor-core-V-oW58GW.js";import{u as h,c as t}from"./useQueryHooks-Oyt-TMLP.js";import{D as u}from"./dataService-BWLMkXM4.js";import{q as j}from"./queryKeys-BBVgMz36.js";import{u as p}from"./ThemeContext-OPG61qw5.js";import{B as g}from"./Button-CDQlLg6j.js";import{B as f}from"./Badge-bF-hTHJZ.js";import{C as b}from"./Card-CDOiP5UM.js";import{T as y,a as N,b as n,c as w,d as v,e as c}from"./Table-C_bcd1kC.js";import{F as d}from"./formatters-stMuSkc6.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const B=({expenses:a})=>{const{theme:s,mode:o}=p(),{data:r}=h(["billing","operating_summary"],u.billing.getOperatingSummary,{initialData:{balance:0,expensesMtd:0,cashFlowMtd:0}}),i=Array.isArray(a)?a:[],x=r?.balance??0,m=r?.expensesMtd??0,T=r?.cashFlowMtd??0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:t("rounded-lg p-6 shadow-lg border grid grid-cols-1 md:grid-cols-3 gap-6",o==="dark"?"bg-slate-800 border-slate-700":"bg-white border-slate-200"),children:[e.jsxs("div",{className:t("border-r pr-6",s.border.default),children:[e.jsx("p",{className:t("text-xs font-bold uppercase tracking-wider mb-1",s.text.secondary),children:"Operating Balance"}),e.jsx("p",{className:t("text-3xl font-mono font-bold mt-1 tracking-tight",s.text.primary),children:d.currency(x)})]}),e.jsxs("div",{className:t("border-r pr-6",s.border.default),children:[e.jsx("p",{className:t("text-xs font-bold uppercase tracking-wider mb-1",s.text.secondary),children:"Expenses (MTD)"}),e.jsxs("p",{className:t("text-2xl font-mono font-bold flex items-center",s.status.error.text),children:[e.jsx(A,{className:"h-5 w-5 mr-1"})," ",d.currency(m)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:t("text-xs font-bold uppercase tracking-wider mb-1",s.text.secondary),children:"Cash Flow (MTD)"}),e.jsxs("p",{className:t("text-2xl font-mono font-bold flex items-center",s.status.success.text),children:[e.jsx(L,{className:"h-5 w-5 mr-1"})," ",d.currency(T)]})]})]}),e.jsx(b,{title:"General Ledger (Expenses)",noPadding:!0,children:e.jsxs(y,{responsive:"card",className:"shadow-none border-0 rounded-none",children:[e.jsxs(N,{children:[e.jsx(n,{children:"Date"}),e.jsx(n,{children:"Vendor"}),e.jsx(n,{children:"Category"}),e.jsx(n,{children:"Description"}),e.jsx(n,{className:"text-right",children:"Amount"}),e.jsx(n,{className:"text-right",children:"Status"})]}),e.jsx(w,{children:i.map(l=>e.jsxs(v,{children:[e.jsx(c,{className:t("font-mono text-xs",s.text.secondary),children:d.date(l.date)}),e.jsx(c,{className:t("font-medium",s.text.primary),children:l.vendor}),e.jsx(c,{children:e.jsx(f,{variant:"neutral",children:l.category})}),e.jsx(c,{className:t("text-sm",s.text.secondary),children:l.description}),e.jsx(c,{className:t("font-mono font-bold text-right",s.text.primary),children:d.currency(l.amount)}),e.jsx(c,{className:"text-right",children:e.jsx(f,{variant:l.status==="Paid"?"success":"warning",children:l.status})})]},l.id))})]})})]})},S=({trustAccounts:a})=>{const{theme:s}=p(),o=a.reduce((r,i)=>r+i.balance,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:t("rounded-lg p-6 flex flex-col md:flex-row justify-between items-center shadow-sm border",s.status.success.bg,s.status.success.border),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:t("p-3 rounded-full bg-white/50 dark:bg-emerald-900/50",s.status.success.text),children:e.jsx(C,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:t("text-xl font-bold",s.status.success.text),children:"Total Trust Liability (IOLTA)"}),e.jsx("p",{className:t("text-sm mt-1 max-w-lg",s.status.success.text),children:"Client funds held in trust. Strictly regulated by State Bar. Daily reconciliation required."})]})]}),e.jsxs("div",{className:"text-right mt-4 md:mt-0",children:[e.jsx("p",{className:t("text-4xl font-mono font-bold tracking-tight",s.status.success.text),children:d.currency(o)}),e.jsxs("p",{className:t("text-xs font-bold uppercase mt-1 flex items-center justify-end",s.status.success.text),children:[e.jsx(D,{className:"h-3 w-3 mr-1"})," Reconciled: Today 09:00 AM"]})]})]}),e.jsx(b,{title:"Client Trust Ledgers",noPadding:!0,children:e.jsxs(y,{responsive:"card",className:"shadow-none border-0 rounded-none",children:[e.jsxs(N,{children:[e.jsx(n,{children:"Client"}),e.jsx(n,{children:"Matter Reference"}),e.jsx(n,{children:"Last Transaction"}),e.jsx(n,{className:"text-right",children:"Balance"})]}),e.jsx(w,{children:a.map((r,i)=>e.jsxs(v,{children:[e.jsx(c,{className:t("font-bold",s.text.primary),children:r.client}),e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:t("text-xs font-mono",s.text.secondary),children:r.matterId}),e.jsx("span",{className:t("text-sm",s.text.primary),children:r.matter})]})}),e.jsx(c,{className:s.text.secondary,children:r.lastTransaction}),e.jsx(c,{className:t("text-right font-mono font-bold",s.text.primary),children:d.currency(r.balance)})]},r.matterId||`trust-account-${i}`))})]})})]})},_=()=>{const{theme:a}=p(),[s,o]=k.useState("operating"),{data:r}=h(j.expenses.all(),()=>u.expenses.getAll()),{data:i}=h(j.trust.all(),()=>u.billing.getTrustAccounts()),x=Array.isArray(r)?r:[],m=Array.isArray(i)?i:[];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:t("flex flex-col sm:flex-row justify-between items-center gap-4 p-1 rounded-lg border",a.surface.default,a.border.default),children:[e.jsxs("div",{className:"flex gap-1 p-1",children:[e.jsx("button",{onClick:()=>o("operating"),className:t("px-4 py-2 text-sm font-medium rounded-md transition-all",s==="operating"?t(a.primary.DEFAULT,a.text.inverse,"shadow"):t(a.text.secondary,`hover:${a.surface.highlight}`)),children:"Operating Account"}),e.jsx("button",{onClick:()=>o("trust"),className:t("px-4 py-2 text-sm font-medium rounded-md transition-all",s==="trust"?"bg-green-600 text-white shadow":t(a.text.secondary,`hover:${a.surface.highlight}`)),children:"IOLTA / Trust"})]}),e.jsxs("div",{className:"flex gap-2 pr-2",children:[e.jsx(g,{variant:"outline",size:"sm",icon:F,children:"Export CSV"}),e.jsx(g,{variant:"primary",size:"sm",icon:M,children:"Record Transaction"})]})]}),s==="operating"?e.jsx(B,{expenses:x}):e.jsx(S,{trustAccounts:m})]})};export{_ as FinancialCenter};
