import{r as m,j as t,cx as y,cy as N,k as g,bg as j}from"./vendor-core-V-oW58GW.js";import{u as v}from"./ThemeContext-OPG61qw5.js";import{c as a}from"./useQueryHooks-Oyt-TMLP.js";import{D as w}from"./dataService-BWLMkXM4.js";import{a as R}from"./SyncContext-B5_p5hCg.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const C=e=>e.map(s=>({...s,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5})),E=(e,s,i)=>{e.forEach(r=>{r.x+=r.vx,r.y+=r.vy,(r.x<20||r.x>s-20)&&(r.vx*=-1),(r.y<20||r.y>i-20)&&(r.vy*=-1)})},k=(e,s,i,r=5)=>e.find(d=>{const l=d.x-s,n=d.y-i;return Math.sqrt(l*l+n*n)<d.radius+r}),M=(e,s,i=300)=>{e.lineWidth=1,s.forEach((r,d)=>{s.slice(d+1).forEach(l=>{const n=Math.hypot(r.x-l.x,r.y-l.y);n<i&&(e.beginPath(),e.moveTo(r.x,r.y),e.lineTo(l.x,l.y),e.strokeStyle=`rgba(148, 163, 184, ${1-n/i})`,e.stroke())})})},S=e=>e==="federal"?"#3b82f6":"#10b981",P=(e,s)=>{e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.fillStyle=S(s.type),e.fill(),e.lineWidth=2,e.strokeStyle="#fff",e.stroke(),e.fillStyle="#475569",e.font="10px Inter",e.fillText(s.label,s.x+12,s.y+3)},z=(e,s)=>{s.forEach(i=>P(e,i))},F=e=>{e.parentElement&&(e.width=e.parentElement.clientWidth||800,e.height=e.parentElement.clientHeight||500)},I=(e,s,i)=>{e.clearRect(0,0,s.width,s.height),E(i,s.width,s.height),M(e,i),z(e,i)},H=()=>{const{theme:e}=v(),{openWindow:s}=R(),i=m.useRef(null),[r,d]=m.useState(!0),l=m.useRef([]),n=m.useRef(0);m.useEffect(()=>{(async()=>{const c=await w.jurisdiction.getMapNodes();c.length>0&&(l.current=C(c))})()},[]);const x=o=>{const c=i.current;if(!c)return;const f=c.getBoundingClientRect(),u=o.clientX-f.left,p=o.clientY-f.top,h=k(l.current,u,p);if(h){const b=`geo-${h.label}`;s(b,`Jurisdiction: ${h.label}`,t.jsxs("div",{className:a("p-6",e.text.primary),children:[t.jsx("h3",{className:"text-xl font-bold mb-2",children:h.label}),t.jsxs("p",{className:a("text-sm",e.text.secondary),children:["Type: ",h.type==="federal"?"Federal Circuit":"State Court"]}),t.jsxs("div",{className:a("mt-4 p-4 rounded border",e.surface.highlight,e.border.default),children:[t.jsx("h4",{className:"font-bold text-sm mb-2",children:"Local Rules"}),t.jsx("p",{className:"text-xs",children:"L.R. 7-1 applies to all civil motions."})]})]}))}};return m.useEffect(()=>{const o=i.current;if(!o)return;const c=o.getContext("2d");if(!c)return;const f=()=>{o&&(I(c,o,l.current),r&&(n.current=requestAnimationFrame(f)))},u=()=>F(o);return window.addEventListener("resize",u),u(),f(),()=>{window.removeEventListener("resize",u),n.current&&cancelAnimationFrame(n.current)}},[r]),t.jsxs("div",{className:a("h-full flex flex-col rounded-lg shadow-sm border overflow-hidden min-h-[500px]",e.surface.default,e.border.default),children:[t.jsxs("div",{className:a("p-4 border-b flex justify-between items-center",e.border.default),children:[t.jsxs("h3",{className:a("font-bold flex items-center",e.text.primary),children:[t.jsx(y,{className:a("h-5 w-5 mr-2",e.primary.text)})," Jurisdiction Map"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsxs("span",{className:a("flex items-center",e.text.secondary),children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 mr-1"})," Federal"]}),t.jsxs("span",{className:a("flex items-center",e.text.secondary),children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 mr-1"})," State"]})]}),t.jsx("button",{onClick:()=>d(!r),className:a("p-1.5 rounded hover:bg-slate-100",e.text.secondary),title:r?"Pause Simulation":"Resume",children:r?t.jsx(N,{className:"h-4 w-4"}):t.jsx(g,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:a("flex-1 relative bg-slate-50/50"),children:[t.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full block cursor-pointer",onClick:x}),t.jsxs("div",{className:a("absolute bottom-4 left-4 p-3 backdrop-blur rounded-lg border shadow-sm text-xs pointer-events-none bg-opacity-90",e.surface.default,e.border.default),children:[t.jsxs("div",{className:a("flex items-center gap-2 mb-1",e.text.secondary),children:[t.jsx(j,{className:"h-3 w-3"}),t.jsxs("span",{children:["Active Nodes: ",l.current.length]})]}),t.jsx("div",{className:a("text-[10px]",e.text.tertiary),children:"Rendering via Canvas API (60FPS)"})]})]})]})};export{H as JurisdictionGeoMap};
