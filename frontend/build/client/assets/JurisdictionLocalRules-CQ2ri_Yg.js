import{r as d,j as e,al as E,aE as F,bA as L,a7 as P}from"./vendor-core-V-oW58GW.js";import{T as k,a as B,b as n,c as M,d as y,e as i}from"./Table-C_bcd1kC.js";import{B as p}from"./Button-CDQlLg6j.js";import{M as I}from"./Modal-Rns91qFF.js";import{I as f}from"./Input-Dmln04Yk.js";import{T as O}from"./TextArea-DrtcCAyn.js";import{h as $}from"./case-detail-q84K17Pa.js";import{D as q}from"./dataService-BWLMkXM4.js";import{C as H}from"./ConfirmDialog--jvbqDAw.js";import{B as J}from"./Badge-bF-hTHJZ.js";import{u as K}from"./ThemeContext-OPG61qw5.js";import{u as Q,d as v,c as r}from"./useQueryHooks-Oyt-TMLP.js";import"./SyncContext-B5_p5hCg.js";import{u as g}from"./useModalState-Cst_3NmK.js";import{a as z}from"./filterHelpers-Bh0_NiHX.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./schemas-B2_dy3tf.js";import"./VirtualList-r2WXvtCD.js";import"./AppShell-Cug-APl3.js";import"./preload-helper-BXl3LOEh.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./formatters-stMuSkc6.js";import"./EmptyState-7A4cJUVU.js";import"./useNotify-DdRjm5G5.js";import"./Card-CDOiP5UM.js";import"./MetricCard-BH_9X7pi.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-D_292xEY.js";import"./ErrorState-WL3az5ve.js";import"./Kanban-BI78PbzY.js";import"./dateUtils-rLIRMrtk.js";import"./FilterPanel-BteidCPx.js";import"./AdaptiveLoader-D5wOoiN1.js";import"./type-mappings-DEPYyX4d.js";import"./UserAvatar-BPVf-Spq.js";import"./Tabs-7xONCRTX.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const Oe=()=>{const{theme:s}=K(),[u,R]=d.useState(""),o=g(),m=g(),[a,l]=d.useState({}),[x,h]=d.useState(null),c=q.rules,{data:C=[]}=Q(["rules","all"],c.getAll),{mutate:b}=v(async t=>t.id?c.update(t.id,t):c.add({id:"",code:t.code,name:t.name,type:t.type||"Local",summary:t.summary||""}),{invalidateKeys:[["rules","all"]],onSuccess:()=>{o.close(),l({})}}),{mutate:N}=v(c.delete,{invalidateKeys:[["rules","all"]]}),T=()=>{!a.code||!a.name||b(a)},S=t=>{h(t),m.open()},w=()=>{x&&(N(x),h(null))},A=()=>{l({type:"Local"}),o.open()},D=t=>{l(t),o.open()},j=z(C,u);return e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{value:u,onChange:R,placeholder:"Search rules (Code, Name, Type)...",actions:e.jsx(p,{variant:"primary",icon:E,onClick:A,children:"Add Rule"})}),e.jsxs(k,{children:[e.jsxs(B,{children:[e.jsx(n,{children:"Rule Code"}),e.jsx(n,{children:"Type"}),e.jsx(n,{children:"Title / Description"}),e.jsx(n,{children:"Summary"}),e.jsx(n,{className:"text-right",children:"Actions"})]}),e.jsxs(M,{children:[j.map(t=>e.jsxs(y,{children:[e.jsx(i,{className:r("font-bold whitespace-nowrap",s.text.primary),children:t.code}),e.jsx(i,{children:e.jsx(J,{variant:t.type==="FRCP"?"neutral":t.type==="Local"?"info":"warning",children:t.type})}),e.jsx(i,{className:s.primary.text,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:r("h-4 w-4 mr-2",s.text.tertiary)}),t.name]})}),e.jsx(i,{className:r("text-xs max-w-sm truncate",s.text.secondary),title:t.summary,children:t.summary}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{title:"Edit rule",onClick:()=>D(t),className:r("p-1.5 rounded transition-colors",s.text.secondary,`hover:${s.primary.text}`,`hover:${s.surface.highlight}`),children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx("button",{title:"Delete rule",onClick:()=>S(t.id),className:r("p-1.5 rounded transition-colors",s.text.secondary,`hover:${s.status.error.text}`,`hover:${s.status.error.bg}`),children:e.jsx(P,{className:"h-4 w-4"})})]})})]},t.id)),j.length===0&&e.jsx(y,{children:e.jsx(i,{colSpan:5,className:r("text-center py-8",s.text.tertiary),children:"No rules match your search."})})]})]}),e.jsx(I,{isOpen:o.isOpen,onClose:o.close,title:a.id?"Edit Rule":"Add New Rule",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(f,{label:"Rule Code",placeholder:"e.g. L.R. 7-3",value:a.code||"",onChange:t=>l({...a,code:t.target.value})}),e.jsxs("div",{children:[e.jsx("label",{className:r("block text-xs font-semibold uppercase mb-1.5",s.text.secondary),children:"Jurisdiction Type"}),e.jsxs("select",{title:"Select jurisdiction type",className:r("w-full px-3 py-2 border rounded-md text-sm",s.surface.default,s.border.default,s.text.primary),value:a.type||"Local",onChange:t=>l({...a,type:t.target.value}),children:[e.jsx("option",{value:"FRCP",children:"Federal (FRCP)"}),e.jsx("option",{value:"FRAP",children:"Appellate (FRAP)"}),e.jsx("option",{value:"FRE",children:"Evidence (FRE)"}),e.jsx("option",{value:"Local",children:"Local Court Rule"}),e.jsx("option",{value:"State",children:"State Code"})]})]})]}),e.jsx(f,{label:"Rule Name / Title",placeholder:"e.g. Conference of the Parties",value:a.name||"",onChange:t=>l({...a,name:t.target.value})}),e.jsx(O,{label:"Summary / Requirements",rows:4,placeholder:"Brief summary of the rule's requirement...",value:a.summary||"",onChange:t=>l({...a,summary:t.target.value})}),e.jsxs("div",{className:r("flex justify-end gap-2 pt-4 border-t mt-4",s.border.default),children:[e.jsx(p,{variant:"secondary",onClick:o.close,children:"Cancel"}),e.jsx(p,{variant:"primary",onClick:T,children:"Save Rule"})]})]})}),e.jsx(H,{isOpen:m.isOpen,onClose:m.close,onConfirm:w,title:"Delete Rule",message:"Are you sure you want to delete this rule definition? This action cannot be undone.",confirmText:"Delete Rule",variant:"danger"})]})};export{Oe as JurisdictionLocalRules};
