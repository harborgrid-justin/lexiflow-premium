import{j as e,p as f,al as v,b4 as y,cd as N,aa as b}from"./vendor-core-V-oW58GW.js";import{B as l}from"./Button-PaGqeZoR.js";import{B as m}from"./Badge-B08w10nz.js";import{T as w,a as k,b as o,c as A,d as C,e as d}from"./Table-C8OsWLsz.js";import{A as D}from"./AdaptiveLoader-gvY3s3Bs.js";import{u as H}from"./ThemeContext-OPG61qw5.js";import{u as E,d as L,q as p,c as i}from"./useQueryHooks-BdeOvP9e.js";import{u as T}from"./useNotify-Bhb3OIEg.js";import{g as S}from"./case-detail-CN_DMmR8.js";import{D as h}from"./dataService-75QCl8KS.js";import{d as t}from"./queryKeys-Dex4MaB7.js";import{L as u}from"./type-mappings-DEPYyX4d.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./SyncContext-DYD5yPAv.js";import"./schemas-B2_dy3tf.js";import"./VirtualList-B1zORm91.js";import"./AppShell-Z1zGEOCG.js";import"./preload-helper-BXl3LOEh.js";import"./tabs.config-F85gN5xx.js";import"./PageHeader-os9pD5mt.js";import"./formatters-stMuSkc6.js";import"./EmptyState-BwtZeBY5.js";import"./dateUtils-rLIRMrtk.js";import"./Card-D56KNEnI.js";import"./MetricCard-CDV5joW_.js";import"./queryKeys-BBVgMz36.js";import"./useSessionStorage-HC9RvMcM.js";import"./ErrorState-BA0dmAVI.js";import"./ConfirmDialog-CTAXMvML.js";import"./Modal-BlJFylOy.js";import"./Kanban-BbECSZhC.js";import"./FilterPanel-C0WYx6xs.js";import"./UserAvatar-lVqVFNPb.js";import"./Tabs-BTz8yyZK.js";import"./Input-JNgj1Ekc.js";import"./TextArea-BMpffac7.js";import"./geminiService-DjDdWyh4.js";import"./TaskCreationModal-B2VECu1_.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";const Ae=()=>{const{theme:a}=H(),n=T(),{data:x=[],isLoading:g}=E(t.discovery.holds.all,h.discovery.getLegalHolds),{mutate:j}=L(async s=>h.discovery.acknowledgeHold(s),{onMutate:async s=>{await p.cancelQueries(t.discovery.holds.all);const c=p.getQueryState(t.discovery.holds.all)?.data;return c&&p.setQueryData(t.discovery.holds.all,c.map(r=>r.id===s?{...r,status:u.ACKNOWLEDGED}:r)),{previousHolds:c}},onError:(s,c,r)=>{r?.previousHolds&&p.setQueryData(t.discovery.holds.all,r.previousHolds),n.error("Failed to acknowledge legal hold. Please try again.")},onSuccess:()=>{n.success("Legal hold acknowledged successfully")},invalidateKeys:[t.discovery.holds.all,t.discovery.holds.byStatus(u.ACKNOWLEDGED)]});return S({"mod+h":()=>{n.info("New legal hold form (to be implemented)")},"mod+a":()=>{n.info("Viewing all legal holds")}}),g?e.jsx(D,{contentType:"table",itemCount:8,shimmer:!0}):e.jsxs("div",{className:"animate-fade-in space-y-4",children:[e.jsxs("div",{className:i("border p-4 rounded-lg mb-4 flex gap-3",a.status.warning.bg,a.status.warning.border),children:[e.jsx(f,{className:i("h-6 w-6 shrink-0",a.status.warning.text)}),e.jsxs("div",{children:[e.jsx("h4",{className:i("font-bold text-sm",a.status.warning.text),children:"Spoliation Warning"}),e.jsx("p",{className:i("text-xs mt-1",a.status.warning.text),children:"Ensure all custodians are notified. Failure to preserve evidence may result in adverse inference sanctions (FRCP 37(e))."})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:i("font-bold",a.text.primary),children:"Active Custodians"}),e.jsx(l,{variant:"primary",icon:v,children:"Issue New Hold"})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs(w,{responsive:"card",children:[e.jsxs(k,{children:[e.jsx(o,{children:"Custodian"}),e.jsx(o,{children:"Department"}),e.jsx(o,{children:"Date Issued"}),e.jsx(o,{children:"Status"}),e.jsx(o,{className:"text-right",children:"Actions"})]}),e.jsx(A,{children:x.map(s=>e.jsxs(C,{children:[e.jsx(d,{className:i("font-medium",a.text.primary),children:s.custodian}),e.jsx(d,{children:s.dept}),e.jsx(d,{children:s.issued}),e.jsx(d,{children:s.status==="Acknowledged"?e.jsx(m,{variant:"success",children:"Acknowledged"}):e.jsx(m,{variant:"warning",children:"Pending Ack"})}),e.jsx(d,{className:"text-right",children:s.status===u.PENDING?e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>j(s.id),children:"Acknowledge"}):e.jsx(l,{variant:"ghost",size:"sm",children:"Remind"})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden space-y-4",children:x.map(s=>e.jsxs("div",{className:i("p-4 rounded-lg shadow-sm border",a.surface.default,a.border.default),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:i("font-bold",a.text.primary),children:s.custodian})]}),s.status==="Acknowledged"?e.jsx(m,{variant:"success",children:"Ack"}):e.jsx(m,{variant:"warning",children:"Pending"})]}),e.jsxs("div",{className:i("grid grid-cols-2 gap-4 text-xs mb-4",a.text.secondary),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:i("h-3 w-3",a.text.tertiary)}),s.dept]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:i("h-3 w-3",a.text.tertiary)}),"Issued: ",s.issued]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",className:"flex-1",children:"View Notice"}),s.status==="Pending"&&e.jsx(l,{size:"sm",variant:"ghost",className:"flex-1 text-blue-600",children:"Resend"})]})]},s.id))})]})};export{Ae as LegalHolds,Ae as default};
