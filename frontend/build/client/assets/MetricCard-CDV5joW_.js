import{l as y,r as j,j as e,t as E,bO as L}from"./vendor-core-V-oW58GW.js";import{u as S}from"./ThemeContext-OPG61qw5.js";import{c as a}from"./useQueryHooks-BdeOvP9e.js";const q=y.memo(({label:N,value:r,icon:b,trend:w,trendUp:u,className:v="",isLive:M=!1,sparklineData:s})=>{const{theme:o}=S(),n=y.useMemo(()=>r==null||typeof r=="number"&&isNaN(r)?0:r,[r]),[i,V]=j.useState(()=>typeof n=="number"?0:""),R=j.useRef(n);j.useEffect(()=>{if(typeof n=="number"){const t=typeof i=="number"?i:0,l=n;if(t===l)return;const f=l-t,c=800,x=performance.now(),m=h=>{const p=h-x,d=Math.min(p/c,1),g=1-Math.pow(1-d,3),$=Math.round(t+f*g);V($),d<1&&requestAnimationFrame(m)};requestAnimationFrame(m)}else R.current=n},[n,i]);const T=()=>{if(!s||s.length<2)return null;const t=40,l=100,f=Math.max(...s),c=Math.min(...s),x=f-c||1,m=s.map((h,p)=>{const d=p/(s.length-1)*l,g=t-(h-c)/x*t;return`${d},${g}`}).join(" ");return e.jsx("svg",{width:"100%",height:t,viewBox:`0 0 ${l} ${t}`,className:"overflow-visible opacity-50",children:e.jsx("polyline",{points:m,fill:"none",stroke:u?"#10b981":"#f43f5e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};return e.jsxs("div",{className:a(o.surface.default,o.border.default,"rounded-xl border p-5 shadow-sm transition-all hover:shadow-md flex flex-col justify-between h-full relative overflow-hidden",v),children:[M&&e.jsxs("span",{className:"absolute top-3 right-3 flex h-2.5 w-2.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"})]}),e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:a("text-[10px] font-bold uppercase tracking-wider mb-1.5",o.text.secondary),children:N}),e.jsx("div",{className:a("text-2xl font-bold tracking-tight",o.text.primary),children:typeof i=="number"?i.toLocaleString():i||"0"})]}),b&&e.jsx("div",{className:a("p-2.5 rounded-lg bg-opacity-10",o.surface.highlight),children:e.jsx(b,{className:a("h-5 w-5",o.text.secondary)})})]}),s?e.jsx("div",{className:"h-10 mt-2",children:T()}):w&&e.jsxs("div",{className:a("mt-4 text-xs font-medium flex items-center",u?"text-emerald-600":"text-rose-600"),children:[u?e.jsx(E,{className:"h-3 w-3 mr-1"}):e.jsx(L,{className:"h-3 w-3 mr-1"}),w]})]})});q.displayName="MetricCard";export{q as M};
