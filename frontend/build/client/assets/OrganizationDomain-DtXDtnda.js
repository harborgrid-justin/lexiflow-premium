import{d as a,g as i,S as o}from"./dataService-BWLMkXM4.js";import"./preload-helper-BXl3LOEh.js";import"./useQueryHooks-Oyt-TMLP.js";import"./vendor-core-V-oW58GW.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./type-mappings-DEPYyX4d.js";const u={getAll:async()=>await a.getAll(o.ORGS),getById:async t=>await a.get(o.ORGS,t)||null,add:async t=>{const e={...t&&typeof t=="object"?t:{},createdAt:new Date().toISOString()};return await a.put(o.ORGS,e),e},update:async(t,e)=>{const r=await a.get(o.ORGS,t),n={...r&&typeof r=="object"?r:{},...e&&typeof e=="object"?e:{}};return await a.put(o.ORGS,n),n},delete:async t=>(await a.delete(o.ORGS,t),!0),getOrganizations:async t=>{let e=await a.getAll(o.ORGS);return t?.type&&(e=e.filter(r=>r.type===t.type)),e},getDepartments:async t=>(await i(50),(await a.getAll("departments")).filter(r=>r.orgId===t)),getMembers:async(t,e)=>{await i(50);let r=await a.getAll("org_members");return r=r.filter(n=>n.orgId===t),e&&(r=r.filter(n=>n.departmentId===e)),r},updateSettings:async(t,e)=>{await i(100);const r=await a.get(o.ORGS,t);if(!r)throw new Error("Organization not found");const n={...r.settings||{},...e};return await a.put(o.ORGS,{...r,settings:n}),n},createDepartment:async t=>{const e={id:`dept-${Date.now()}`,orgId:t.orgId||"",name:t.name||"New Department",parentId:t.parentId,managerId:t.managerId,description:t.description,memberCount:0};return await a.put("departments",e),e},addMember:async t=>{const e={id:`member-${Date.now()}`,orgId:t.orgId||"",userId:t.userId||"",departmentId:t.departmentId,role:t.role||"member",title:t.title,joinedAt:new Date().toISOString()};return await a.put("org_members",e),e}};export{u as OrganizationService};
