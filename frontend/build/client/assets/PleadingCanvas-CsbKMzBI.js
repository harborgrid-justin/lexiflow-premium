import{r as l,j as t,bp as f}from"./vendor-core-V-oW58GW.js";import{c as j}from"./useQueryHooks-BdeOvP9e.js";import{s as g}from"./sanitize-k_Tw3ej1.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";const E=({document:r,rules:d,readOnly:a,viewMode:p,onUpdateSection:c,relatedCase:i})=>{const u=l.useMemo(()=>[...r.sections].sort((e,n)=>e.order-n.order),[r.sections]),b=l.useMemo(()=>i?.parties?.filter(e=>e.role.includes("Plaintiff")||e.role.includes("Appellant")).map(e=>e.name).join(", ")||"PLAINTIFF NAME",[i?.parties]),m=l.useMemo(()=>i?.parties?.filter(e=>e.role.includes("Defendant")||e.role.includes("Appellee")).map(e=>e.name).join(", ")||"DEFENDANT NAME",[i?.parties]),s=l.useCallback(e=>n=>{const o=n.currentTarget.innerHTML;c(e,{content:o})},[c]),x=l.useCallback(e=>{const n=p==="logic",o=(e.linkedEvidenceIds?.length||0)>0||!!e.linkedArgumentId;return t.jsxs("div",{id:`block-${e.id}`,className:j("group relative mb-4 transition-all duration-300",n&&"hover:ring-2 hover:ring-purple-400 rounded-lg p-2 -mx-2 bg-slate-50/50 cursor-pointer",n&&o&&"ring-1 ring-purple-200 bg-purple-50/30"),role:"article","aria-label":`Section: ${e.type}`,children:[!a&&!n&&t.jsx("div",{className:"absolute -left-10 top-0 opacity-0 group-hover:opacity-100 flex flex-col gap-1 transition-opacity",children:t.jsx("button",{className:"p-1.5 text-slate-400 hover:text-blue-600 bg-white shadow rounded-md cursor-grab active:cursor-grabbing","aria-label":"Drag to reorder section",title:"Drag to reorder",children:t.jsx(f,{className:"h-4 w-4"})})}),n&&t.jsx("div",{className:"absolute -right-3 top-1/2 -translate-y-1/2 w-2 h-2 bg-purple-400 rounded-full",id:`node-${e.id}`,"aria-hidden":"true"}),e.type==="Caption"?t.jsxs("div",{className:"border-2 border-black p-4 grid grid-cols-2 mb-8",style:{fontFamily:d.fontFamily},role:"region","aria-label":"Case caption",children:[t.jsxs("div",{className:"border-r-2 border-black pr-4",children:[b,t.jsx("br",{}),"Plaintiff,",t.jsx("br",{}),t.jsx("br",{}),"v.",t.jsx("br",{}),t.jsx("br",{}),m,t.jsx("br",{}),"Defendant."]}),t.jsxs("div",{className:"pl-4 flex flex-col justify-center",children:["Case No. ",r.filingStatus==="Pre-Filing"?"____________________":r.caseId,t.jsx("br",{}),t.jsx("span",{className:"font-bold uppercase mt-2",children:r.title}),t.jsx("br",{}),r.filingStatus==="Pre-Filing"?"JURY TRIAL DEMANDED":`Judge: ${i?.judge||"Unassigned"}`]})]}):e.type==="Heading"?t.jsx("div",{className:"text-center font-bold uppercase underline mb-4 mt-6 outline-none",style:{textAlign:e.meta?.alignment},contentEditable:!a,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:g(e.content)},onBlur:s(e.id),role:"textbox","aria-label":"Heading","aria-readonly":a,tabIndex:a?-1:0}):t.jsx("div",{className:"text-justify outline-none min-h-[1em] empty:before:content-['Type...'] empty:before:text-slate-300",style:{textAlign:e.meta?.alignment,fontWeight:e.meta?.isBold?"bold":"normal",paddingLeft:`${(e.meta?.indent||0)*.5}in`},contentEditable:!a,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:g(e.content)},onBlur:s(e.id),role:"textbox","aria-label":`Paragraph section ${e.order+1}`,"aria-readonly":a,tabIndex:a?-1:0})]},e.id)},[p,d.fontFamily,r.filingStatus,r.caseId,r.title,b,m,i?.judge,a,s]);return t.jsx("div",{className:"pb-20",role:"main","aria-label":"Document editor",children:u.map(x)})};export{E as default};
