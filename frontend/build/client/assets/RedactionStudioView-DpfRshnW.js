import{r as c,l as u,j as e,ab as x,aW as h}from"./vendor-core-V-oW58GW.js";import{d as j,P as v,f as y,D as g}from"./case-detail-q84K17Pa.js";import{E as b}from"./ErrorState-WL3az5ve.js";import{u as w,c as o}from"./useQueryHooks-Oyt-TMLP.js";import{u as N}from"./ThemeContext-OPG61qw5.js";import{D,B as S}from"./dataService-BWLMkXM4.js";import{q as E}from"./queryKeys-BBVgMz36.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./Button-CDQlLg6j.js";import"./Badge-bF-hTHJZ.js";import"./schemas-B2_dy3tf.js";import"./SyncContext-B5_p5hCg.js";import"./VirtualList-r2WXvtCD.js";import"./AppShell-Cug-APl3.js";import"./preload-helper-BXl3LOEh.js";import"./tabs.config-D59pmwVC.js";import"./PageHeader-C4TFe3Td.js";import"./formatters-stMuSkc6.js";import"./Table-C_bcd1kC.js";import"./EmptyState-7A4cJUVU.js";import"./useNotify-DdRjm5G5.js";import"./Card-CDOiP5UM.js";import"./MetricCard-BH_9X7pi.js";import"./useSessionStorage-D_292xEY.js";import"./ConfirmDialog--jvbqDAw.js";import"./Modal-Rns91qFF.js";import"./Kanban-BI78PbzY.js";import"./dateUtils-rLIRMrtk.js";import"./FilterPanel-BteidCPx.js";import"./AdaptiveLoader-D5wOoiN1.js";import"./type-mappings-DEPYyX4d.js";import"./UserAvatar-BPVf-Spq.js";import"./Tabs-7xONCRTX.js";import"./Input-Dmln04Yk.js";import"./TextArea-DrtcCAyn.js";import"./geminiService-_CYFbtO8.js";import"./TaskCreationModal-D5xiqN6m.js";import"./search.config-B6mvIgDA.js";import"./useToggle-CjLp2PQ4.js";import"./sanitize-k_Tw3ej1.js";import"./useModalState-Cst_3NmK.js";import"./scheduler-BERajRBE.js";import"./RouteErrorBoundary-Nha8Il06.js";import"./meta-utils-lVs9HXG9.js";function ve(){const{theme:r}=N(),t=j(null,(i,m)=>i.id===m.id),[s,n]=c.useState(null),{data:a=[],isLoading:d,error:p,refetch:f}=w(E.documents.all(),()=>D.documents.getAll()),l=u.useMemo(()=>Array.isArray(a)?a.filter(i=>i.type.toUpperCase().includes("PDF")||i.title.toLowerCase().endsWith(".pdf")):[],[a]);return c.useEffect(()=>{l.length>0&&!t.selected&&t.select(l[0])},[l,t.selected,t]),c.useEffect(()=>(t.selected&&(async()=>{if(t.selected){const m=await g.getDocumentUrl(t.selected.id);n(m)}})(),()=>{s&&S.revoke(s)}),[t.selected,s]),p?e.jsx(b,{message:"Failed to load documents",onRetry:f}):e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:o("w-72 border-r flex flex-col shrink-0",r.border.default,r.surface.highlight),children:[e.jsx("div",{className:o("p-4 border-b font-bold",r.text.primary),children:"Documents to Redact"}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:d?e.jsx(x,{className:"animate-spin m-4"}):l.map(i=>e.jsx("button",{onClick:()=>t.select(i),className:o("w-full text-left p-3 border-b text-sm transition-colors",r.border.default,t.selected?.id===i.id?o(r.primary.light,r.primary.text):`hover:${r.surface.default}`),children:e.jsx("div",{className:"font-medium truncate",children:i.title})},i.id))})]}),e.jsx("div",{className:o("flex-1 flex",r.surface.default),children:t.selected?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o("flex-1 relative overflow-auto",r.surface.highlight),children:e.jsx(v,{url:s})}),e.jsx(y,{content:t.selected.content,onApplyRedactions:()=>alert("Redacted!")})]}):e.jsxs("div",{className:o("flex-1 flex flex-col items-center justify-center",r.text.tertiary),children:[e.jsx(h,{className:"h-12 w-12 mb-4 opacity-50"}),"Select a document to begin PII scan."]})})]})}export{ve as RedactionStudioView};
