import{r as f,j as e,F as g,bn as x,v as N,q as b,a_ as y}from"./vendor-core-V-oW58GW.js";import{T as v,a as T,b as i,c as C,d as m,e as n}from"./Table-C_bcd1kC.js";import{B as o}from"./Button-CDQlLg6j.js";import{u as w}from"./ThemeContext-OPG61qw5.js";import{u as F,d as D,c as t}from"./useQueryHooks-Oyt-TMLP.js";import{D as p}from"./dataService-BWLMkXM4.js";import"./SyncContext-B5_p5hCg.js";import{u as S}from"./useModalState-Cst_3NmK.js";import{M as I}from"./Modal-Rns91qFF.js";import{I as h}from"./Input-Dmln04Yk.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const Q=()=>{const{theme:r}=w(),l=S(),[a,c]=f.useState({}),{data:d=[]}=F(["transcripts","all"],()=>p.discovery.getTranscripts()),{mutate:j}=D(p.discovery.addTranscript,{invalidateKeys:[["transcripts","all"]],onSuccess:()=>{l.close(),c({})}}),u=()=>{if(!a.deponent)return;const s=`tran-${Date.now()}`;j({id:s,caseId:"General",deponent:a.deponent,date:a.date||"",isFinal:a.isFinal||!1,wordCount:0})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:t("flex justify-between items-center p-4 rounded-lg border shadow-sm",r.surface.default,r.border.default),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:t("font-bold flex items-center",r.text.primary),children:[e.jsx(g,{className:"h-5 w-5 mr-2 text-slate-600"})," Transcript Manager (Rule 32)"]}),e.jsx("p",{className:t("text-sm",r.text.secondary),children:"Deposition indexing, full-text search, and video syncing."})]}),e.jsx(o,{variant:"primary",icon:x,onClick:l.open,children:"Import Transcript"})]}),e.jsxs(v,{children:[e.jsxs(T,{children:[e.jsx(i,{children:"Deponent"}),e.jsx(i,{children:"Date"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Pages/Words"}),e.jsx(i,{className:"text-right",children:"Actions"})]}),e.jsxs(C,{children:[d.map(s=>e.jsxs(m,{children:[e.jsx(n,{className:t("font-bold",r.text.primary),children:s.deponent}),e.jsx(n,{children:s.date}),e.jsx(n,{children:e.jsxs("span",{className:t("flex items-center text-xs font-medium",s.isFinal?"text-green-600":"text-amber-600"),children:[s.isFinal?e.jsx(N,{className:"h-3 w-3 mr-1"}):e.jsx(b,{className:"h-3 w-3 mr-1"}),s.isFinal?"Final":"Draft"]})}),e.jsx(n,{className:t("text-xs font-mono",r.text.tertiary),children:s.wordCount>0?`${(s.wordCount/250).toFixed(0)} pgs`:"Processing"}),e.jsx(n,{className:"text-right",children:e.jsx(o,{size:"sm",variant:"ghost",icon:y,children:"Search Text"})})]},s.id)),d.length===0&&e.jsx(m,{children:e.jsx(n,{colSpan:5,className:t("text-center py-8 italic",r.text.tertiary),children:"No transcripts uploaded."})})]})]}),e.jsx(I,{isOpen:l.isOpen,onClose:l.close,title:"Import Transcript",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(h,{label:"Deponent Name",value:a.deponent||"",onChange:s=>c({...a,deponent:s.target.value})}),e.jsx(h,{type:"date",label:"Deposition Date",value:a.date||"",onChange:s=>c({...a,date:s.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"final",className:"rounded text-blue-600",checked:a.isFinal||!1,onChange:s=>c({...a,isFinal:s.target.checked})}),e.jsx("label",{htmlFor:"final",className:t("text-sm",r.text.primary),children:"Is Final Certified Copy?"})]}),e.jsxs("div",{className:t("border-2 border-dashed rounded-lg p-8 text-center mt-4",r.border.default),children:[e.jsx(x,{className:t("h-8 w-8 mx-auto mb-2 text-slate-400")}),e.jsx("p",{className:"text-xs text-slate-500",children:"Drag .txt, .pdf, or .ptx file here"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(o,{variant:"primary",onClick:u,children:"Start Import"})})]})})]})};export{Q as TranscriptManager,Q as default};
