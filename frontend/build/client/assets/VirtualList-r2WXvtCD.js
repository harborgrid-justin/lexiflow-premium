import{r as i,j as l}from"./vendor-core-V-oW58GW.js";import{u as L}from"./ThemeContext-OPG61qw5.js";import{c as p}from"./useQueryHooks-Oyt-TMLP.js";const g=({items:w,height:n,itemHeight:r,renderItem:I,className:u,emptyMessage:T="No items found",footer:a,getItemKey:x},R)=>{const{theme:m}=L(),s=i.useRef(null),[S,V]=i.useState(0),[v,y]=i.useState(0),M=i.useDeferredValue(w);i.useImperativeHandle(R,()=>({scrollToIndex:e=>{s.current&&(s.current.scrollTop=e*r)}}),[r]),i.useEffect(()=>{if(!s.current)return;const e=new ResizeObserver(t=>{requestAnimationFrame(()=>{for(const o of t)if(o.contentRect){const j=o.contentRect.height;j>0&&y(j)}})});return e.observe(s.current),setTimeout(()=>{if(s.current){const t=s.current.clientHeight;t>0&&y(t)}},0),()=>e.disconnect()},[]);const c=M||[],f=c.length*r;if(!r||r<=0||!Number.isFinite(r))return console.error("[VirtualList] Invalid itemHeight:",r),l.jsx("div",{ref:s,className:p("flex items-center justify-center text-sm h-full overflow-hidden",u,m.text.tertiary),style:{height:typeof n=="number"?`${n}px`:n},children:"Error: Invalid item height"});const h=5,d=Math.max(0,Math.floor(S/r)-h),N=v>0?v:2e3,$=Math.ceil(N/r)+2*h,b=Math.min(c.length,d+$),C=i.useMemo(()=>{const e=[];for(let t=d;t<b;t++)e.push({index:t,data:c[t],top:t*r});return e},[c,d,b,r]),E=e=>{const t=e.currentTarget.scrollTop;requestAnimationFrame(()=>{V(t)})},F=(e,t)=>{if(x)return x(e);if(e&&typeof e=="object"&&"id"in e){const o=e.id;if(typeof o=="string"||typeof o=="number")return o}return t};return c.length===0&&!a?l.jsx("div",{ref:s,className:p("flex items-center justify-center text-sm h-full overflow-hidden",u,m.text.tertiary),style:{height:typeof n=="number"?`${n}px`:n},children:T}):l.jsx("div",{ref:s,className:p("overflow-y-auto relative custom-scrollbar will-change-scroll scroll-smooth",u),style:{height:typeof n=="number"?`${n}px`:n,minHeight:typeof n=="string"?"400px":void 0,contain:"strict"},onScroll:E,children:l.jsxs("div",{style:{height:Number.isFinite(f)?f+(a?60:0):0,position:"relative"},children:[C.map(({index:e,data:t,top:o})=>l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:r,transform:`translate3d(0, ${o}px, 0)`,willChange:"transform",contentVisibility:"auto",containIntrinsicSize:`0px ${r}px`},children:I(t,e)},F(t,e))),a&&l.jsx("div",{style:{position:"absolute",top:f,left:0,width:"100%"},children:a})]})})},D=i.forwardRef(g);export{D as V};
