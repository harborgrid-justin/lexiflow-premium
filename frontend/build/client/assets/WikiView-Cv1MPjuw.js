import{r as n,j as e,a_ as b,ab as v,cf as g,aE as N}from"./vendor-core-V-oW58GW.js";import{u as y,c as a}from"./useQueryHooks-Oyt-TMLP.js";import{D as w}from"./dataService-BWLMkXM4.js";import{u as k}from"./useFilterAndSearch-B2zKLOlA.js";import{u as S}from"./ThemeContext-OPG61qw5.js";import{B as A}from"./Badge-bF-hTHJZ.js";import{A as L}from"./AdaptiveLoader-D5wOoiN1.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";const T=s=>s.replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gim,"").replace(/<iframe\b[^>]*>([\s\S]*?)<\/iframe>/gim,"").replace(/on\w+="[^"]*"/g,""),z=()=>{const{theme:s,mode:o}=S(),[i,d]=n.useState("ca-employment"),[m,x]=n.useTransition(),{data:l=[],isLoading:c}=y(["wiki","all"],w.knowledge.getWikiArticles),{filteredItems:u,searchQuery:f,setSearchQuery:h}=k({items:l,config:{searchFields:["title","category"]}}),p=u,r=l.find(t=>t.id===i),j=t=>{x(()=>{d(t)})};return c?e.jsx(L,{contentType:"document",shimmer:!0,message:"Loading wiki articles..."}):e.jsxs("div",{className:a("flex h-full rounded-lg border overflow-hidden",s.surface.default,s.border.default),children:[e.jsxs("div",{className:a("w-80 border-r flex flex-col shrink-0",s.surface.highlight,s.border.default),children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:a("absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4",s.text.tertiary)}),e.jsx("input",{className:a("w-full pl-8 pr-3 py-1.5 text-sm border rounded-md outline-none",s.surface.default,s.border.default),placeholder:"Search articles...",value:f,onChange:t=>h(t.target.value)})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[c&&e.jsx("div",{className:"p-4 text-center",children:e.jsx(v,{className:"animate-spin"})}),p.map(t=>e.jsxs("button",{onClick:()=>j(t.id),className:a("w-full text-left p-3 rounded-lg flex items-center justify-between transition-colors",i===t.id?"bg-blue-50 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":`hover:${s.surface.default}`),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold truncate",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500",children:t.category})]}),t.isFavorite&&e.jsx(g,{className:"h-4 w-4 text-amber-400 fill-current ml-2 shrink-0"})]},t.id))]})]}),e.jsx("div",{className:a("flex-1 overflow-y-auto p-8 md:p-12",m?"opacity-50":""),children:r?e.jsxs("div",{className:a("prose max-w-none",o==="dark"?"prose-invert":""),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx(A,{variant:"neutral",children:r.category}),e.jsxs("span",{className:a("text-xs",s.text.secondary),children:["Last Updated: ",r.lastUpdated," by ",r.author]})]}),e.jsx("h1",{className:"mb-2",children:r.title}),e.jsx("div",{dangerouslySetInnerHTML:{__html:T(r.content)}})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(N,{className:"h-16 w-16 text-slate-300 mb-4"}),e.jsx("p",{className:a("font-medium",s.text.secondary),children:"Select an article to read"})]})})]})};export{z as WikiView};
