import{r as n,j as e,bd as N,al as b,F as y,by as k}from"./vendor-core-V-oW58GW.js";import{c as l}from"./useQueryHooks-BdeOvP9e.js";import"./dataService-75QCl8KS.js";import{u as C}from"./ThemeContext-OPG61qw5.js";import"./SyncContext-DYD5yPAv.js";import{u as E}from"./useModalState-Cst_3NmK.js";import{B as d}from"./Button-PaGqeZoR.js";import{U as h}from"./UserAvatar-lVqVFNPb.js";import{C as c}from"./Card-D56KNEnI.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./preload-helper-BXl3LOEh.js";import"./type-mappings-DEPYyX4d.js";function W({caseId:z,warRoomData:o,initialWitnessId:r,onClearSelection:x}){const{theme:s}=C(),[u,i]=n.useState(r||null),[f,p]=n.useState(`1. Introduction
2. Background
3. Key Events
   - ...`),j=E(),m=n.useMemo(()=>(o.witnesses||[]).map(t=>({id:t.id,name:t.name,role:t.role,status:"Available",scheduled:"TBD",prep:0,linkedExhibits:[]})),[o]);n.useEffect(()=>{r&&i(r)},[r]);const a=m.find(t=>t.id===u),g=()=>{i(null),x&&x()};return a?e.jsxs("div",{className:"flex flex-col h-full space-y-6 animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:l("flex justify-between items-start p-6 rounded-lg border shadow-sm",s.surface.default,s.border.default),children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:g,title:"Go back to witness list",className:l("p-2 rounded-full transition-colors",s.text.secondary,`hover:${s.surface.highlight}`),children:e.jsx(N,{className:"h-6 w-6"})}),e.jsx(h,{name:a.name,size:"xl"}),e.jsxs("div",{children:[e.jsx("h2",{className:l("text-2xl font-bold",s.text.primary),children:a.name}),e.jsxs("div",{className:l("flex items-center gap-3 mt-1 text-sm",s.text.secondary),children:[e.jsx("span",{className:l("font-medium px-2 py-0.5 rounded border",s.surface.highlight,s.border.default),children:a.role}),e.jsxs("span",{children:["Scheduled: ",a.scheduled]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:l("text-xs font-bold uppercase mb-1",s.text.tertiary),children:"Prep Status"}),e.jsxs("div",{className:l("text-2xl font-bold",s.text.tertiary),children:[a.prep,"%"]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[e.jsx(c,{title:"Examination Outline",className:"flex flex-col h-full",children:e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{className:l("w-full h-full p-4 resize-none outline-none font-serif text-base leading-relaxed border rounded-md",s.surface.default,s.border.default,s.text.primary),value:f,onChange:t=>p(t.target.value),placeholder:"Draft your questions here..."})})}),e.jsx(c,{title:"Witness Bundle (Exhibits)",action:e.jsx(d,{size:"sm",variant:"outline",icon:b,onClick:()=>j.open(),children:"Link Exhibit"}),className:"flex flex-col h-full",children:e.jsx("div",{className:"space-y-3 overflow-y-auto flex-1 pr-2",children:e.jsx("div",{className:l("text-center py-8 italic",s.text.tertiary),children:"No exhibits linked yet."})})})]})]}):e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>e.jsxs(c,{noPadding:!0,className:l("flex flex-col border-l-4 cursor-pointer hover:shadow-md transition-all border-l-slate-300"),children:[e.jsx("div",{className:"p-5 flex justify-between items-start",onClick:()=>i(t.id),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{name:t.name,size:"lg"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:l("font-bold text-lg truncate",s.text.primary),children:t.name}),e.jsx("p",{className:l("text-sm truncate",s.text.secondary),children:t.role})]})]})}),e.jsx("div",{className:"px-5 pb-4 space-y-3",onClick:()=>i(t.id),children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:l("flex justify-between text-xs",s.text.secondary),children:[e.jsx("span",{children:"Prep Completion"}),e.jsxs("span",{className:"font-bold",children:[t.prep,"%"]})]}),e.jsx("div",{className:l("w-full h-1.5 rounded-full",s.surface.highlight),children:e.jsx("div",{className:l("h-1.5 rounded-full transition-all bg-blue-500"),style:{width:`${t.prep}%`}})})]})}),e.jsxs("div",{className:l("p-3 border-t flex gap-2",s.surface.highlight,s.border.default),onClick:v=>v.stopPropagation(),children:[e.jsx(d,{size:"sm",variant:"ghost",className:"flex-1 text-xs",icon:y,onClick:()=>i(t.id),children:"Outline"}),e.jsx(d,{size:"sm",variant:"ghost",className:"flex-1 text-xs",icon:k,onClick:()=>i(t.id),children:"Exhibits"})]})]},t.id))})})}export{W as WitnessPrep};
