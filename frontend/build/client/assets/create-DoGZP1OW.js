import{l as de,j as e,am as ne,a1 as oe,r as d,a7 as V,an as ce,F as me,V as ue,aj as xe,a8 as be,ao as _,p as R,v as ge,X as he,e as pe,f as fe,_ as ke}from"./vendor-core-V-oW58GW.js";import{P as Ne}from"./PageHeader-os9pD5mt.js";import{B as N}from"./Button-PaGqeZoR.js";import{u as Y}from"./ThemeContext-OPG61qw5.js";import{c as m,u as U,d as T,q as h}from"./useQueryHooks-BdeOvP9e.js";import{P as v}from"./paths.config-lqyvjjOK.js";import{u as je}from"./useNotify-Bhb3OIEg.js";import{D as y}from"./dataService-75QCl8KS.js";import{P as q,M as H,a as I}from"./type-mappings-DEPYyX4d.js";import{q as u}from"./queryKeys-BBVgMz36.js";import{R as ve}from"./RouteErrorBoundary-Nha8Il06.js";import{c as ye}from"./meta-utils-lVs9HXG9.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";import"./SyncContext-DYD5yPAv.js";import"./preload-helper-BXl3LOEh.js";const Ce=de.memo(({items:r})=>{const{theme:n}=Y();return e.jsxs("nav",{className:m("flex items-center text-xs mb-4 flex-wrap",n.text.secondary),"aria-label":"Breadcrumb",children:[e.jsx("div",{className:"flex items-center py-1",children:e.jsx(ne,{className:m("h-3 w-3 mr-1",n.text.tertiary)})}),r.map(c=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(oe,{className:m("h-3 w-3 mx-1 shrink-0",n.text.tertiary)}),e.jsx("button",{onClick:c.onClick,disabled:!c.onClick,className:m("transition-colors py-1 px-1 rounded -ml-1",c.onClick?m(`hover:${n.primary.text}`,`hover:${n.surface.highlight}`):m("font-semibold cursor-default",n.text.primary)),children:c.label})]},c.label))]})});var K=(r=>(r.CIVIL="Civil",r.CRIMINAL="Criminal",r.FAMILY="Family",r.BANKRUPTCY="Bankruptcy",r.IMMIGRATION="Immigration",r.INTELLECTUAL_PROPERTY="Intellectual Property",r.CORPORATE="Corporate",r.REAL_ESTATE="Real Estate",r.LABOR="Labor",r.ENVIRONMENTAL="Environmental",r.TAX="Tax",r))(K||{});const we=({id:r,onBack:n,onSaved:c,currentUser:G})=>{const{theme:X}=Y(),x=je(),j=!!r,p=t=>{n?n():window.location.hash=`#/${t}`},[f,z]=d.useState("intake"),[C,O]=d.useState(!1),[k,M]=d.useState(!1),[Q,F]=d.useState(!1),[a,w]=d.useState({title:"",caseNumber:"",matterNumber:"",description:"",type:"Civil",status:I.INTAKE,priority:H.MEDIUM,practiceArea:q.CIVIL_LITIGATION,tags:[],clientName:"",clientId:null,clientEmail:"",clientPhone:"",responsibleAttorneyName:"",leadAttorneyId:null,originatingAttorneyName:"",originatingAttorneyId:null,assignedTeamId:null,court:"",jurisdiction:"",venue:"",judge:null,referredJudge:null,magistrateJudge:null,causeOfAction:"",natureOfSuit:"",natureOfSuitCode:"",juryDemand:"None",opposingPartyName:"",opposingCounsel:"",opposingCounselFirm:"",intakeDate:new Date().toISOString().split("T")[0],openedDate:"",filingDate:new Date().toISOString().split("T")[0],trialDate:null,dateTerminated:null,targetCloseDate:null,closedDate:null,statuteOfLimitations:null,billingType:"",estimatedValue:0,budgetAmount:0,hourlyRate:0,flatFee:0,contingencyPercentage:0,retainerAmount:0,conflictCheckCompleted:!1,conflictCheckDate:null,conflictCheckStatus:"pending",conflictCheckNotes:"",riskLevel:"",riskNotes:"",linkedCaseIds:[],linkedDocumentIds:[],relatedCases:[],internalNotes:"",customFields:{},metadata:{}}),[o,P]=d.useState({}),[b,E]=d.useState("pending"),{data:A=[]}=U(u.cases.matters.all(),()=>y.cases.getAll(),{staleTime:6e4}),{isLoading:W}=U(r?u.cases.matters.detail(r):["no-matter"],()=>r?y.cases.getById(r):Promise.resolve(null),{staleTime:3e4,enabled:!!r}),Z=T(t=>y.cases.add(t),{onSuccess:t=>{if(h.invalidate(u.cases.matters.all()),h.invalidate(u.cases.all()),x.success("Matter created successfully"),t&&typeof t=="object"&&"id"in t){const l=t.id;c?c(l):p(`${v.MATTERS}/${l}`)}else p(v.MATTERS)},onError:t=>{x.error(`Failed to create matter: ${t}`)}}),ee=T(({itemId:t,data:l})=>y.cases.update(t,l),{onSuccess:()=>{h.invalidate(u.cases.matters.all()),h.invalidate(u.cases.all()),r&&h.invalidate(u.cases.matters.detail(r)),x.success("Matter updated successfully"),p(v.MATTERS)},onError:t=>{x.error(`Failed to update matter: ${t}`)}}),L=T(t=>y.cases.delete(t),{onSuccess:()=>{h.invalidate(u.cases.matters.all()),h.invalidate(u.cases.all()),x.success("Matter deleted successfully"),p(v.MATTERS)},onError:t=>{x.error(`Failed to delete matter: ${t}`)}}),D=d.useMemo(()=>{if(a.matterNumber||a.caseNumber)return a.matterNumber||a.caseNumber;const t=new Date().getFullYear(),l=A.length+1;return`M${t}-${String(l).padStart(4,"0")}`},[A.length,a.matterNumber,a.caseNumber]);d.useEffect(()=>{if(!a.clientName||a.clientName.length<3){E("pending");return}const t=A.some(l=>l.clientName?.toLowerCase()===a.clientName?.toLowerCase()&&l.status===I.ACTIVE&&l.id!==r);E(t?"conflict":"clear")},[a.clientName,A,r]);const te=d.useCallback(()=>{const t={};return a.title?.trim()||(t.title="Title is required"),a.clientName?.trim()||(t.clientName="Client name is required"),a.responsibleAttorneyName?.trim()||(t.responsibleAttorneyName="Responsible attorney is required"),b==="conflict"&&(t.conflict="Conflict of interest detected"),P(t),Object.keys(t).length===0},[a.title,a.clientName,a.responsibleAttorneyName,b]),s=(t,l)=>{w(i=>({...i,[t]:l})),o[t]&&P(i=>{const g={...i};return delete g[t],g})},B=async t=>{if(t.preventDefault(),!te()){x.error("Please fix validation errors");return}O(!0);try{const l={...a,matterNumber:D,caseNumber:D,id:r||crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:G?.id||"current-user"};j&&r?await ee.mutateAsync({itemId:r,data:l}):await Z.mutateAsync(l)}catch(l){console.error("Save failed:",l)}finally{O(!1)}},ae=d.useCallback(async()=>{if(r){M(!0);try{await L.mutateAsync(r)}catch(t){console.error("Delete failed:",t)}finally{M(!1),F(!1)}}},[r,L]),J=d.useCallback(()=>{p(v.MATTERS)},[p]),le=d.useCallback(()=>{w(t=>({...t,relatedCases:[...t.relatedCases,{court:"",caseNumber:"",relationship:""}]}))},[]),se=d.useCallback(t=>{w(l=>({...l,relatedCases:l.relatedCases.filter((i,g)=>g!==t)}))},[]),S=d.useCallback((t,l,i)=>{w(g=>({...g,relatedCases:g.relatedCases.map(($,ie)=>ie===t?{...$,[l]:i}:$)}))},[]),re=[{id:"intake",label:"Intake & Basic Info",icon:me},{id:"court",label:"Court Information",icon:ue},{id:"parties",label:"Parties & Team",icon:xe},{id:"financial",label:"Financial",icon:be},{id:"related",label:"Related Cases",icon:_}];return W?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})]})}):e.jsxs("div",{className:m("h-full flex flex-col",X.background),children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:[e.jsx(Ce,{items:[{label:"Matter Management",onClick:J},{label:j?"Edit Matter":"New Matter"}]}),e.jsx("div",{className:"mt-4",children:e.jsx(Ne,{title:j?"Edit Matter":"New Matter",subtitle:"Federal litigation case and matter management",actions:e.jsxs("div",{className:"flex items-center gap-3",children:[j&&e.jsx(N,{variant:"danger",onClick:()=>F(!0),disabled:C||k,icon:V,children:"Delete"}),e.jsx(N,{variant:"secondary",onClick:J,disabled:C||k,children:"Cancel"}),e.jsx(N,{variant:"primary",onClick:B,disabled:C||k||b==="conflict",icon:ce,children:C?"Saving...":j?"Update":"Create Matter"})]})})}),e.jsx("div",{className:"flex items-center gap-2 mt-6 overflow-x-auto",children:re.map(t=>{const l=t.icon,i=f===t.id;return e.jsxs("button",{onClick:()=>z(t.id),className:m("flex items-center gap-2 px-4 py-2 rounded-lg transition-colors text-sm font-medium whitespace-nowrap",i?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:[e.jsx(l,{className:"w-4 h-4"}),t.label]},t.id)})})]}),e.jsx("form",{onSubmit:B,className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.submit&&e.jsx("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-rose-800 dark:text-rose-200",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:o.submit})]})}),b==="conflict"&&e.jsx("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-rose-800 dark:text-rose-200",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"⚠️ Conflict of Interest Detected - Review Required"})]})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[f==="intake"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Intake & Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"number",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Matter/Case Number"}),e.jsx("input",{id:"number",type:"text",value:D,disabled:!0,className:"w-full px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-slate-100"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Auto-generated"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Title *"}),e.jsx("input",{id:"title",type:"text",value:a.title,onChange:t=>s("title",t.target.value),className:m("w-full px-4 py-2 border rounded-lg",o.title?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900"),placeholder:"e.g., Smith v. Johnson Contract Dispute"}),o.title&&e.jsx("p",{className:"mt-1 text-sm text-rose-600 dark:text-rose-400",children:o.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Client Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"clientName",type:"text",value:a.clientName,onChange:t=>s("clientName",t.target.value),className:m("w-full px-4 py-2 border rounded-lg",o.clientName?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900"),placeholder:"Client or party name"}),a.clientName&&a.clientName.length>=3&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:b==="clear"?e.jsx(ge,{className:"w-5 h-5 text-emerald-500"}):b==="conflict"?e.jsx(R,{className:"w-5 h-5 text-rose-500"}):null})]}),o.clientName&&e.jsx("p",{className:"mt-1 text-sm text-rose-600 dark:text-rose-400",children:o.clientName}),b==="clear"&&a.clientName.length>=3&&e.jsx("p",{className:"mt-1 text-sm text-emerald-600 dark:text-emerald-400",children:"✓ No conflicts found"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:a.description,onChange:t=>s("description",t.target.value),rows:4,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Brief description of the matter..."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Type"}),e.jsx("select",{id:"type",value:a.type,onChange:t=>s("type",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:Object.entries(K).map(([t,l])=>e.jsx("option",{value:l,children:l},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status"}),e.jsx("select",{id:"status",value:a.status,onChange:t=>s("status",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:Object.entries(I).map(([t,l])=>e.jsx("option",{value:l,children:l.replace(/_/g," ")},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Priority"}),e.jsx("select",{id:"priority",value:a.priority,onChange:t=>s("priority",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:Object.entries(H).map(([t,l])=>e.jsx("option",{value:l,children:l},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"practiceArea",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Practice Area"}),e.jsx("select",{id:"practiceArea",value:a.practiceArea,onChange:t=>s("practiceArea",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:Object.entries(q).map(([t,l])=>e.jsx("option",{value:l,children:l.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"intakeDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Intake Date"}),e.jsx("input",{id:"intakeDate",type:"date",value:a.intakeDate,onChange:t=>s("intakeDate",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"openedDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Opened Date"}),e.jsx("input",{id:"openedDate",type:"date",value:a.openedDate,onChange:t=>s("openedDate",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]})]})]}),f==="court"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Court Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"court",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Court"}),e.jsx("input",{id:"court",type:"text",value:a.court,onChange:t=>s("court",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"e.g., U.S. District Court, Southern District of New York"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"jurisdiction",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Jurisdiction"}),e.jsx("input",{id:"jurisdiction",type:"text",value:a.jurisdiction,onChange:t=>s("jurisdiction",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"e.g., Federal, New York"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"judge",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Presiding Judge"}),e.jsx("input",{id:"judge",type:"text",value:a.judge||"",onChange:t=>s("judge",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Judge name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"referredJudge",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Referred Judge"}),e.jsx("input",{id:"referredJudge",type:"text",value:a.referredJudge||"",onChange:t=>s("referredJudge",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Referred judge name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"magistrateJudge",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Magistrate Judge"}),e.jsx("input",{id:"magistrateJudge",type:"text",value:a.magistrateJudge||"",onChange:t=>s("magistrateJudge",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Magistrate name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"causeOfAction",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cause of Action"}),e.jsx("input",{id:"causeOfAction",type:"text",value:a.causeOfAction,onChange:t=>s("causeOfAction",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"e.g., Breach of Contract"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"natureOfSuit",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nature of Suit"}),e.jsx("input",{id:"natureOfSuit",type:"text",value:a.natureOfSuit,onChange:t=>s("natureOfSuit",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Nature of suit description"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"natureOfSuitCode",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nature of Suit Code"}),e.jsx("input",{id:"natureOfSuitCode",type:"text",value:a.natureOfSuitCode,onChange:t=>s("natureOfSuitCode",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"e.g., 110, 190"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"juryDemand",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Jury Demand"}),e.jsxs("select",{id:"juryDemand",value:a.juryDemand,onChange:t=>s("juryDemand",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"None",children:"None"}),e.jsx("option",{value:"Plaintiff",children:"Plaintiff"}),e.jsx("option",{value:"Defendant",children:"Defendant"}),e.jsx("option",{value:"Both",children:"Both"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filingDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filing Date"}),e.jsx("input",{id:"filingDate",type:"date",value:a.filingDate,onChange:t=>s("filingDate",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"trialDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trial Date"}),e.jsx("input",{id:"trialDate",type:"date",value:a.trialDate||"",onChange:t=>s("trialDate",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateTerminated",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Date Terminated"}),e.jsx("input",{id:"dateTerminated",type:"date",value:a.dateTerminated||"",onChange:t=>s("dateTerminated",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]})]})]}),f==="parties"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Parties & Team Assignment"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"responsibleAttorneyName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Responsible Attorney *"}),e.jsx("input",{id:"responsibleAttorneyName",type:"text",value:a.responsibleAttorneyName,onChange:t=>s("responsibleAttorneyName",t.target.value),className:m("w-full px-4 py-2 border rounded-lg",o.responsibleAttorneyName?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900"),placeholder:"Attorney name"}),o.responsibleAttorneyName&&e.jsx("p",{className:"mt-1 text-sm text-rose-600 dark:text-rose-400",children:o.responsibleAttorneyName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"originatingAttorneyName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Originating Attorney"}),e.jsx("input",{id:"originatingAttorneyName",type:"text",value:a.originatingAttorneyName,onChange:t=>s("originatingAttorneyName",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Attorney who originated the matter"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Opposing Party"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"opposingPartyName",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Opposing Party Name"}),e.jsx("input",{id:"opposingPartyName",type:"text",value:a.opposingPartyName||"",onChange:t=>s("opposingPartyName",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Name of opposing party"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"opposingCounsel",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Opposing Counsel"}),e.jsx("input",{id:"opposingCounsel",type:"text",value:a.opposingCounsel||"",onChange:t=>s("opposingCounsel",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Attorney name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"opposingCounselFirm",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Opposing Counsel Firm"}),e.jsx("input",{id:"opposingCounselFirm",type:"text",value:a.opposingCounselFirm||"",onChange:t=>s("opposingCounselFirm",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",placeholder:"Law firm name"})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Conflict Check"}),e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.conflictCheckCompleted||!1,onChange:t=>s("conflictCheckCompleted",t.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Conflict Check Completed"})]})}),a.conflictCheckCompleted&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"conflictCheckDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Conflict Check Date"}),e.jsx("input",{id:"conflictCheckDate",type:"date",value:a.conflictCheckDate||"",onChange:t=>s("conflictCheckDate",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"conflictCheckNotes",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Conflict Check Notes"}),e.jsx("textarea",{id:"conflictCheckNotes",value:a.conflictCheckNotes||"",onChange:t=>s("conflictCheckNotes",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",rows:3,placeholder:"Notes about conflict check findings..."})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Risk Management"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"riskLevel",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Risk Level"}),e.jsxs("select",{id:"riskLevel",value:a.riskLevel||"",onChange:t=>s("riskLevel",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"Select risk level..."}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Critical",children:"Critical"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"riskNotes",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Risk Notes"}),e.jsx("textarea",{id:"riskNotes",value:a.riskNotes||"",onChange:t=>s("riskNotes",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",rows:3,placeholder:"Describe potential risks and mitigation strategies..."})]})]})]}),f==="financial"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Financial Information"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"billingType",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Billing Type"}),e.jsxs("select",{id:"billingType",value:a.billingType||"",onChange:t=>s("billingType",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"",children:"Select billing type..."}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"flat_fee",children:"Flat Fee"}),e.jsx("option",{value:"contingency",children:"Contingency"}),e.jsx("option",{value:"retainer",children:"Retainer"}),e.jsx("option",{value:"blended",children:"Blended"}),e.jsx("option",{value:"value_based",children:"Value Based"}),e.jsx("option",{value:"pro_bono",children:"Pro Bono"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estimatedValue",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estimated Value"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),e.jsx("input",{id:"estimatedValue",type:"number",value:a.estimatedValue,onChange:t=>s("estimatedValue",parseFloat(t.target.value)||0),className:"w-full pl-8 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",step:"0.01",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"budgetAmount",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Budget Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),e.jsx("input",{id:"budgetAmount",type:"number",value:a.budgetAmount,onChange:t=>s("budgetAmount",parseFloat(t.target.value)||0),className:"w-full pl-8 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",step:"0.01",min:"0"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hourlyRate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hourly Rate"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),e.jsx("input",{id:"hourlyRate",type:"number",value:a.hourlyRate,onChange:t=>s("hourlyRate",parseFloat(t.target.value)||0),className:"w-full pl-8 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",step:"0.01",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"retainerAmount",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Retainer Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),e.jsx("input",{id:"retainerAmount",type:"number",value:a.retainerAmount,onChange:t=>s("retainerAmount",parseFloat(t.target.value)||0),className:"w-full pl-8 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",step:"0.01",min:"0"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"flatFee",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Flat Fee"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),e.jsx("input",{id:"flatFee",type:"number",value:a.flatFee||0,onChange:t=>s("flatFee",parseFloat(t.target.value)||0),className:"w-full pl-8 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",step:"0.01",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contingencyPercentage",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Contingency Percentage"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"contingencyPercentage",type:"number",value:a.contingencyPercentage||0,onChange:t=>s("contingencyPercentage",parseFloat(t.target.value)||0),className:"w-full px-4 pr-10 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",step:"0.1",min:"0",max:"100"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"%"})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Important Dates"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"targetCloseDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Close Date"}),e.jsx("input",{id:"targetCloseDate",type:"date",value:a.targetCloseDate||"",onChange:t=>s("targetCloseDate",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"statuteOfLimitations",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Statute of Limitations"}),e.jsx("input",{id:"statuteOfLimitations",type:"date",value:a.statuteOfLimitations||"",onChange:t=>s("statuteOfLimitations",t.target.value||null),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900"})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Internal Notes"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"internalNotes",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notes (Internal Only)"}),e.jsx("textarea",{id:"internalNotes",value:a.internalNotes||"",onChange:t=>s("internalNotes",t.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-900",rows:5,placeholder:"Internal notes, strategy notes, confidential information..."})]})]})]}),f==="related"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Related Cases"}),e.jsx(N,{variant:"secondary",onClick:le,icon:_,children:"Add Related Case"})]}),a.relatedCases.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:'No related cases. Click "Add Related Case" to link a case.'}):e.jsx("div",{className:"space-y-4",children:a.relatedCases.map((t,l)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",value:t.court,onChange:i=>S(l,"court",i.target.value),placeholder:"Court",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800"}),e.jsx("input",{type:"text",value:t.caseNumber,onChange:i=>S(l,"caseNumber",i.target.value),placeholder:"Case Number",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800"}),e.jsx("input",{type:"text",value:t.relationship||"",onChange:i=>S(l,"relationship",i.target.value),placeholder:"Relationship (optional)",className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800"})]}),e.jsx("button",{type:"button",onClick:()=>se(l),className:"p-2 text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded","aria-label":"Remove related case",children:e.jsx(he,{className:"w-5 h-5"})})]},l))})]})]})]})}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Are you sure you want to delete this matter? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(N,{variant:"secondary",onClick:()=>F(!1),disabled:k,children:"Cancel"}),e.jsx(N,{variant:"danger",onClick:ae,disabled:k,icon:V,children:k?"Deleting...":"Delete"})]})]})})]})};function _e({}){return ye({title:"Create New Case",description:"Create a new legal case or matter in LexiFlow"})}const Ue=pe(function({loaderData:n,actionData:c}){return ke(),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx(we,{}),c?.error&&e.jsx("div",{className:"mt-4 rounded-md bg-red-50 p-4 text-red-800 dark:bg-red-900/20 dark:text-red-200",children:c.error})]})}),qe=fe(function({error:n}){return e.jsx(ve,{error:n,title:"Failed to Load Case Creation Form",message:"We couldn't load the case creation form. Please try again.",backTo:"/cases",backLabel:"Back to Cases"})});export{qe as ErrorBoundary,Ue as default,_e as meta};
