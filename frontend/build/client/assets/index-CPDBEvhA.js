const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CaseOverviewDashboard-DiZF52Fb.js","assets/vendor-core-V-oW58GW.js","assets/vendor-misc-Dwkhvdtg.js","assets/vendor-charts-KZIdMATq.js","assets/useQueryHooks-BdeOvP9e.js","assets/Badge-B08w10nz.js","assets/ThemeContext-OPG61qw5.js","assets/Button-PaGqeZoR.js","assets/Card-D56KNEnI.js","assets/ErrorState-BA0dmAVI.js","assets/type-mappings-DEPYyX4d.js","assets/CaseOperationsCenter-DFSV3KDD.js","assets/CaseCalendar-Cbl6Qskj.js","assets/Modal-BlJFylOy.js","assets/dataService-75QCl8KS.js","assets/preload-helper-BXl3LOEh.js","assets/SyncContext-DYD5yPAv.js","assets/CaseFinancialsCenter-A12ahg9D.js","assets/CaseInsightsDashboard-DJsPLxJo.js","assets/CaseAnalyticsDashboard-B8aY2u6s.js","assets/CaseListActive-BvXzPZ13.js","assets/VirtualList-B1zORm91.js","assets/FilterPanel-C0WYx6xs.js","assets/formatters-stMuSkc6.js","assets/Input-JNgj1Ekc.js","assets/RefactoredCommon-C4VrRajq.js","assets/ConfirmDialog-CTAXMvML.js","assets/useNotify-Bhb3OIEg.js","assets/useToggle-CjLp2PQ4.js","assets/useModalState-Cst_3NmK.js","assets/queryKeys-BBVgMz36.js","assets/CaseListIntake-BkxPOnWQ.js","assets/Kanban-BbECSZhC.js","assets/TextArea-BMpffac7.js","assets/AdaptiveLoader-gvY3s3Bs.js","assets/CaseImporter-DG0Sxe5T.js","assets/schemas-B2_dy3tf.js","assets/CaseListDocket-DnB8Nr6M.js","assets/useSessionStorage-HC9RvMcM.js","assets/CaseListTasks-CYPFbg4O.js","assets/TaskCreationModal-B2VECu1_.js","assets/search.config-B6mvIgDA.js","assets/UserAvatar-lVqVFNPb.js","assets/CaseListConflicts-BsiPIEKG.js","assets/CaseListResources-C7REtvu-.js","assets/ProgressBar-ysLhgZvu.js","assets/CaseListExperts-BaLtjxA8.js","assets/CaseListReporters-CZWyKwew.js","assets/CaseListTrust-2c1p3lmJ.js","assets/Table-C8OsWLsz.js","assets/CaseListClosing-D2x-kjQ4.js","assets/geminiService-DjDdWyh4.js","assets/sanitize-k_Tw3ej1.js","assets/CaseListArchived-nfIOq5jS.js","assets/CaseListMisc-pZjvu9bq.js","assets/Tabs-BTz8yyZK.js","assets/MetricCard-CDV5joW_.js","assets/MasterWorkflow-BPN87hMc.js","assets/ErrorBoundary-BekiuBRc.js","assets/PageHeader-os9pD5mt.js","assets/EmptyState-BwtZeBY5.js","assets/useInterval-C7tD4i7N.js","assets/BuilderToolbar-BrBSlilU.js","assets/chartConfig-DG5fYqz9.js","assets/chartColorService-Dq1XQNFk.js","assets/useFilterAndSearch-B2zKLOlA.js","assets/dateUtils-rLIRMrtk.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,af as M,a0 as R,ag as B,F as P,A as I,q as N,ah as W,N as S,a8 as O,ai as $,aj as g,V as U,ak as T,t as Q,k as q,al as H,e as G,f as J,_ as K}from"./vendor-core-V-oW58GW.js";import{u as E,b as A,c as r}from"./useQueryHooks-BdeOvP9e.js";import{P as X}from"./PageHeader-os9pD5mt.js";import{B as z}from"./Button-PaGqeZoR.js";import{u as Y,L as Z}from"./useSessionStorage-HC9RvMcM.js";import{u as ee}from"./ThemeContext-OPG61qw5.js";import{C as k}from"./type-mappings-DEPYyX4d.js";import{_ as o}from"./preload-helper-BXl3LOEh.js";import{R as se}from"./RouteErrorBoundary-Nha8Il06.js";import{a as te}from"./meta-utils-lVs9HXG9.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";const V=a.lazy(()=>o(()=>import("./CaseOverviewDashboard-DiZF52Fb.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(s=>({default:s.CaseOverviewDashboard}))),ae=a.lazy(()=>o(()=>import("./CaseOperationsCenter-DFSV3KDD.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8])).then(s=>({default:s.CaseOperationsCenter}))),re=a.lazy(()=>o(()=>import("./CaseCalendar-Cbl6Qskj.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,13,14,15,10,16])).then(s=>({default:s.CaseCalendar}))),ie=a.lazy(()=>o(()=>import("./CaseFinancialsCenter-A12ahg9D.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8])).then(s=>({default:s.CaseFinancialsCenter}))),oe=a.lazy(()=>o(()=>import("./CaseInsightsDashboard-DJsPLxJo.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,10])).then(s=>({default:s.CaseInsightsDashboard}))),ne=a.lazy(()=>o(()=>import("./CaseAnalyticsDashboard-B8aY2u6s.js"),__vite__mapDeps([19,1,2,3,4,7,6,8,10])).then(s=>({default:s.CaseAnalyticsDashboard}))),le=a.lazy(()=>o(()=>import("./CaseListActive-BvXzPZ13.js"),__vite__mapDeps([20,1,2,3,21,6,4,7,22,23,24,5,25,26,13,14,15,10,16,27,28,29,30])).then(s=>({default:s.CaseListActive}))),ce=a.lazy(()=>o(()=>import("./CaseListIntake-BkxPOnWQ.js"),__vite__mapDeps([31,1,2,3,32,6,4,13,14,15,10,16,24,33,7,34,27,29])).then(s=>({default:s.CaseListIntake}))),de=a.lazy(()=>o(()=>import("./CaseImporter-DG0Sxe5T.js"),__vite__mapDeps([35,1,2,3,6,4,7,36])).then(s=>({default:s.CaseImporter}))),ue=a.lazy(()=>o(()=>import("./CaseListDocket-DnB8Nr6M.js"),__vite__mapDeps([37,1,2,3,7,6,4,5,21,38,14,15,10,30])).then(s=>({default:s.CaseListDocket}))),me=a.lazy(()=>o(()=>import("./CaseListTasks-CYPFbg4O.js"),__vite__mapDeps([39,1,2,3,5,6,4,40,14,15,10,30,27,16,13,24,33,7,41,42,21,38,29])).then(s=>({default:s.CaseListTasks}))),xe=a.lazy(()=>o(()=>import("./CaseListConflicts-BsiPIEKG.js"),__vite__mapDeps([43,1,2,3,7,6,4,14,15,10])).then(s=>({default:s.CaseListConflicts}))),pe=a.lazy(()=>o(()=>import("./CaseListResources-C7REtvu-.js"),__vite__mapDeps([44,1,2,3,42,6,4,45,14,15,10])).then(s=>({default:s.CaseListResources}))),he=a.lazy(()=>o(()=>import("./CaseListExperts-BaLtjxA8.js"),__vite__mapDeps([46,1,2,3,5,6,4,7,14,15,10])).then(s=>({default:s.CaseListExperts}))),_e=a.lazy(()=>o(()=>import("./CaseListReporters-CZWyKwew.js"),__vite__mapDeps([47,1,2,3,7,6,4,14,15,10])).then(s=>({default:s.CaseListReporters}))),be=a.lazy(()=>o(()=>import("./CaseListTrust-2c1p3lmJ.js"),__vite__mapDeps([48,1,2,3,49,6,4,14,15,10])).then(s=>({default:s.CaseListTrust}))),fe=a.lazy(()=>o(()=>import("./CaseListClosing-D2x-kjQ4.js"),__vite__mapDeps([50,1,2,3,7,6,4,27,16,14,15,10,51,36,52])).then(s=>({default:s.CaseListClosing}))),Ce=a.lazy(()=>o(()=>import("./CaseListArchived-nfIOq5jS.js"),__vite__mapDeps([53,1,2,3,49,6,4,5,7,34,26,13,14,15,10,16,29])).then(s=>({default:s.CaseListArchived}))),ve=a.lazy(()=>o(()=>import("./CaseListMisc-pZjvu9bq.js"),__vite__mapDeps([54,1,2,3,6,27,16,14,15,4,10,7,8,55,56])).then(s=>({default:s.CaseListMisc}))),ge=a.lazy(()=>o(()=>import("./MasterWorkflow-BPN87hMc.js"),__vite__mapDeps([57,1,2,3,58,14,15,4,10,59,6,7,60,5,30,61,21,34,27,16,8,55,62,24,33,26,13,29,28,63,64,9,56,65,66])).then(s=>({default:s.default}))),je=({activeTab:s})=>{const{data:l=[]}=E(["cases","all"],()=>A.cases.getAll()),[m,t]=a.useState("all"),[b,x]=a.useState("all"),[u,h]=a.useState(""),[f,_]=a.useState(""),[y,p]=a.useState(""),v=()=>{t("all"),x("all"),h(""),_(""),p("")};return(()=>{switch(s){case"overview":return e.jsx(V,{});case"active":return e.jsx(le,{filteredCases:l,statusFilter:m,setStatusFilter:t,typeFilter:b,setTypeFilter:x,searchTerm:u,setSearchTerm:h,dateFrom:f,setDateFrom:_,dateTo:y,setDateTo:p,resetFilters:v,onSelectCase:n=>console.log("Selected:",n)});case"intake":return e.jsx(ce,{});case"import":return e.jsx(de,{});case"operations":return e.jsx(ae,{});case"workflows":return e.jsx(ge,{onSelectCase:n=>console.log("Selected:",n)});case"docket":return e.jsx(ue,{onSelectCase:n=>console.log("Selected:",n)});case"tasks":return e.jsx(me,{onSelectCase:n=>console.log("Selected:",n)});case"conflicts":return e.jsx(xe,{onSelectCase:n=>console.log("Selected:",n)});case"calendar":return e.jsx(re,{});case"financials":return e.jsx(ie,{});case"insights":return e.jsx(oe,{});case"resources":return e.jsx(pe,{});case"experts":return e.jsx(he,{});case"reporters":return e.jsx(_e,{});case"trust":return e.jsx(be,{});case"closing":return e.jsx(fe,{});case"archived":return e.jsx(Ce,{onSelectCase:n=>console.log("Selected:",n)});case"misc":return e.jsx(ve,{});case"analytics":return e.jsx(ne,{});default:return e.jsx(V,{})}})()},j=[{id:"cases_group",label:"Cases",icon:R,subTabs:[{id:"overview",label:"Overview Dashboard",icon:M},{id:"active",label:"Active Cases",icon:R},{id:"intake",label:"Intake Pipeline",icon:B},{id:"import",label:"Import Data",icon:P},{id:"operations",label:"Operations Center",icon:I}]},{id:"workflow_group",label:"Workflow",icon:S,subTabs:[{id:"workflows",label:"Master Workflow",icon:I},{id:"docket",label:"Docket & Filings",icon:P},{id:"tasks",label:"Tasks & Deadlines",icon:N},{id:"conflicts",label:"Conflict Checks",icon:W}]},{id:"planning_group",label:"Planning",icon:O,subTabs:[{id:"calendar",label:"Case Calendar",icon:N},{id:"financials",label:"Financials",icon:O},{id:"insights",label:"Insights & Risk",icon:$}]},{id:"resources_group",label:"Resources",icon:g,subTabs:[{id:"resources",label:"Resource Allocation",icon:g},{id:"experts",label:"Expert Witnesses",icon:g},{id:"reporters",label:"Court Reporters",icon:g},{id:"trust",label:"Trust Accounting",icon:U}]},{id:"admin_group",label:"Admin",icon:T,subTabs:[{id:"closing",label:"Closing Queue",icon:T},{id:"archived",label:"Archived Cases",icon:T},{id:"misc",label:"Bulk Operations",icon:S},{id:"analytics",label:"Analytics",icon:Q}]}],ye=({initialCases:s,initialInvoices:l,onSelectCase:m})=>{const{theme:t}=ee(),[b,x]=a.useTransition(),[u,h]=Y("cases_active_tab","overview"),f=i=>{x(()=>{h(i)})},_=a.useMemo(()=>j.find(i=>i.subTabs.some(c=>c.id===u))||j[0],[u]),y=i=>{const c=j.find(L=>L.id===i);c&&c.subTabs.length>0&&f(c.subTabs[0].id)},{data:p}=E(["cases","all"],()=>A.cases.getAll(),{initialData:s}),{data:v}=E(["billing","invoices"],()=>A.billing.getInvoices(),{initialData:l}),C=a.useMemo(()=>{const i=p?.filter(d=>d.status===k.Active).length||0,c=p?.filter(d=>d.status===k.Open||d.status===k.PreFiling).length||0,L=p?.filter(d=>{if(!d.closeDate)return!1;const D=(new Date(d.closeDate).getTime()-new Date().getTime())/(1e3*60*60*24);return D>=0&&D<=7}).length||0,F=v?.reduce((d,w)=>d+(w.totalAmount||0),0)||0;return{activeCases:i,intakePipeline:c,upcomingDeadlines:L,totalRevenue:F}},[p,v]),n=()=>e.jsx(je,{activeTab:u});return e.jsxs("div",{className:r("h-full flex flex-col animate-fade-in",t.background),children:[e.jsxs("div",{className:"px-6 pt-6 shrink-0",children:[e.jsx(X,{title:"Case Management",subtitle:"Centralized case oversight, intake pipeline, and resource coordination",actions:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:"outline",size:"sm",icon:q,onClick:()=>window.location.reload(),children:"Refresh"}),e.jsx(z,{variant:"primary",size:"sm",icon:H,onClick:()=>f("intake"),children:"New Case"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:r("p-4 rounded-lg shadow-sm border",t.surface.default,t.border.default),children:[e.jsx("p",{className:r("text-xs font-bold uppercase",t.text.secondary),children:"Active Cases"}),e.jsx("p",{className:r("text-2xl font-bold",t.primary.text),children:C.activeCases})]}),e.jsxs("div",{className:r("p-4 rounded-lg shadow-sm border",t.surface.default,t.border.default),children:[e.jsx("p",{className:r("text-xs font-bold uppercase",t.text.secondary),children:"Intake Pipeline"}),e.jsx("p",{className:r("text-2xl font-bold",t.status.warning.text),children:C.intakePipeline})]}),e.jsxs("div",{className:r("p-4 rounded-lg shadow-sm border",t.surface.default,t.border.default),children:[e.jsx("p",{className:r("text-xs font-bold uppercase",t.text.secondary),children:"Upcoming Deadlines"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:C.upcomingDeadlines})]}),e.jsxs("div",{className:r("p-4 rounded-lg shadow-sm border",t.surface.default,t.border.default),children:[e.jsx("p",{className:r("text-xs font-bold uppercase",t.text.secondary),children:"Total Revenue"}),e.jsxs("p",{className:r("text-2xl font-bold",t.status.success.text),children:["$",(C.totalRevenue/1e6).toFixed(1),"M"]})]})]}),e.jsx("div",{className:r("hidden md:flex space-x-6 border-b mb-4",t.border.default),children:j.map(i=>e.jsxs("button",{onClick:()=>y(i.id),className:r("flex items-center pb-3 px-1 text-sm font-medium transition-all border-b-2",_.id===i.id?r("border-current",t.primary.text):r("border-transparent",t.text.secondary,`hover:${t.text.primary}`)),children:[e.jsx(i.icon,{className:r("h-4 w-4 mr-2",_.id===i.id?t.primary.text:t.text.tertiary)}),i.label]},i.id))}),e.jsx("div",{className:r("flex space-x-2 overflow-x-auto no-scrollbar py-3 px-4 md:px-6 rounded-lg border mb-4",t.surface.highlight,t.border.default),children:_.subTabs.map(i=>{const c=i.icon;return e.jsxs("button",{onClick:()=>f(i.id),className:r("flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-all whitespace-nowrap",u===i.id?r("shadow-sm",t.action.primary.bg,t.action.primary.text):r(t.text.secondary,`hover:${t.surface.default}`,`hover:${t.text.primary}`)),children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),i.label]},i.id)})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto px-6 pb-6 custom-scrollbar",children:e.jsx("div",{className:r(b&&"opacity-60 transition-opacity"),children:e.jsx(a.Suspense,{fallback:e.jsx(Z,{message:"Loading Case Module..."}),children:n()})})})]})};function Oe({data:s}){const l=s?.cases?.length;return te({entityType:"Cases",count:l,description:"Manage your legal cases and matters"})}const ze=G(function({loaderData:l,actionData:m}){const{cases:t,invoices:b}=l,x=K(),u=a.useCallback(h=>{x(`/cases/${h}`)},[x]);return e.jsxs("div",{className:"min-h-full",children:[e.jsx(ye,{initialCases:t,initialInvoices:b,onSelectCase:u}),m&&!m.success&&m.error&&e.jsx("div",{className:"fixed bottom-4 right-4 max-w-sm rounded-md border border-red-200 bg-red-50 p-4 shadow-lg dark:border-red-800 dark:bg-red-900/90",role:"alert",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Action Failed"}),e.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:m.error})]})]})})]})}),Ve=J(function({error:l}){return console.error("Cases route error:",l),e.jsx(se,{error:l,title:"Failed to Load Cases",message:"We couldn't load your cases. This might be a temporary issue.",backTo:"/",backLabel:"Return to Dashboard",onRetry:()=>window.location.reload()})});export{Ve as ErrorBoundary,ze as default,Oe as meta};
