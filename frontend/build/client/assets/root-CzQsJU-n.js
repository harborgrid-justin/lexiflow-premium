import{r,j as e,w as L,e as E,f as A,M as k,L as v,S as C,g as w,O as P,i as F,h as R}from"./vendor-core-V-oW58GW.js";import{T as _}from"./ThemeContext-OPG61qw5.js";import"./vendor-misc-Dwkhvdtg.js";import"./vendor-charts-KZIdMATq.js";const T=r.createContext(void 0),I=r.createContext(void 0),g="lexiflow_auth_token",h="lexiflow_auth_user";function O({children:n}){const[t,s]=r.useState(null),[a,l]=r.useState(!0),[m,c]=r.useState(null),x=t!==null;r.useEffect(()=>{(async()=>{try{const u=localStorage.getItem(g),i=localStorage.getItem(h);u&&i&&s(JSON.parse(i))}catch(u){console.error("Failed to initialize auth:",u),c("Failed to restore session")}finally{l(!1)}})()},[]);const f=r.useCallback(async(o,u)=>{l(!0),c(null);try{const i={id:"1",email:o,name:o.split("@")[0],role:"attorney",permissions:["cases:read","cases:write","documents:read"]};return localStorage.setItem(g,"mock_token_"+Date.now()),localStorage.setItem(h,JSON.stringify(i)),s(i),!0}catch(i){const j=i instanceof Error?i.message:"Login failed";return c(j),!1}finally{l(!1)}},[]),d=r.useCallback(async()=>{try{localStorage.removeItem(g),localStorage.removeItem(h),s(null),c(null)}catch(o){console.error("Logout error:",o),s(null)}},[]),p=r.useCallback(async()=>{try{return!0}catch{return await d(),!1}},[d]),b=r.useCallback(o=>t?t.permissions.includes(o):!1,[t]),y=r.useCallback((...o)=>t?o.includes(t.role):!1,[t]),N=r.useMemo(()=>({user:t,isLoading:a,isAuthenticated:x,error:m}),[t,a,x,m]),S=r.useMemo(()=>({login:f,logout:d,refreshToken:p,hasPermission:b,hasRole:y}),[f,d,p,b,y]);return e.jsx(T.Provider,{value:N,children:e.jsx(I.Provider,{value:S,children:n})})}function H({children:n}){return e.jsx(e.Fragment,{children:n})}function D({}){return[{title:"LexiFlow AI Legal Suite"},{name:"description",content:"Enterprise Legal OS - Case Management, Discovery, Research & Firm Operations"},{name:"viewport",content:"width=device-width, initial-scale=1"},{charSet:"utf-8"},{name:"theme-color",content:"#1e40af"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{property:"og:type",content:"website"},{property:"og:site_name",content:"LexiFlow"}]}function V(){return[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"},{rel:"apple-touch-icon",href:"/apple-touch-icon.png"},{rel:"manifest",href:"/manifest.json"}]}const Y=L(function(){return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",role:"status","aria-label":"Loading application",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600 dark:border-gray-700 dark:border-t-blue-400"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"L"})})]}),e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Loading LexiFlow..."})]})})});function G({children:n}){return e.jsxs("html",{lang:"en",suppressHydrationWarning:!0,children:[e.jsxs("head",{children:[e.jsx(k,{}),e.jsx(v,{})]}),e.jsxs("body",{className:"min-h-screen bg-gray-50 antialiased dark:bg-gray-900",children:[e.jsx(H,{children:e.jsx(_,{children:e.jsx(O,{children:n})})}),e.jsx(C,{}),e.jsx(w,{})]})]})}const J=E(function(){return e.jsx(P,{})}),K=A(function({error:t}){console.error("Root Error Boundary:",t);let s="Application Error",a="Something went wrong. Please try refreshing the page or contact support if the problem persists.",l;if(F(t))switch(l=t.status,t.status){case 404:s="Page Not Found",a="The page you are looking for does not exist or has been moved.";break;case 403:s="Access Denied",a="You do not have permission to access this page.";break;case 401:s="Authentication Required",a="Please log in to access this page.";break;case 500:s="Server Error",a="An internal server error occurred. Please try again later.";break;default:s=`Error ${t.status}`,a=t.statusText||a}return e.jsxs("html",{lang:"en",children:[e.jsxs("head",{children:[e.jsxs("title",{children:[s," - LexiFlow"]}),e.jsx(k,{}),e.jsx(v,{})]}),e.jsxs("body",{className:"min-h-screen bg-gray-50 antialiased dark:bg-gray-900",children:[e.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-lg border border-red-200 bg-white p-6 shadow-lg dark:border-red-800 dark:bg-gray-800",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[l&&e.jsx("span",{className:"text-5xl font-bold text-red-300 dark:text-red-700",children:l}),!l&&e.jsx("div",{className:"rounded-full bg-red-100 p-2 dark:bg-red-900/20",children:e.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s})]}),e.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-400",children:a}),t instanceof Error&&!1,e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsx("button",{type:"button",onClick:()=>window.location.reload(),className:"flex-1 rounded-md border border-gray-300 bg-white px-4 py-2 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:"Refresh Page"}),e.jsx(R,{to:"/",className:"flex-1 rounded-md bg-blue-600 px-4 py-2 text-center text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Go to Dashboard"})]})]})})}),e.jsx(w,{})]})]})});export{K as ErrorBoundary,Y as HydrateFallback,G as Layout,J as default,V as links,D as meta};
