import{r as I}from"./vendor-core-V-oW58GW.js";function qt(...n){return n.filter(Boolean).join(" ")}const L=()=>(typeof window<"u"&&window.location.hostname.includes("github.dev"),""),N=()=>"/api",jt="/api",Nt=3,xt=1e3,Wt=()=>!0;class v extends Error{constructor(e,t,a=500,s){super(e),this.code=t,this.statusCode=a,this.context=s,this.name=this.constructor.name,this.timestamp=new Date().toISOString(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}timestamp;toJSON(){return{error:this.name,message:this.message,code:this.code,statusCode:this.statusCode,timestamp:this.timestamp,...this.context&&{context:this.context}}}}class _t extends v{constructor(e,t){super(`${e} not found: ${t}`,"ENTITY_NOT_FOUND",404,{entityType:e,id:t})}}class p extends v{constructor(e,t){super(e,"VALIDATION_ERROR",400,t)}}class w extends v{constructor(e="Authentication failed"){super(e,"AUTHENTICATION_ERROR",401)}}class x extends v{constructor(e,t){super(`External service error (${e}): ${t}`,"EXTERNAL_SERVICE_ERROR",502,{service:e})}}class W extends v{constructor(e,t){super(`API timeout: ${e} exceeded ${t}ms`,"API_TIMEOUT",504,{endpoint:e,timeoutMs:t})}}class _ extends v{constructor(e,t){super(`Operation failed: ${e} - ${t}`,"OPERATION_ERROR",500,{operation:e,reason:t})}}class zt extends v{constructor(e){super(`Failed to initialize worker pool with ${e} workers`,"WORKER_POOL_INIT_ERROR",500,{workerCount:e})}}function z(n){return n.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}function F(n){if(n==null)return n;if(Array.isArray(n))return n.map(e=>F(e));if(typeof n=="object"&&n.constructor===Object){const e={};for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const a=z(t);e[a]=F(n[t])}return e}return n}class M{isAvailable;fallback;constructor(){this.isAvailable=this.checkAvailability(),this.fallback=new Map}checkAvailability(){try{if(typeof window>"u"||!window.localStorage)return!1;const e="__storage_test__";return window.localStorage.setItem(e,"test"),window.localStorage.getItem(e),window.localStorage.removeItem(e),!0}catch{return!1}}getItem(e){return this.isAvailable?localStorage.getItem(e):this.fallback.get(e)??null}setItem(e,t){if(this.isAvailable)try{localStorage.setItem(e,t)}catch(a){throw a instanceof DOMException&&a.name==="QuotaExceededError"?new K(e):a}else this.fallback.set(e,t)}removeItem(e){this.isAvailable?localStorage.removeItem(e):this.fallback.delete(e)}clear(){this.isAvailable?localStorage.clear():this.fallback.clear()}keys(){return this.isAvailable?Object.keys(localStorage):Array.from(this.fallback.keys())}hasKey(e){return this.getItem(e)!==null}length(){return this.isAvailable?localStorage.length:this.fallback.size}}class Q{isAvailable;fallback;constructor(){this.isAvailable=this.checkAvailability(),this.fallback=new Map}checkAvailability(){try{if(typeof window>"u"||!window.sessionStorage)return!1;const e="__session_test__";return window.sessionStorage.setItem(e,"test"),window.sessionStorage.removeItem(e),!0}catch{return!1}}getItem(e){return this.isAvailable?sessionStorage.getItem(e):this.fallback.get(e)??null}setItem(e,t){this.isAvailable?sessionStorage.setItem(e,t):this.fallback.set(e,t)}removeItem(e){this.isAvailable?sessionStorage.removeItem(e):this.fallback.delete(e)}clear(){this.isAvailable?sessionStorage.clear():this.fallback.clear()}keys(){return this.isAvailable?Object.keys(sessionStorage):Array.from(this.fallback.keys())}hasKey(e){return this.getItem(e)!==null}length(){return this.isAvailable?sessionStorage.length:this.fallback.size}}class K extends Error{constructor(e){super(`Storage quota exceeded when setting key: ${e}`),this.name="StorageQuotaExceededError"}}const A=new M;new Q;const R={},H=()=>L();class O{get baseURL(){const e=H(),t=N();return e?e.endsWith(t)?e:`${e.replace(/\/$/,"")}${t}`:t}authTokenKey;refreshTokenKey;DEFAULT_TIMEOUT=3e4;HEALTH_CHECK_TIMEOUT=5e3;refreshPromise=null;constructor(){this.authTokenKey=R?.VITE_AUTH_TOKEN_KEY||"lexiflow_auth_token",this.refreshTokenKey=R?.VITE_AUTH_REFRESH_TOKEN_KEY||"lexiflow_refresh_token",this.logInitialization()}logInitialization(){console.log("[ApiClient] Initialized",{baseURL:this.baseURL,authEnabled:!!this.getAuthToken()})}validateEndpoint(e,t){if(!e)throw new p(`[ApiClient.${t}] Invalid endpoint parameter`);if(!e.startsWith("/"))throw new p(`[ApiClient.${t}] Endpoint must start with /`)}validateData(e,t){if(e!=null&&typeof e!="object")throw new p(`[ApiClient.${t}] Data must be an object or undefined`)}getAuthToken(){try{return A.getItem(this.authTokenKey)}catch(e){return console.error("[ApiClient.getAuthToken] Error:",e),null}}getRefreshToken(){try{return A.getItem(this.refreshTokenKey)}catch(e){return console.error("[ApiClient.getRefreshToken] Error:",e),null}}setAuthTokens(e,t){if(!e)throw new p("[ApiClient.setAuthTokens] Invalid accessToken parameter");try{A.setItem(this.authTokenKey,e),t&&A.setItem(this.refreshTokenKey,t),console.log("[ApiClient] Auth tokens stored successfully")}catch(a){throw console.error("[ApiClient.setAuthTokens] Error:",a),new _("ApiClient.setAuthTokens","Failed to store authentication tokens")}}clearAuthTokens(){try{A.removeItem(this.authTokenKey),A.removeItem(this.refreshTokenKey),console.log("[ApiClient] Auth tokens cleared")}catch(e){console.error("[ApiClient.clearAuthTokens] Error:",e)}}isAuthenticated(){return!!this.getAuthToken()}getBaseUrl(){return this.baseURL}getHeaders(e={}){const t={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...e},a=this.getAuthToken();return a&&(t.Authorization=`Bearer ${a}`),t}async handleResponse(e){if(!e.ok){let t;try{t=await e.json()}catch{t={message:e.statusText||"An error occurred",statusCode:e.status,timestamp:new Date().toISOString()}}const a=e.url.includes("/auth/login");if(e.status===401&&!a){console.warn("[ApiClient] Received 401 Unauthorized, attempting token refresh");const s=this.getRefreshToken();if(s)try{throw await this.refreshAccessToken(s)?new w("TOKEN_REFRESHED"):(console.warn("[ApiClient] Token refresh failed, clearing tokens and redirecting"),this.clearAuthTokens(),window.location.href="/login",new w("Session expired. Please login again."))}catch(i){throw i instanceof w&&i.message==="TOKEN_REFRESHED"?i:(console.error("[ApiClient] Token refresh failed:",i),this.clearAuthTokens(),window.location.href="/login",new w("Session expired. Please login again."))}else console.warn("[ApiClient] No refresh token available, redirecting to login"),this.clearAuthTokens(),window.location.href="/login"}throw console.error("[ApiClient] Request failed:",{status:e.status,statusText:e.statusText,url:e.url,message:t.message}),new x("API",t.message||`HTTP ${e.status}: ${e.statusText}`)}if(e.status===204)return{};try{const t=await e.json();return F(t)}catch(t){throw console.error("[ApiClient] Failed to parse response:",t),new p("Invalid response format from server")}}async refreshAccessToken(e){return this.refreshPromise?this.refreshPromise:(this.refreshPromise=(async()=>{try{const t=this.baseURL?`${this.baseURL}/auth/refresh`:"/auth/refresh",a=new URL(t,window.location.origin),s=await fetch(a.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(s.ok){const i=await s.json(),o=i.accessToken||i.data?.accessToken,c=i.refreshToken||i.data?.refreshToken;return o?(this.setAuthTokens(o,c),console.log("[ApiClient] Token refreshed successfully"),!0):(console.error("[ApiClient] Token refresh failed: Invalid response format",i),!1)}return console.warn("[ApiClient] Token refresh returned non-OK status:",s.status),!1}catch(t){return console.error("[ApiClient] Token refresh error:",t),!1}finally{this.refreshPromise=null}})(),this.refreshPromise)}async get(e,t){this.validateEndpoint(e,"get");try{const a=this.baseURL?`${this.baseURL}${e}`:e,s=new URL(a,window.location.origin);t&&Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&s.searchParams.append(o,String(t[o]))});const i=await fetch(s.toString(),{method:"GET",headers:this.getHeaders(),signal:AbortSignal.timeout(this.DEFAULT_TIMEOUT)});return await this.handleResponse(i)}catch(a){if(a instanceof w&&a.message==="TOKEN_REFRESHED")return this.get(e,t);throw console.error("[ApiClient.get] Error:",a),a}}async post(e,t,a){this.validateEndpoint(e,"post"),this.validateData(t,"post");try{const s=this.baseURL?`${this.baseURL}${e}`:e,i=new URL(s,window.location.origin),o=await fetch(i.toString(),{method:"POST",headers:this.getHeaders(a?.headers),body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(this.DEFAULT_TIMEOUT),...a});return await this.handleResponse(o)}catch(s){if(s instanceof w&&s.message==="TOKEN_REFRESHED")return this.post(e,t,a);throw console.error("[ApiClient.post] Error:",s),s}}async put(e,t){this.validateEndpoint(e,"put"),this.validateData(t,"put");try{const a=this.baseURL?`${this.baseURL}${e}`:e,s=new URL(a,window.location.origin),i=await fetch(s.toString(),{method:"PUT",headers:this.getHeaders(),body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(this.DEFAULT_TIMEOUT)});return await this.handleResponse(i)}catch(a){if(a instanceof w&&a.message==="TOKEN_REFRESHED")return this.put(e,t);throw console.error("[ApiClient.put] Error:",a),a}}async patch(e,t){this.validateEndpoint(e,"patch"),this.validateData(t,"patch");try{const a=this.baseURL?`${this.baseURL}${e}`:e,s=new URL(a,window.location.origin),i=await fetch(s.toString(),{method:"PATCH",headers:this.getHeaders(),body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(this.DEFAULT_TIMEOUT)});return await this.handleResponse(i)}catch(a){if(a instanceof w&&a.message==="TOKEN_REFRESHED")return this.patch(e,t);throw console.error("[ApiClient.patch] Error:",a),a}}async delete(e){this.validateEndpoint(e,"delete");try{const t=this.baseURL?`${this.baseURL}${e}`:e,a=new URL(t,window.location.origin),s=await fetch(a.toString(),{method:"DELETE",headers:this.getHeaders(),signal:AbortSignal.timeout(this.DEFAULT_TIMEOUT)});return await this.handleResponse(s)}catch(t){if(t instanceof w&&t.message==="TOKEN_REFRESHED")return this.delete(e);throw console.error("[ApiClient.delete] Error:",t),t}}async upload(e,t,a){if(this.validateEndpoint(e,"upload"),!t||!(t instanceof File))throw new p("[ApiClient.upload] Invalid file parameter");try{const s=new FormData;s.append("file",t),a&&Object.keys(a).forEach(u=>{s.append(u,String(a[u]))});const i=this.getAuthToken(),o={"X-Requested-With":"XMLHttpRequest"};i&&(o.Authorization=`Bearer ${i}`);const c=this.baseURL?`${this.baseURL}${e}`:e,l=new URL(c,window.location.origin),d=await fetch(l.toString(),{method:"POST",headers:o,body:s,signal:AbortSignal.timeout(6e4)});return await this.handleResponse(d)}catch(s){if(s instanceof w&&s.message==="TOKEN_REFRESHED")return this.upload(e,t,a);throw console.error("[ApiClient.upload] Error:",s),s}}async healthCheck(){try{return await(await fetch(`${L()}/api/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(this.HEALTH_CHECK_TIMEOUT)})).json()}catch(e){throw console.error("[ApiClient.healthCheck] Error:",e),new W("/health",5e3)}}async checkServiceHealth(e){const t=performance.now(),a=new Date().toISOString();try{const s=this.baseURL?`${this.baseURL}${e}`:e,i=new URL(s,window.location.origin),o=await fetch(i.toString(),{method:"HEAD",headers:this.getHeaders(),signal:AbortSignal.timeout(this.HEALTH_CHECK_TIMEOUT)}),c=Math.round(performance.now()-t);return o.ok?{status:c>2e3?"degraded":"online",latency:c,lastChecked:a}:{status:"offline",latency:c,lastChecked:a,error:`HTTP ${o.status}`}}catch(s){return{status:"offline",lastChecked:a,error:s.message||"Network error"}}}async checkSystemHealth(){const e=[{name:"cases",endpoint:"/cases"},{name:"docket",endpoint:"/docket"},{name:"documents",endpoint:"/documents"},{name:"evidence",endpoint:"/evidence"},{name:"billing",endpoint:"/billing/invoices"},{name:"users",endpoint:"/users"},{name:"pleadings",endpoint:"/pleadings"},{name:"motions",endpoint:"/motions"},{name:"parties",endpoint:"/parties"},{name:"clauses",endpoint:"/clauses"},{name:"calendar",endpoint:"/calendar"},{name:"trustAccounts",endpoint:"/billing/trust-accounts"},{name:"legalHolds",endpoint:"/legal-holds/health"},{name:"depositions",endpoint:"/depositions/health"},{name:"conflictChecks",endpoint:"/compliance/conflict-checks"},{name:"auditLogs",endpoint:"/audit-logs"},{name:"discovery",endpoint:"/discovery"},{name:"discoveryEvidence",endpoint:"/discovery/evidence"},{name:"compliance",endpoint:"/compliance"},{name:"tasks",endpoint:"/tasks"},{name:"reports",endpoint:"/reports"},{name:"hr",endpoint:"/hr"},{name:"workflow",endpoint:"/workflow/templates"},{name:"trial",endpoint:"/trial"},{name:"search",endpoint:"/search"},{name:"knowledge",endpoint:"/knowledge"},{name:"messenger",endpoint:"/messenger"},{name:"notifications",endpoint:"/notifications"},{name:"warRoom",endpoint:"/war-room/health"},{name:"webhooks",endpoint:"/webhooks/health"},{name:"versioning",endpoint:"/versioning/health"},{name:"sync",endpoint:"/sync/health"},{name:"queryWorkbench",endpoint:"/query-workbench/health"},{name:"schema",endpoint:"/schema/health"},{name:"monitoring",endpoint:"/monitoring/health"},{name:"ocr",endpoint:"/ocr/health"},{name:"risks",endpoint:"/risks/health"},{name:"pipelines",endpoint:"/pipelines/health"},{name:"production",endpoint:"/production/health"},{name:"processingJobs",endpoint:"/processing-jobs/health"},{name:"jurisdictions",endpoint:"/jurisdictions/health"},{name:"integrations",endpoint:"/integrations/health"},{name:"bluebook",endpoint:"/bluebook/health"},{name:"casePhases",endpoint:"/case-phases/health"},{name:"analytics",endpoint:"/analytics/health"},{name:"backups",endpoint:"/backups/health"},{name:"auth",endpoint:"/auth/health"}],t=await Promise.allSettled(e.map(async({name:l,endpoint:d})=>({name:l,health:await this.checkServiceHealth(d)}))),a={};let s=0,i=0,o=0;t.forEach(l=>{if(l.status==="fulfilled"){const{name:d,health:u}=l.value;a[d]=u,u.status==="online"?s++:u.status==="degraded"?i++:u.status==="offline"&&o++}});let c="unknown";return o===t.length?c="offline":o>0||i>t.length/2?c="degraded":s===t.length?c="online":c="degraded",{overall:c,services:a,timestamp:new Date().toISOString()}}}const r=new O;class V{constructor(){this.logInitialization()}logInitialization(){console.log("[DocumentsApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[DocumentsApiService.${t}] Invalid id parameter`)}validateFile(e,t){if(!e||!(e instanceof File))throw new Error(`[DocumentsApiService.${t}] Invalid file parameter`);if(e.size===0)throw new Error(`[DocumentsApiService.${t}] File cannot be empty`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[DocumentsApiService.${a}] Invalid ${t} parameter`)}validateArray(e,t,a){if(!e||!Array.isArray(e)||e.length===0)throw new Error(`[DocumentsApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{return(await r.get("/documents",e)).data}catch(t){throw console.error("[DocumentsApiService.getAll] Error:",t),new Error("Failed to fetch documents")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`/documents/${e}`)}catch(t){throw console.error("[DocumentsApiService.getById] Error:",t),new Error(`Failed to fetch document with id: ${e}`)}}async add(e){if(this.validateObject(e,"doc","add"),!e.title)throw new Error("[DocumentsApiService.add] Document title is required");try{const t={title:e.title,description:e.description,type:e.type,caseId:e.caseId,creatorId:e.creatorId||e.authorId||"00000000-0000-0000-0000-000000000000",status:e.status,filename:e.filename,filePath:e.filePath,mimeType:e.mimeType,fileSize:e.fileSize,checksum:e.checksum,author:e.author,tags:e.tags||[],customFields:e.customFields};return Object.keys(t).forEach(a=>{t[a]===void 0&&delete t[a]}),await r.post("/documents",t)}catch(t){throw console.error("[DocumentsApiService.add] Error:",t),new Error("Failed to create document")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"doc","update");try{return await r.put(`/documents/${e}`,t)}catch(a){throw console.error("[DocumentsApiService.update] Error:",a),new Error(`Failed to update document with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`/documents/${e}`)}catch(t){throw console.error("[DocumentsApiService.delete] Error:",t),new Error(`Failed to delete document with id: ${e}`)}}async upload(e,t){this.validateFile(e,"upload"),this.validateObject(t,"metadata","upload");try{return await r.upload("/documents/upload",e,t)}catch(a){throw console.error("[DocumentsApiService.upload] Error:",a),new Error("Failed to upload document")}}async bulkUpload(e,t){this.validateArray(e,"files","bulkUpload"),this.validateObject(t,"metadata","bulkUpload"),e.forEach((a,s)=>{if(!(a instanceof File))throw new Error(`[DocumentsApiService.bulkUpload] Invalid file at index ${s}`)});try{const a=new FormData;e.forEach(c=>a.append("files",c)),Object.keys(t).forEach(c=>a.append(c,t[c]));const s=localStorage.getItem("lexiflow_auth_token"),i={};s&&(i.Authorization=`Bearer ${s}`);const o=await fetch(`${r.getBaseUrl()}/documents/bulk-upload`,{method:"POST",headers:i,body:a});if(!o.ok){const c=await o.text().catch(()=>"Unknown error");throw new Error(`Bulk upload failed: ${o.status} ${o.statusText} - ${c}`)}return await o.json()}catch(a){throw console.error("[DocumentsApiService.bulkUpload] Error:",a),new Error("Failed to bulk upload documents")}}async download(e){this.validateId(e,"download");try{const t=await fetch(`${r.getBaseUrl()}/documents/${e}/download`,{headers:r.getHeaders()});if(!t.ok)throw new Error(`Download failed: ${t.status} ${t.statusText}`);return await t.blob()}catch(t){throw console.error("[DocumentsApiService.download] Error:",t),new Error(`Failed to download document with id: ${e}`)}}async preview(e){this.validateId(e,"preview");try{return(await r.get(`/documents/${e}/preview`)).url}catch(t){throw console.error("[DocumentsApiService.preview] Error:",t),new Error(`Failed to generate preview for document with id: ${e}`)}}async redact(e,t){this.validateId(e,"redact"),this.validateArray(t,"regions","redact");try{return await r.post(`/documents/${e}/redact`,{regions:t})}catch(a){throw console.error("[DocumentsApiService.redact] Error:",a),new Error(`Failed to redact document with id: ${e}`)}}async getVersions(e){this.validateId(e,"getVersions");try{return(await r.get(`/documents/${e}/versions`)).data}catch(t){throw console.error("[DocumentsApiService.getVersions] Error:",t),new Error(`Failed to fetch versions for document with id: ${e}`)}}async restoreVersion(e,t){this.validateId(e,"restoreVersion"),this.validateId(t,"restoreVersion");try{return await r.post(`/documents/${e}/versions/${t}/restore`,{})}catch(a){throw console.error("[DocumentsApiService.restoreVersion] Error:",a),new Error(`Failed to restore version ${t} for document ${e}`)}}async compareVersions(e,t,a){this.validateId(e,"compareVersions"),this.validateId(t,"compareVersions"),this.validateId(a,"compareVersions");try{return await r.get(`/documents/${e}/versions/${t}/compare?compareWith=${a}`)}catch(s){throw console.error("[DocumentsApiService.compareVersions] Error:",s),new Error(`Failed to compare versions for document ${e}`)}}async getByCaseId(e){return this.validateId(e,"getByCaseId"),this.getAll({caseId:e})}async getFolders(){try{return await r.get("/documents/folders/list")}catch(e){throw console.error("[DocumentsApiService.getFolders] Error:",e),new Error("Failed to fetch document folders")}}async getContent(e){this.validateId(e,"getContent");try{return(await r.get(`/documents/${e}/content`)).content}catch(t){throw console.error("[DocumentsApiService.getContent] Error:",t),new Error(`Failed to fetch content for document with id: ${e}`)}}}class J{baseUrl="/document-versions";async getByDocumentId(e){return r.get(`${this.baseUrl}/document/${e}`)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){const t=new FormData;return t.append("documentId",e.documentId),t.append("file",e.file),e.changes&&t.append("changes",e.changes),r.post(this.baseUrl,t)}async download(e){return r.get(`${this.baseUrl}/${e}/download`,{responseType:"blob"})}async compare(e,t){return r.get(`${this.baseUrl}/compare?v1=${e}&v2=${t}`)}async revertTo(e){return r.post(`${this.baseUrl}/${e}/revert`,{})}}class G{async getAll(e){return(await r.get("/processing-jobs",e)).data}async getById(e){return r.get(`/processing-jobs/${e}`)}async cancel(e){return r.post(`/processing-jobs/${e}/cancel`,{})}async retry(e){return r.post(`/processing-jobs/${e}/retry`,{})}async getStats(){return r.get("/processing-jobs/stats")}}class X{baseUrl="/ocr";async processDocument(e){return r.post(`${this.baseUrl}/process`,e)}async getJob(e){return r.get(`${this.baseUrl}/jobs/${e}`)}async getJobs(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.documentId&&t.append("documentId",e.documentId);const a=t.toString(),s=a?`${this.baseUrl}/jobs?${a}`:`${this.baseUrl}/jobs`;return r.get(s)}async cancelJob(e){return r.post(`${this.baseUrl}/jobs/${e}/cancel`,{})}}class Y{baseUrl="/monitoring";async getHealth(){return r.get(`${this.baseUrl}/health`)}async getMetrics(e){const t=new URLSearchParams;e?.metricName&&t.append("metricName",e.metricName),e?.startTime&&t.append("startTime",e.startTime),e?.endTime&&t.append("endTime",e.endTime);const a=t.toString(),s=a?`${this.baseUrl}/metrics?${a}`:`${this.baseUrl}/metrics`;return r.get(s)}async ping(){return r.get(`${this.baseUrl}/ping`)}}class Z{baseUrl="/health";async check(){return r.get(this.baseUrl)}async checkDatabase(){return r.get(`${this.baseUrl}/database`)}async checkRedis(){return r.get(`${this.baseUrl}/redis`)}async checkExternalServices(){return r.get(`${this.baseUrl}/external-services`)}}class ee{baseUrl="/analytics";async trackEvent(e){return r.post(`${this.baseUrl}/events`,e)}async getEventsByType(e){return r.get(`${this.baseUrl}/events/type/${e}`)}async getEventsByEntity(e,t){return r.get(`${this.baseUrl}/events/entity/${e}/${t}`)}async getEventsByUser(e){return r.get(`${this.baseUrl}/events/user/${e}`)}async getEventsByDateRange(e,t){return r.get(`${this.baseUrl}/events?startDate=${e}&endDate=${t}`)}async getCaseMetrics(){return r.get(`${this.baseUrl}/metrics/case`)}async getUserActivityMetrics(){return r.get(`${this.baseUrl}/metrics/user-activity`)}async getBillingMetrics(){return r.get(`${this.baseUrl}/metrics/billing`)}async getTimeSeriesData(e,t,a,s){const i=new URLSearchParams({startDate:t,endDate:a,...s&&{granularity:s}});return r.get(`${this.baseUrl}/timeseries/${e}?${i}`)}async getDashboards(e){return r.get(`${this.baseUrl}/dashboards?userId=${e}`)}async getPublicDashboards(){return r.get(`${this.baseUrl}/dashboards/public`)}async getDashboardById(e){return r.get(`${this.baseUrl}/dashboards/${e}`)}async createDashboard(e){return r.post(`${this.baseUrl}/dashboards`,e)}async updateDashboard(e,t){return r.put(`${this.baseUrl}/dashboards/${e}`,t)}async deleteDashboard(e){return r.delete(`${this.baseUrl}/dashboards/${e}`)}async generateReport(e){return r.post(`${this.baseUrl}/reports/generate`,e)}}class te{baseUrl="/audit-logs";async getAll(e){const t=new URLSearchParams;e?.userId&&t.append("userId",e.userId),e?.entityType&&t.append("entityType",e.entityType),e?.entityId&&t.append("entityId",e.entityId),e?.action&&t.append("action",e.action),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByEntity(e,t){return this.getAll({entityType:e,entityId:t})}async getByUser(e){return this.getAll({userId:e})}}class re{baseUrl="/versioning";async getVersions(e){const t=new URLSearchParams;e.entityId&&t.append("entityId",e.entityId),e.entityType&&t.append("entityType",e.entityType);const a=t.toString();return r.get(`${this.baseUrl}?${a}`)}async getVersion(e){return r.get(`${this.baseUrl}/${e}`)}async createVersion(e){return r.post(this.baseUrl,e)}async compareVersions(e,t){return r.get(`${this.baseUrl}/compare?v1=${e}&v2=${t}`)}async revertToVersion(e){return r.post(`${this.baseUrl}/${e}/revert`,{})}}class ae{baseUrl="/sync";async getStatus(){return r.get(`${this.baseUrl}/status`)}async triggerSync(){return r.post(`${this.baseUrl}/trigger`,{})}async getConflicts(){return r.get(`${this.baseUrl}/conflicts`)}async resolveConflict(e,t,a){return r.post(`${this.baseUrl}/conflicts/${e}/resolve`,{resolution:t,mergedData:a})}async getPendingChanges(){return r.get(`${this.baseUrl}/pending`)}}class se{baseUrl="/backups";async getAll(){return r.get(this.baseUrl)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async restore(e){return r.post(`${this.baseUrl}/${e}/restore`,{})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ne{baseUrl="/service-jobs";async getAll(e){const t=new URLSearchParams;e?.jobType&&t.append("jobType",e.jobType),e?.status&&t.append("status",e.status),e?.priority&&t.append("priority",e.priority);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async cancel(e){return r.post(`${this.baseUrl}/${e}/cancel`,{})}async retry(e){return r.post(`${this.baseUrl}/${e}/retry`,{})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ie{baseUrl="/metrics";async getCurrent(){return r.get(`${this.baseUrl}/current`)}async getHistory(e,t,a="5m"){return r.get(`${this.baseUrl}/history?start=${e}&end=${t}&interval=${a}`)}async getAlerts(){return r.get(`${this.baseUrl}/alerts`)}}const y={documents:new V,documentVersions:new J,processingJobs:new G,ocr:new X,monitoring:new Y,health:new Z,analytics:new ee,auditLogs:new te,versioning:new re,sync:new ae,backups:new se,serviceJobs:new ne,metrics:new ie};class oe{async search(e){return(await r.get("/search",e)).data}async getSuggestions(e,t=10){return r.get("/search/suggestions",{q:e,limit:t})}async searchInCase(e,t){return(await r.get(`/search/case/${e}`,{q:t})).data}async searchDocuments(e,t){return(await r.get("/search/documents",{q:e,...t})).data}async getStats(){return r.get("/search/stats")}async reindex(e){return r.post("/search/reindex",e||{})}async getReindexStatus(e){return r.get(`/search/reindex/${e}`)}async indexDocument(e){return r.post(`/search/index/document/${e}`,{})}async removeFromIndex(e){return r.delete(`/search/index/document/${e}`)}}class ce{baseUrl="/dashboard";async getAll(){return r.get(this.baseUrl)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getDefault(){return r.get(`${this.baseUrl}/default`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async setDefault(e){return r.post(`${this.baseUrl}/${e}/set-default`,{})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class le{baseUrl="/ai-ops";async execute(e){return r.post(`${this.baseUrl}/execute`,e)}async getAll(e){const t=new URLSearchParams;e?.operationType&&t.append("operationType",e.operationType),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}}class de{baseUrl="/analytics-dashboard";async getAll(e){const t=new URLSearchParams;e?.category&&t.append("category",e.category);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async getData(e,t){return r.post(`${this.baseUrl}/${e}/data`,{filters:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async getKPIs(e){const t=new URLSearchParams(e).toString();return r.get(`/analytics/dashboard/kpis?${t}`)}async getTeamPerformance(e){return r.get("/analytics/dashboard/team/performance",e)}async getFinancialMetrics(e){return r.get("/analytics/dashboard/financial",e)}async exportReport(e,t){return r.post("/analytics/dashboard/export",{format:e,...t})}}class ue{baseUrl="/billing-analytics";async getOverview(e,t){return r.get(`${this.baseUrl}/overview?start=${e}&end=${t}`)}async getByAttorney(e,t,a){return r.get(`${this.baseUrl}/attorney/${e}?start=${t}&end=${a}`)}async getByClient(e,t,a){return r.get(`${this.baseUrl}/client/${e}?start=${t}&end=${a}`)}async getForecast(e){return r.get(`${this.baseUrl}/forecast?months=${e}`)}}class he{baseUrl="/case-analytics";async getById(e){return r.get(`${this.baseUrl}/${e}`)}async compare(e){return r.post(`${this.baseUrl}/compare`,{caseIds:e})}async getTrends(e){return r.post(`${this.baseUrl}/trends`,e)}}class pe{baseUrl="/discovery-analytics";async getByCaseId(e){return r.get(`${this.baseUrl}/case/${e}`)}async getReviewMetrics(e,t){const a=t?`${this.baseUrl}/case/${e}/review-metrics?userId=${t}`:`${this.baseUrl}/case/${e}/review-metrics`;return r.get(a)}async getCostProjection(e){return r.get(`${this.baseUrl}/case/${e}/cost-projection`)}}class ye{baseUrl="/outcome-predictions";async predict(e,t){return r.post(`${this.baseUrl}/predict`,{caseId:e,predictionType:t})}async getByCaseId(e){return r.get(`${this.baseUrl}/case/${e}`)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getPredictions(){return r.get(this.baseUrl)}}class ge{baseUrl="/judge-stats";async getAll(){return r.get(this.baseUrl)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async search(e){const t=new URLSearchParams;e.judgeName&&t.append("judgeName",e.judgeName),e.court&&t.append("court",e.court);const a=t.toString(),s=a?`${this.baseUrl}/search?${a}`:this.baseUrl;return r.get(s)}}class we{baseUrl="/bluebook";async parseCitation(e){return r.post(`${this.baseUrl}/parse`,{citation:e})}async formatCitation(e,t){return r.post("/bluebook/format",{citation:e,...t})}async validateCitation(e,t){return r.post("/bluebook/validate",{citation:e,expectedType:t})}async getCitationHistory(e){const t=e?{documentId:e}:{};return r.get(`${this.baseUrl}/history`,t)}async getTemplates(e){const t=e?{type:e}:{};return r.get(`${this.baseUrl}/templates`,t)}async batchFormat(e){return r.post("/bluebook/batch",e)}async generateTableOfAuthorities(e){return r.post("/bluebook/table-of-authorities",{citations:e})}}class be{baseUrl="/knowledge";async getAll(e){const t=new URLSearchParams;e?.category&&t.append("category",e.category),e?.status&&t.append("status",e.status),e?.search&&t.append("search",e.search);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async search(e){return this.getAll({search:e,status:"published"})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class $e{baseUrl="/citations";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.documentId&&t.append("documentId",e.documentId),e?.citationType&&t.append("citationType",e.citationType),e?.jurisdiction&&t.append("jurisdiction",e.jurisdiction);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async validate(e){return r.post(`${this.baseUrl}/validate`,{citationText:e})}async shepardize(e){return r.post(`${this.baseUrl}/${e}/shepardize`,{})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ve{baseUrl="/clauses";async getAll(e){const t=new URLSearchParams;e?.category&&t.append("category",e.category),e?.clauseType&&t.append("clauseType",e.clauseType),e?.jurisdiction&&t.append("jurisdiction",e.jurisdiction),e?.search&&t.append("search",e.search);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async render(e,t){return r.post(`${this.baseUrl}/${e}/render`,{variables:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}const me={async getAll(n){try{const e=new URLSearchParams;n?.system&&e.append("system",n.system),n?.search&&e.append("search",n.search);const t=`/jurisdictions${e.toString()?"?"+e.toString():""}`;return await r.get(t)}catch(e){return console.error("Failed to fetch jurisdictions:",e),[]}},async getById(n){try{return await r.get(`/jurisdictions/${n}`)}catch(e){return console.error(`Failed to fetch jurisdiction ${n}:`,e),null}},async getFederal(){try{return await r.get("/jurisdictions/federal")}catch(n){return console.error("Failed to fetch federal courts:",n),[]}},async getState(){try{return await r.get("/jurisdictions/state")}catch(n){return console.error("Failed to fetch state courts:",n),[]}},async getRegulatory(){try{return await r.get("/jurisdictions/regulatory")}catch(n){return console.error("Failed to fetch regulatory bodies:",n),[]}},async getInternational(){try{return await r.get("/jurisdictions/international")}catch(n){return console.error("Failed to fetch international treaties:",n),[]}},async getArbitration(){try{return await r.get("/jurisdictions/arbitration")}catch(n){return console.error("Failed to fetch arbitration providers:",n),[]}},async getLocal(){try{return await r.get("/jurisdictions/local")}catch(n){return console.error("Failed to fetch local rules:",n),[]}},async getMapNodes(){try{return await r.get("/jurisdictions/map-nodes")}catch(n){return console.error("Failed to fetch jurisdiction map nodes:",n),[]}},async create(n){try{return await r.post("/jurisdictions",n)}catch(e){return console.error("Failed to create jurisdiction:",e),null}},async update(n,e){try{return await r.put(`/jurisdictions/${n}`,e)}catch(t){return console.error(`Failed to update jurisdiction ${n}:`,t),null}},async delete(n){try{return await r.delete(`/jurisdictions/${n}`),!0}catch(e){return console.error(`Failed to delete jurisdiction ${n}:`,e),!1}},async getRules(n){try{return n?await r.get(`/jurisdictions/${n}/rules`):await r.get("/jurisdictions/rules")}catch(e){return console.error("Failed to fetch jurisdiction rules:",e),[]}},async getRuleById(n){try{return await r.get(`/jurisdictions/rules/${n}`)}catch(e){return console.error(`Failed to fetch rule ${n}:`,e),null}},async searchRules(n,e){try{const t=new URLSearchParams({q:n});return e&&t.append("jurisdictionId",e),await r.get(`/jurisdictions/rules/search?${t.toString()}`)}catch(t){return console.error("Failed to search jurisdiction rules:",t),[]}},async createRule(n){try{return await r.post("/jurisdictions/rules",n)}catch(e){return console.error("Failed to create jurisdiction rule:",e),null}},async updateRule(n,e){try{return await r.put(`/jurisdictions/rules/${n}`,e)}catch(t){return console.error(`Failed to update rule ${n}:`,t),null}},async deleteRule(n){try{return await r.delete(`/jurisdictions/rules/${n}`),!0}catch(e){return console.error(`Failed to delete rule ${n}:`,e),!1}}},Ae=me,h={search:new oe,dashboard:new ce,aiOps:new le,analyticsDashboard:new de,billingAnalytics:new ue,caseAnalytics:new he,discoveryAnalytics:new pe,outcomePredictions:new ye,judgeStats:new ge,bluebook:new we,knowledge:new be,citations:new $e,clauses:new ve,jurisdiction:Ae};class Se{async login(e,t){const a=await r.post("/auth/login",{email:e,password:t});return r.setAuthTokens(a.accessToken,a.refreshToken),a}async register(e){const t=await r.post("/auth/register",e);return r.setAuthTokens(t.accessToken,t.refreshToken),t}async logout(){r.clearAuthTokens()}async getCurrentUser(){return r.get("/auth/profile")}async refreshToken(){const e=localStorage.getItem("lexiflow_refresh_token");if(!e)throw new Error("No refresh token available");const t=await r.post("/auth/refresh",{refreshToken:e});return r.setAuthTokens(t.accessToken,t.refreshToken),t}async forgotPassword(e){return r.post("/auth/forgot-password",{email:e})}async resetPassword(e,t){return r.post("/auth/reset-password",{token:e,newPassword:t})}async changePassword(e,t){return r.post("/auth/change-password",{currentPassword:e,newPassword:t})}async enableMFA(){return r.post("/auth/enable-mfa",{})}async verifyMFA(e){return r.post("/auth/verify-mfa",{code:e})}async disableMFA(){return r.post("/auth/disable-mfa",{})}}class fe{baseUrl="/users";constructor(){this.logInitialization()}logInitialization(){console.log("[UsersApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[UsersApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[UsersApiService.${a}] Invalid ${t} parameter`)}validateEmail(e,t){if(!e||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(`[UsersApiService.${t}] Invalid email format`)}async getAll(e){try{const t=new URLSearchParams;e?.role&&t.append("role",e.role),e?.department&&t.append("department",e.department),e?.isActive!==void 0&&t.append("isActive",String(e.isActive)),e?.search&&t.append("search",e.search);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return(await r.get(s)).data}catch(t){throw console.error("[UsersApiService.getAll] Error:",t),new Error("Failed to fetch users")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[UsersApiService.getById] Error:",t),new Error(`Failed to fetch user with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),this.validateEmail(e.email,"create"),!e.firstName||!e.lastName)throw new Error("[UsersApiService.create] firstName and lastName are required");if(!e.password||e.password.length<8)throw new Error("[UsersApiService.create] password must be at least 8 characters");if(!e.role)throw new Error("[UsersApiService.create] role is required");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[UsersApiService.create] Error:",t),new Error("Failed to create user")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update"),t.email&&this.validateEmail(t.email,"update");try{return await r.patch(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[UsersApiService.update] Error:",a),new Error(`Failed to update user with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[UsersApiService.delete] Error:",t),new Error(`Failed to delete user with id: ${e}`)}}async changePassword(e,t){if(this.validateId(e,"changePassword"),this.validateObject(t,"data","changePassword"),!t.currentPassword||!t.newPassword)throw new Error("[UsersApiService.changePassword] currentPassword and newPassword are required");if(t.newPassword.length<8)throw new Error("[UsersApiService.changePassword] newPassword must be at least 8 characters");try{await r.post(`${this.baseUrl}/${e}/change-password`,t)}catch(a){throw console.error("[UsersApiService.changePassword] Error:",a),new Error("Failed to change password")}}async activate(e){this.validateId(e,"activate");try{return await r.post(`${this.baseUrl}/${e}/activate`,{})}catch(t){throw console.error("[UsersApiService.activate] Error:",t),new Error(`Failed to activate user with id: ${e}`)}}async deactivate(e){this.validateId(e,"deactivate");try{return await r.post(`${this.baseUrl}/${e}/deactivate`,{})}catch(t){throw console.error("[UsersApiService.deactivate] Error:",t),new Error(`Failed to deactivate user with id: ${e}`)}}async getStatistics(){try{return await r.get(`${this.baseUrl}/statistics`)}catch(e){throw console.error("[UsersApiService.getStatistics] Error:",e),new Error("Failed to fetch user statistics")}}async getActive(){return this.getAll({isActive:!0})}async getByRole(e){if(!e)throw new Error("[UsersApiService.getByRole] role is required");return this.getAll({role:e})}async getByDepartment(e){if(!e)throw new Error("[UsersApiService.getByDepartment] department is required");return this.getAll({department:e})}}class Ue{async getAll(){return(await r.get("/admin/api-keys")).data}async getById(e){return r.get(`/admin/api-keys/${e}`)}async create(e){return r.post("/admin/api-keys",e)}async revoke(e){return r.patch(`/admin/api-keys/${e}/revoke`,{})}async delete(e){await r.delete(`/admin/api-keys/${e}`)}async getAvailableScopes(){return r.get("/admin/api-keys/scopes")}}class Ee{baseUrl="/permissions";async getRolePermissions(e){return r.get(`${this.baseUrl}/roles/${e}`)}async updateRolePermissions(e,t){return r.put(`${this.baseUrl}/roles/${e}`,{permissions:t})}async checkPermission(e,t,a){return r.post(`${this.baseUrl}/check`,{userId:e,resource:t,action:a})}async getUserPermissions(e){return r.get(`${this.baseUrl}/users/${e}`)}}class Ie{baseUrl="/ethical-walls";async getAll(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.userId&&t.append("userId",e.userId),e?.caseId&&t.append("caseId",e.caseId);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async approve(e){return r.post(`${this.baseUrl}/${e}/approve`,{})}async checkAccess(e,t,a){return r.post(`${this.baseUrl}/check-access`,{userId:e,resourceType:t,resourceId:a})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ke{baseUrl="/token-blacklist-admin";async getAll(e){const t=new URLSearchParams;e?.userId&&t.append("userId",e.userId),e?.reason&&t.append("reason",e.reason);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async blacklist(e){return r.post(this.baseUrl,e)}async check(e){return r.post(`${this.baseUrl}/check`,{token:e})}async cleanup(){return r.post(`${this.baseUrl}/cleanup`,{})}}const S={auth:new Se,users:new fe,apiKeys:new Ue,permissions:new Ee,ethicalWalls:new Ie,tokenBlacklist:new ke};class Te{constructor(){this.logInitialization()}logInitialization(){console.log("[BillingApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[BillingApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[BillingApiService.${a}] Invalid ${t} parameter`)}validateArray(e,t,a){if(!e||!Array.isArray(e)||e.length===0)throw new Error(`[BillingApiService.${a}] Invalid ${t} parameter`)}async getTimeEntries(e){try{if(e?.caseId){const a=await r.get(`/billing/time-entries/case/${e.caseId}`);return Array.isArray(a)?a:a.data||[]}const t=await r.get("/billing/time-entries");return Array.isArray(t)?t:t.data||[]}catch(t){throw console.error("[BillingApiService.getTimeEntries] Error:",t),new Error("Failed to fetch time entries")}}async getTimeEntryById(e){this.validateId(e,"getTimeEntryById");try{return await r.get(`/billing/time-entries/${e}`)}catch(t){throw console.error("[BillingApiService.getTimeEntryById] Error:",t),new Error(`Failed to fetch time entry with id: ${e}`)}}async addTimeEntry(e){if(this.validateObject(e,"entry","addTimeEntry"),!e.caseId)throw new Error("[BillingApiService.addTimeEntry] caseId is required");if(!e.date)throw new Error("[BillingApiService.addTimeEntry] date is required");if(!e.duration)throw new Error("[BillingApiService.addTimeEntry] duration is required");try{const t={caseId:e.caseId,userId:e.userId||e.createdBy,date:e.date,duration:e.duration,description:e.description,activity:e.activity,ledesCode:e.ledesCode,rate:e.rate||0,status:e.status,billable:e.billable,rateTableId:e.rateTableId,internalNotes:e.internalNotes,taskCode:e.taskCode};return Object.keys(t).forEach(a=>{t[a]===void 0&&delete t[a]}),await r.post("/billing/time-entries",t)}catch(t){throw console.error("[BillingApiService.addTimeEntry] Error:",t),new Error("Failed to create time entry")}}async addBulkTimeEntries(e){this.validateArray(e,"entries","addBulkTimeEntries");try{return await r.post("/billing/time-entries/bulk",{entries:e})}catch(t){throw console.error("[BillingApiService.addBulkTimeEntries] Error:",t),new Error("Failed to create bulk time entries")}}async updateTimeEntry(e,t){this.validateId(e,"updateTimeEntry"),this.validateObject(t,"entry","updateTimeEntry");try{return await r.put(`/billing/time-entries/${e}`,t)}catch(a){throw console.error("[BillingApiService.updateTimeEntry] Error:",a),new Error(`Failed to update time entry with id: ${e}`)}}async approveTimeEntry(e){this.validateId(e,"approveTimeEntry");try{return await r.put(`/billing/time-entries/${e}/approve`,{})}catch(t){throw console.error("[BillingApiService.approveTimeEntry] Error:",t),new Error(`Failed to approve time entry with id: ${e}`)}}async billTimeEntry(e,t){this.validateId(e,"billTimeEntry"),this.validateId(t,"billTimeEntry");try{return await r.put(`/billing/time-entries/${e}/bill`,{invoiceId:t})}catch(a){throw console.error("[BillingApiService.billTimeEntry] Error:",a),new Error(`Failed to bill time entry with id: ${e}`)}}async getUnbilledTimeEntries(e){this.validateId(e,"getUnbilledTimeEntries");try{return(await r.get(`/billing/time-entries/case/${e}/unbilled`)).data}catch(t){throw console.error("[BillingApiService.getUnbilledTimeEntries] Error:",t),new Error(`Failed to fetch unbilled time entries for case: ${e}`)}}async getTimeEntryTotals(e){this.validateId(e,"getTimeEntryTotals");try{return await r.get(`/billing/time-entries/case/${e}/totals`)}catch(t){throw console.error("[BillingApiService.getTimeEntryTotals] Error:",t),new Error(`Failed to fetch time entry totals for case: ${e}`)}}async deleteTimeEntry(e){this.validateId(e,"deleteTimeEntry");try{await r.delete(`/billing/time-entries/${e}`)}catch(t){throw console.error("[BillingApiService.deleteTimeEntry] Error:",t),new Error(`Failed to delete time entry with id: ${e}`)}}async getInvoices(e){try{return(await r.get("/billing/invoices",e)).data}catch{return console.warn("[BillingApiService.getInvoices] Invoices endpoint not available, returning empty array"),[]}}async createInvoice(e){this.validateObject(e,"data","createInvoice");try{return await r.post("/billing/invoices",e)}catch(t){throw console.error("[BillingApiService.createInvoice] Error:",t),new Error("Failed to create invoice")}}async updateInvoice(e,t){this.validateId(e,"updateInvoice"),this.validateObject(t,"data","updateInvoice");try{return await r.put(`/billing/invoices/${e}`,t)}catch(a){throw console.error("[BillingApiService.updateInvoice] Error:",a),new Error(`Failed to update invoice with id: ${e}`)}}async sendInvoice(e){this.validateId(e,"sendInvoice");try{return await r.post(`/billing/invoices/${e}/send`,{})}catch(t){throw console.error("[BillingApiService.sendInvoice] Error:",t),new Error(`Failed to send invoice with id: ${e}`)}}async getTrustAccounts(e){try{const t=await r.get("/billing/trust-accounts",e);return Array.isArray(t)?t:[]}catch{return console.warn("[BillingApiService.getTrustAccounts] Trust accounts endpoint not available, returning empty array"),[]}}async getTrustAccount(e){return this.validateId(e,"getTrustAccount"),await r.get(`/billing/trust-accounts/${e}`)}async createTrustAccount(e){return await r.post("/billing/trust-accounts",e)}async updateTrustAccount(e,t){return this.validateId(e,"updateTrustAccount"),await r.patch(`/billing/trust-accounts/${e}`,t)}async deleteTrustAccount(e){this.validateId(e,"deleteTrustAccount"),await r.delete(`/billing/trust-accounts/${e}`)}async getTrustTransactions(e,t){this.validateId(e,"getTrustTransactions");try{const a=await r.get(`/billing/trust-accounts/${e}/transactions`,t);return Array.isArray(a)?a:[]}catch{return console.warn("[BillingApiService.getTrustTransactions] Transactions endpoint not available, returning empty array"),[]}}async createTrustTransaction(e,t,a){return this.validateId(e,"createTrustTransaction"),await r.post(`/billing/trust-accounts/${e}/transaction`,{...t,createdBy:a})}async depositTrustFunds(e,t,a){return this.validateId(e,"depositTrustFunds"),await r.post(`/billing/trust-accounts/${e}/deposit`,{...t,createdBy:a})}async withdrawTrustFunds(e,t,a){return this.validateId(e,"withdrawTrustFunds"),await r.post(`/billing/trust-accounts/${e}/withdraw`,{...t,createdBy:a})}async getTrustAccountBalance(e){return this.validateId(e,"getTrustAccountBalance"),await r.get(`/billing/trust-accounts/${e}/balance`)}async getLowBalanceTrustAccounts(e){try{return await r.get("/billing/trust-accounts/low-balance",{threshold:e})}catch{return console.warn("[BillingApiService.getLowBalanceTrustAccounts] Endpoint not available, returning empty array"),[]}}async getWIPStats(){try{return await r.get("/billing/wip-stats")}catch{return console.warn("[BillingApiService.getWIPStats] WIP stats endpoint not available, returning empty array"),[]}}async getRealizationStats(){try{return await r.get("/billing/realization-stats")}catch{return console.warn("[BillingApiService.getRealizationStats] Realization stats endpoint not available, returning default"),[{name:"Billed",value:0,color:"#10b981"},{name:"Write-off",value:100,color:"#ef4444"}]}}async getRates(e){this.validateId(e,"getRates");try{return await r.get(`/billing/rates/${e}`)}catch{return console.warn("[BillingApiService.getRates] Rates endpoint not available, returning empty array"),[]}}async getOverviewStats(){try{return await r.get("/billing/overview-stats")}catch{return console.warn("[BillingApiService.getOverviewStats] Overview stats endpoint not available, returning default"),{realization:92.4,totalBilled:482e3,month:"March 2024"}}}async getTopAccounts(){try{return(await r.get("/clients",{sortBy:"totalBilled",sortOrder:"desc",limit:4})).data}catch{return console.warn("[BillingApiService.getTopAccounts] Top accounts endpoint not available, returning empty array"),[]}}}class Ce{async getAll(e){return(await r.get("/billing/time-entries",e)).data}async getById(e){return r.get(`/billing/time-entries/${e}`)}async getUnbilledByCase(e){return(await r.get(`/billing/time-entries/case/${e}/unbilled`)).data}async getTotalsByCase(e){return r.get(`/billing/time-entries/case/${e}/totals`)}async getByUser(e){return(await r.get(`/billing/time-entries/user/${e}`)).data}async create(e){return r.post("/billing/time-entries",e)}async createBulk(e){return r.post("/billing/time-entries/bulk",e)}async update(e,t){return r.put(`/billing/time-entries/${e}`,t)}async approve(e){return r.put(`/billing/time-entries/${e}/approve`,{})}async bill(e,t){return r.put(`/billing/time-entries/${e}/bill`,{invoiceId:t})}async approveBulk(e){return r.post("/billing/time-entries/bulk-approve",{ids:e})}async billBulk(e,t){return r.post("/billing/time-entries/bulk-bill",{ids:e,invoiceId:t})}async delete(e){await r.delete(`/billing/time-entries/${e}`)}async deleteBulk(e){return r.post("/billing/time-entries/bulk-delete",{ids:e})}}class De{async getAll(e){return(await r.get("/billing/invoices",e)).data}async getOverdue(){return(await r.get("/billing/invoices/overdue")).data}async getById(e){return r.get(`/billing/invoices/${e}`)}async getPdf(e){return r.get(`/billing/invoices/${e}/pdf`)}async create(e){return r.post("/billing/invoices",e)}async update(e,t){return r.put(`/billing/invoices/${e}`,t)}async send(e,t){return r.post(`/billing/invoices/${e}/send`,{recipients:t})}async recordPayment(e,t){return r.post(`/billing/invoices/${e}/record-payment`,t)}async delete(e){await r.delete(`/billing/invoices/${e}`)}async getStats(){return r.get("/billing/invoices/stats")}}class Fe{async getAll(e){return(await r.get("/billing/expenses",e)).data}async getByCaseId(e){return(await r.get("/billing/expenses",{caseId:e})).data}async getUnbilled(e){return(await r.get(`/billing/expenses/unbilled/${e}`)).data}async getById(e){return r.get(`/billing/expenses/${e}`)}async create(e){return r.post("/billing/expenses",e)}async update(e,t){return r.put(`/billing/expenses/${e}`,t)}async approve(e){return r.put(`/billing/expenses/${e}/approve`,{})}async bill(e,t){return r.put(`/billing/expenses/${e}/bill`,{invoiceId:t})}async delete(e){await r.delete(`/billing/expenses/${e}`)}async uploadReceipt(e,t){const a=new FormData;return a.append("file",t),r.post(`/billing/expenses/${e}/receipt`,a)}async getTotalsByCase(e){return r.get(`/billing/expenses/case/${e}/totals`)}}class Be{async getAll(e){return(await r.get("/billing/fee-agreements",e)).data}async getById(e){return r.get(`/billing/fee-agreements/${e}`)}async create(e){return r.post("/billing/fee-agreements",e)}async update(e,t){return r.patch(`/billing/fee-agreements/${e}`,t)}async delete(e){await r.delete(`/billing/fee-agreements/${e}`)}async activate(e){return r.patch(`/billing/fee-agreements/${e}/activate`,{})}async terminate(e,t){return r.patch(`/billing/fee-agreements/${e}/terminate`,{reason:t})}}class Re{async getAll(){return(await r.get("/billing/rates")).data}async getById(e){return r.get(`/billing/rates/${e}`)}async getActive(){return(await r.get("/billing/rates/active")).data}async getDefault(e){return r.get(`/billing/rates/default/${e}`)}async getUserRate(e,t){return r.get(`/billing/rates/user-rate/${e}/${t}`)}async create(e){return r.post("/billing/rates",e)}async update(e,t){return r.put(`/billing/rates/${e}`,t)}async delete(e){await r.delete(`/billing/rates/${e}`)}}class Pe{baseUrl="/billing/trust-accounts";async getAll(e){const t=new URLSearchParams;e?.clientId&&t.append("clientId",e.clientId),e?.status&&t.append("status",e.status),e?.accountType&&t.append("accountType",e.accountType);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async getTransactions(e,t){const a=new URLSearchParams;t?.startDate&&a.append("startDate",t.startDate),t?.endDate&&a.append("endDate",t.endDate);const s=a.toString(),i=s?`${this.baseUrl}/${e}/transactions?${s}`:`${this.baseUrl}/${e}/transactions`;return r.get(i)}async deposit(e,t){return r.post(`${this.baseUrl}/${e}/deposit`,t)}async withdraw(e,t){return r.post(`${this.baseUrl}/${e}/withdraw`,t)}async reconcile(e,t){return r.post(`${this.baseUrl}/${e}/reconcile`,t)}async getComplianceReport(e,t,a){return r.get(`${this.baseUrl}/${e}/compliance-report?start=${t}&end=${a}`)}async getClientLedger(e,t,a,s){return r.get(`${this.baseUrl}/${e}/client-ledger/${t}?start=${a}&end=${s}`)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}const $={billing:new Te,timeEntries:new Ce,invoices:new De,expenses:new Fe,feeAgreements:new Be,rateTables:new Re,trustAccounts:new Pe};var Le=(n=>(n.INDIVIDUAL="individual",n.CORPORATION="corporation",n.PARTNERSHIP="partnership",n.LLC="llc",n.NONPROFIT="nonprofit",n.GOVERNMENT="government",n.OTHER="other",n))(Le||{}),q=(n=>(n.ACTIVE="active",n.INACTIVE="inactive",n.PROSPECTIVE="prospective",n.FORMER="former",n.BLOCKED="blocked",n))(q||{}),Oe=(n=>(n.NET_15="net_15",n.NET_30="net_30",n.NET_45="net_45",n.NET_60="net_60",n.DUE_ON_RECEIPT="due_on_receipt",n.CUSTOM="custom",n))(Oe||{});class qe{baseUrl="/clients";constructor(){this.logInitialization()}logInitialization(){console.log("[ClientsApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[ClientsApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[ClientsApiService.${a}] Invalid ${t} parameter`)}validateEmail(e,t){if(!e||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(`[ClientsApiService.${t}] Invalid email format`)}async getAll(e){try{const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.clientType&&t.append("clientType",e.clientType),e?.search&&t.append("search",e.search);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return await r.get(s)}catch(t){throw console.error("[ClientsApiService.getAll] Error:",t),new Error("Failed to fetch clients")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[ClientsApiService.getById] Error:",t),new Error(`Failed to fetch client with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),!e.name)throw new Error("[ClientsApiService.create] name is required");e.email&&this.validateEmail(e.email,"create");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[ClientsApiService.create] Error:",t),new Error("Failed to create client")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update"),t.email&&this.validateEmail(t.email,"update");try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[ClientsApiService.update] Error:",a),new Error(`Failed to update client with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[ClientsApiService.delete] Error:",t),new Error(`Failed to delete client with id: ${e}`)}}async getVipClients(){try{return await r.get(`${this.baseUrl}/vip`)}catch(e){throw console.error("[ClientsApiService.getVipClients] Error:",e),new Error("Failed to fetch VIP clients")}}async getActiveClients(){return this.getAll({status:q.ACTIVE})}async runConflictCheck(e){this.validateId(e,"runConflictCheck");try{return await r.post(`${this.baseUrl}/${e}/conflict-check`,{})}catch(t){throw console.error("[ClientsApiService.runConflictCheck] Error:",t),new Error(`Failed to run conflict check for client: ${e}`)}}async updateRetainer(e,t,a){if(this.validateId(e,"updateRetainer"),t<0)throw new Error("[ClientsApiService.updateRetainer] retainerAmount must be a non-negative number");try{return await r.patch(`${this.baseUrl}/${e}/retainer`,{retainerAmount:t,retainerBalance:a,hasRetainer:t>0})}catch(s){throw console.error("[ClientsApiService.updateRetainer] Error:",s),new Error(`Failed to update retainer for client: ${e}`)}}async getStatistics(){try{return await r.get(`${this.baseUrl}/statistics`)}catch(e){throw console.error("[ClientsApiService.getStatistics] Error:",e),new Error("Failed to fetch client statistics")}}async getCases(e){this.validateId(e,"getCases");try{return await r.get(`${this.baseUrl}/${e}/cases`)}catch(t){throw console.error("[ClientsApiService.getCases] Error:",t),new Error(`Failed to fetch cases for client: ${e}`)}}async getInvoices(e){this.validateId(e,"getInvoices");try{return await r.get(`${this.baseUrl}/${e}/invoices`)}catch(t){throw console.error("[ClientsApiService.getInvoices] Error:",t),new Error(`Failed to fetch invoices for client: ${e}`)}}}class je{baseUrl="/communications";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.matterId&&t.append("matterId",e.matterId),e?.clientId&&t.append("clientId",e.clientId),e?.type&&t.append("type",e.type),e?.direction&&t.append("direction",e.direction),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Ne{baseUrl="/correspondence";constructor(){this.logInitialization()}logInitialization(){console.log("[CorrespondenceApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[CorrespondenceApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[CorrespondenceApiService.${a}] Invalid ${t} parameter`)}validateEmail(e,t){if(!e||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(`[CorrespondenceApiService.${t}] Invalid email format`)}async getAll(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.clientId&&t.append("clientId",e.clientId),e?.correspondenceType&&t.append("correspondenceType",e.correspondenceType),e?.status&&t.append("status",e.status),e?.search&&t.append("search",e.search),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return await r.get(s)}catch(t){throw console.error("[CorrespondenceApiService.getAll] Error:",t),new Error("Failed to fetch correspondence")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[CorrespondenceApiService.getById] Error:",t),new Error(`Failed to fetch correspondence with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),!e.subject)throw new Error("[CorrespondenceApiService.create] subject is required");if(!e.correspondenceType)throw new Error("[CorrespondenceApiService.create] correspondenceType is required");if(!e.date)throw new Error("[CorrespondenceApiService.create] date is required");e.recipients&&Array.isArray(e.recipients)&&e.recipients.forEach((t,a)=>{try{this.validateEmail(t,"create")}catch{throw new Error(`[CorrespondenceApiService.create] Invalid email at recipients[${a}]: ${t}`)}});try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[CorrespondenceApiService.create] Error:",t),new Error("Failed to create correspondence")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update"),t.recipients&&Array.isArray(t.recipients)&&t.recipients.forEach((a,s)=>{try{this.validateEmail(a,"update")}catch{throw new Error(`[CorrespondenceApiService.update] Invalid email at recipients[${s}]: ${a}`)}});try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[CorrespondenceApiService.update] Error:",a),new Error(`Failed to update correspondence with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[CorrespondenceApiService.delete] Error:",t),new Error(`Failed to delete correspondence with id: ${e}`)}}async getByCase(e){return this.validateId(e,"getByCase"),this.getAll({caseId:e})}async getByClient(e){return this.validateId(e,"getByClient"),this.getAll({clientId:e})}async updateStatus(e,t){if(this.validateId(e,"updateStatus"),!t)throw new Error("[CorrespondenceApiService.updateStatus] status is required");return this.update(e,{status:t})}}class xe{baseUrl="/messenger";async health(){return r.get(this.baseUrl)}async getContacts(e){return r.get(`${this.baseUrl}/contacts`,e)}async getConversations(e){return r.get(`${this.baseUrl}/conversations`,e)}async getConversation(e){return r.get(`${this.baseUrl}/conversations/${e}`)}async createConversation(e){return r.post(`${this.baseUrl}/conversations`,e)}async updateConversation(e,t){return r.put(`${this.baseUrl}/conversations/${e}`,t)}async deleteConversation(e){return r.delete(`${this.baseUrl}/conversations/${e}`)}async getMessages(e){return r.get(`${this.baseUrl}/conversations/${e}/messages`)}async sendMessage(e){return r.post(`${this.baseUrl}/messages`,e)}async markAsRead(e){return r.post(`${this.baseUrl}/messages/${e}/mark-read`,{})}async getUnreadCount(){return r.get(`${this.baseUrl}/unread-count`)}async getAll(e){return r.get(`${this.baseUrl}/conversations`,e)}async getById(e){return r.get(`${this.baseUrl}/conversations/${e}`)}async send(e){const t={conversationId:e.threadId||"",body:e.body||"",priority:e.priority,attachments:e.attachments};return this.sendMessage(t)}async delete(e){return this.deleteConversation(e)}}class We{baseUrl="/notifications";constructor(){this.logInitialization()}logInitialization(){console.log("[NotificationsApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[NotificationsApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[NotificationsApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{return(await r.get(this.baseUrl,e)).data}catch(t){throw console.error("[NotificationsApiService.getAll] Error:",t),new Error("Failed to fetch notifications")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[NotificationsApiService.getById] Error:",t),new Error(`Failed to fetch notification with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),!e.title)throw new Error("[NotificationsApiService.create] title is required");if(!e.message)throw new Error("[NotificationsApiService.create] message is required");if(!e.type)throw new Error("[NotificationsApiService.create] type is required");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[NotificationsApiService.create] Error:",t),new Error("Failed to create notification")}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[NotificationsApiService.delete] Error:",t),new Error(`Failed to delete notification with id: ${e}`)}}async markAsRead(e){this.validateId(e,"markAsRead");try{return await r.patch(`${this.baseUrl}/${e}/read`,{read:!0})}catch(t){throw console.error("[NotificationsApiService.markAsRead] Error:",t),new Error(`Failed to mark notification as read: ${e}`)}}async markAsUnread(e){this.validateId(e,"markAsUnread");try{return await r.patch(`${this.baseUrl}/${e}/read`,{read:!1})}catch(t){throw console.error("[NotificationsApiService.markAsUnread] Error:",t),new Error(`Failed to mark notification as unread: ${e}`)}}async markAllAsRead(){try{await r.post(`${this.baseUrl}/mark-all-read`,{})}catch(e){throw console.error("[NotificationsApiService.markAllAsRead] Error:",e),new Error("Failed to mark all notifications as read")}}async getUnreadCount(){try{return(await r.get(`${this.baseUrl}/unread-count`)).count}catch(e){throw console.error("[NotificationsApiService.getUnreadCount] Error:",e),new Error("Failed to fetch unread notification count")}}async getUnread(){return this.getAll({read:!1})}async deleteAllRead(){try{await r.post(`${this.baseUrl}/delete-all-read`,{})}catch(e){throw console.error("[NotificationsApiService.deleteAllRead] Error:",e),new Error("Failed to delete all read notifications")}}async getByType(e){return(await this.getAll()).filter(a=>a.type===e)}async getGrouped(){return this.getAll()}async remove(e){return this.delete(e)}async clearAll(){try{await r.post(`${this.baseUrl}/clear-all`,{})}catch(e){throw console.error("[NotificationsApiService.clearAll] Error:",e),new Error("Failed to clear all notifications")}}async subscribe(e){return console.log(`[NotificationsApiService] subscribe(${e}) - Not implemented (future WebSocket)`),Promise.resolve()}async unsubscribe(e){return console.log(`[NotificationsApiService] unsubscribe(${e}) - Not implemented (future WebSocket)`),Promise.resolve()}async add(e){return this.create(e)}}const T={clients:new qe,communications:new je,correspondence:new Ne,messaging:new xe,notifications:new We};class _e{baseUrl="/compliance";constructor(){this.logInitialization()}logInitialization(){console.log("[ComplianceApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[ComplianceApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[ComplianceApiService.${a}] Invalid ${t} parameter`)}validateCheckType(e,t){const a=["conflict","ethical_wall","regulatory","data_retention","security"];if(!e||!a.includes(e))throw new Error(`[ComplianceApiService.${t}] Invalid checkType. Must be one of: ${a.join(", ")}`)}async runCheck(e){this.validateObject(e,"data","runCheck"),this.validateCheckType(e.checkType,"runCheck");try{return await r.post(`${this.baseUrl}/checks`,e)}catch(t){throw console.error("[ComplianceApiService.runCheck] Error:",t),new Error("Failed to run compliance check")}}async getChecks(e){try{e?.checkType&&this.validateCheckType(e.checkType,"getChecks");const t=new URLSearchParams;e?.checkType&&t.append("checkType",e.checkType),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}/checks?${a}`:`${this.baseUrl}/checks`;return await r.get(s)}catch(t){throw console.error("[ComplianceApiService.getChecks] Error:",t),new Error("Failed to fetch compliance checks")}}async getCheckById(e){this.validateId(e,"getCheckById");try{return await r.get(`${this.baseUrl}/checks/${e}`)}catch(t){throw console.error("[ComplianceApiService.getCheckById] Error:",t),new Error(`Failed to fetch compliance check with id: ${e}`)}}async getEthicalWalls(){try{return await r.get(`${this.baseUrl}/ethical-walls`)}catch(e){throw console.error("[ComplianceApiService.getEthicalWalls] Error:",e),new Error("Failed to fetch ethical walls")}}async getEthicalWallById(e){this.validateId(e,"getEthicalWallById");try{return await r.get(`${this.baseUrl}/ethical-walls/${e}`)}catch(t){throw console.error("[ComplianceApiService.getEthicalWallById] Error:",t),new Error(`Failed to fetch ethical wall with id: ${e}`)}}async createEthicalWall(e){if(this.validateObject(e,"data","createEthicalWall"),!e.title)throw new Error("[ComplianceApiService.createEthicalWall] Title is required");if(!e.caseId)throw new Error("[ComplianceApiService.createEthicalWall] Case ID is required");try{return await r.post(`${this.baseUrl}/ethical-walls`,e)}catch(t){throw console.error("[ComplianceApiService.createEthicalWall] Error:",t),new Error("Failed to create ethical wall")}}async updateEthicalWall(e,t){this.validateId(e,"updateEthicalWall"),this.validateObject(t,"data","updateEthicalWall");try{return await r.put(`${this.baseUrl}/ethical-walls/${e}`,t)}catch(a){throw console.error("[ComplianceApiService.updateEthicalWall] Error:",a),new Error(`Failed to update ethical wall with id: ${e}`)}}async liftEthicalWall(e){this.validateId(e,"liftEthicalWall");try{return await r.post(`${this.baseUrl}/ethical-walls/${e}/lift`,{})}catch(t){throw console.error("[ComplianceApiService.liftEthicalWall] Error:",t),new Error(`Failed to lift ethical wall with id: ${e}`)}}async deleteEthicalWall(e){this.validateId(e,"deleteEthicalWall");try{await r.delete(`${this.baseUrl}/ethical-walls/${e}`)}catch(t){throw console.error("[ComplianceApiService.deleteEthicalWall] Error:",t),new Error(`Failed to delete ethical wall with id: ${e}`)}}}class ze{baseUrl="/api/v1/compliance/conflicts";async run(e){return r.post(`${this.baseUrl}/run`,e)}async getAll(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async approve(e,t){return r.post(`${this.baseUrl}/${e}/approve`,{notes:t})}async reject(e,t){return r.post(`${this.baseUrl}/${e}/reject`,{reason:t})}async resolve(e,t){return r.post(`${this.baseUrl}/${e}/resolve`,t)}async waive(e,t){return r.post(`${this.baseUrl}/${e}/waive`,t)}async check(e){return r.post(`${this.baseUrl}/check`,e)}}class Me{baseUrl="/reports";async generate(e){return r.post(`${this.baseUrl}/generate`,e)}async getAll(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.reportType&&t.append("reportType",e.reportType);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async download(e){return r.get(`${this.baseUrl}/${e}/download`,{responseType:"blob"})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async getTemplates(){return r.get(`${this.baseUrl}/templates`)}async getTemplateById(e){return r.get(`${this.baseUrl}/templates/${e}`)}async createTemplate(e){return r.post(`${this.baseUrl}/templates`,e)}async updateTemplate(e,t){return r.put(`${this.baseUrl}/templates/${e}`,t)}async deleteTemplate(e){return r.delete(`${this.baseUrl}/templates/${e}`)}}class Qe{baseUrl="/compliance-reporting";async generate(e){return r.post(`${this.baseUrl}/generate`,e)}async getAll(e){const t=new URLSearchParams;e?.reportType&&t.append("reportType",e.reportType),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async approve(e){return r.post(`${this.baseUrl}/${e}/approve`,{})}async export(e,t){return(await fetch(`/api${this.baseUrl}/${e}/export?format=${t}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).blob()}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}const C={compliance:new _e,conflictChecks:new ze,reports:new Me,complianceReporting:new Qe};class Ke{async getAll(e){const t=e?{caseId:e}:{};return(await r.get("/evidence",t)).data}async getById(e){return r.get(`/evidence/${e}`)}async add(e){const t={caseId:e.caseId,evidenceNumber:`EV-${Date.now()}`,title:e.title,description:e.description||"",evidenceType:e.type,status:e.status,collectionDate:e.collectionDate?new Date(e.collectionDate):void 0,collectionLocation:e.collectionLocation,collectedBy:e.collectedBy,currentCustodian:e.custodian,storageLocation:e.location,chainOfCustody:e.chainOfCustody,chainOfCustodyIntact:!0,filePath:e.location,fileHash:e.hash,fileSize:e.fileSize,batesNumber:e.batesNumber,exhibitNumber:e.exhibitNumber,isAdmitted:!1,admissibilityStatus:e.admissibility,relevanceScore:e.relevanceScore,tags:e.tags,metadata:{}};return Object.keys(t).forEach(a=>{t[a]===void 0&&delete t[a]}),r.post("/discovery/evidence",t)}async update(e,t){return r.patch(`/discovery/evidence/${e}`,t)}async delete(e){await r.delete(`/discovery/evidence/${e}`)}}class He{async getAll(e){const t=await r.get("/custodians",e);if(Array.isArray(t))return t;const a=t,s=a.items||a.data||[];return Array.isArray(s)?s:[]}async getById(e){return r.get(`/custodians/${e}`)}async create(e){return r.post("/custodians",e)}async update(e,t){return r.patch(`/custodians/${e}`,t)}async delete(e){await r.delete(`/custodians/${e}`)}async placeOnHold(e){return r.patch(`/custodians/${e}/hold`,{status:"On Hold",holdDate:new Date().toISOString()})}async release(e){return r.patch(`/custodians/${e}/release`,{status:"Released",releaseDate:new Date().toISOString()})}async getByCaseId(e){return this.getAll({caseId:e})}}class Ve{async getAll(e){const t=await r.get("/examinations",e);return"items"in t?t.items:t.data||[]}async getById(e){return r.get(`/examinations/${e}`)}async create(e){return r.post("/examinations",e)}async update(e,t){return r.patch(`/discovery/examinations/${e}`,t)}async delete(e){await r.delete(`/discovery/examinations/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}}class Je{baseUrl="/discovery/witnesses";async getAll(e){return r.get(this.baseUrl)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return r.get(`${this.baseUrl}/case/${e}`)}async getByType(e){return r.get(`${this.baseUrl}/type/${e}`)}async getByStatus(e){return r.get(`${this.baseUrl}/status/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Ge{baseUrl="/depositions";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.witnessId&&t.append("witnessId",e.witnessId),e?.status&&t.append("status",e.status),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return i&&typeof i=="object"&&"items"in i&&Array.isArray(i.items)?i.items:Array.isArray(i)?i:[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Xe{baseUrl="/legal-holds";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status),e?.custodianId&&t.append("custodianId",e.custodianId);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:i.items||[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async release(e){return r.post(`${this.baseUrl}/${e}/release`,{})}async sendReminder(e,t){return r.post(`${this.baseUrl}/${e}/remind`,{custodianIds:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Ye{baseUrl="/productions";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status),e?.type&&t.append("type",e.type);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:i.items||[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Ze{baseUrl="/discovery-requests";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.requestType&&t.append("requestType",e.requestType),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:i.items||[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class et{baseUrl="/esi-sources";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.custodianId&&t.append("custodianId",e.custodianId),e?.sourceType&&t.append("sourceType",e.sourceType),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:i.items||[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class tt{baseUrl="/privilege-log";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.productionId&&t.append("productionId",e.productionId),e?.privilegeType&&t.append("privilegeType",e.privilegeType);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:i.items||[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async bulkCreate(e){return r.post(`${this.baseUrl}/bulk`,{entries:e})}async export(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.productionId&&t.append("productionId",e.productionId);const a=t.toString(),s=a?`${this.baseUrl}/export?${a}`:`${this.baseUrl}/export`;return r.get(s,{responseType:"blob"})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class rt{baseUrl="/custodian-interviews";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.custodianId&&t.append("custodianId",e.custodianId),e?.status&&t.append("status",e.status),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:i.items||[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class at{baseUrl="/discovery";constructor(){console.log("[DiscoveryApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[DiscoveryApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[DiscoveryApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return await r.get(s)}catch(t){throw console.error("[DiscoveryApiService.getAll] Error:",t),new Error("Failed to fetch discovery processes")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[DiscoveryApiService.getById] Error:",t),new Error(`Failed to fetch discovery process with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),!e.caseId)throw new Error("[DiscoveryApiService.create] caseId is required");if(!e.name)throw new Error("[DiscoveryApiService.create] name is required");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[DiscoveryApiService.create] Error:",t),new Error("Failed to create discovery process")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update");try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[DiscoveryApiService.update] Error:",a),new Error(`Failed to update discovery process with id: ${e}`)}}async updatePhase(e,t){if(this.validateId(e,"updatePhase"),!t)throw new Error("[DiscoveryApiService.updatePhase] phase is required");try{return await r.patch(`${this.baseUrl}/${e}/phase`,{phase:t})}catch(a){throw console.error("[DiscoveryApiService.updatePhase] Error:",a),new Error(`Failed to update phase for discovery process with id: ${e}`)}}async getSummary(e){this.validateId(e,"getSummary");try{return await r.get(`${this.baseUrl}/${e}/summary`)}catch(t){throw console.error("[DiscoveryApiService.getSummary] Error:",t),new Error(`Failed to fetch summary for discovery process with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[DiscoveryApiService.delete] Error:",t),new Error(`Failed to delete discovery process with id: ${e}`)}}}const g={evidence:new Ke,custodians:new He,examinations:new Ve,witnesses:new Je,depositions:new Ge,legalHolds:new Xe,productions:new Ye,discoveryRequests:new Ze,esiSources:new et,privilegeLog:new tt,custodianInterviews:new rt,discovery:new at};class st{async syncDocket(e){return r.post("/integrations/pacer/sync",e)}async testConnection(e){return r.post("/integrations/pacer/test",e)}async getConfig(){return r.get("/integrations/pacer/config")}async updateConfig(e){return r.put("/integrations/pacer/config",e)}async getSyncHistory(e){return r.get(`/integrations/pacer/history/${e}`)}async scheduleSyncforCase(e,t){return r.post("/integrations/pacer/schedule",{caseId:e,...t})}}class nt{async getAll(e){return(await r.get("/webhooks",e)).data}async getById(e){return r.get(`/webhooks/${e}`)}async create(e){return r.post("/webhooks",e)}async update(e,t){return r.put(`/webhooks/${e}`,t)}async delete(e){await r.delete(`/webhooks/${e}`)}async test(e){return r.post(`/webhooks/${e}/test`,{})}async getDeliveries(e,t){return(await r.get(`/webhooks/${e}/deliveries`,t)).data}}class it{baseUrl="/integrations";async getAll(){return r.get(this.baseUrl)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async connect(e,t){return r.post(`${this.baseUrl}/${e}/connect`,t)}async disconnect(e){return r.post(`${this.baseUrl}/${e}/disconnect`,{})}async refreshCredentials(e){return r.post(`${this.baseUrl}/${e}/refresh`,{})}async sync(e){return r.post(`${this.baseUrl}/${e}/sync`,{})}async testConnection(e){return r.get(`${this.baseUrl}/${e}/test`)}}class ot{baseUrl="/organizations";async getAll(e){const t=new URLSearchParams;e?.search&&t.append("search",e.search);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByType(e){return r.get(`${this.baseUrl}/type/${e}`)}async getByStatus(e){return r.get(`${this.baseUrl}/status/${e}`)}async getByJurisdiction(e){return r.get(`${this.baseUrl}/jurisdiction/${e}`)}async search(e){return this.getAll({search:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ct{baseUrl="/external-api";async getAll(){return r.get(this.baseUrl)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async test(e){return r.post(`${this.baseUrl}/${e}/test`,{})}async getCallHistory(e,t){const a=t?`${this.baseUrl}/${e}/history?limit=${t}`:`${this.baseUrl}/${e}/history`;return r.get(a)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class lt{async getAll(e){console.log("[PipelinesApi] getAll called with filters:",e);try{return await r.get("/pipelines",e)}catch(t){return console.error("[PipelinesApi] Error fetching pipelines:",t),{data:[],total:0,page:1,limit:50,totalPages:0}}}async getById(e){return await r.get(`/pipelines/${e}`)}async create(e){return await r.post("/pipelines",e)}async update(e,t){return await r.put(`/pipelines/${e}`,t)}async delete(e){await r.delete(`/pipelines/${e}`)}async execute(e){return await r.post(`/pipelines/${e}/execute`,{})}async getStats(){try{return await r.get("/pipelines/stats")}catch{return{total:0,active:0,failed:0,paused:0,totalRecordsProcessed:0}}}}const f={pacer:new st,webhooks:new nt,integrations:new it,organizations:new ot,externalApi:new ct,pipelines:new lt};class j{constructor(){this.logInitialization()}logInitialization(){console.log("[CasesApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[CasesApiService.${t}] Invalid id parameter`)}validateString(e,t,a){if(!e||e.trim()==="")throw new Error(`[CasesApiService.${a}] Invalid ${t} parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[CasesApiService.${a}] Invalid ${t} parameter`)}mapBackendStatusToFrontend=e=>({pending:"Pre-Filing",Open:"Open",Active:"Active",Discovery:"Discovery",Trial:"Trial",Settled:"Settled",Closed:"Closed",Archived:"Archived","On Hold":"On Hold"})[e]||"Active";transformCase=e=>{const t=e&&typeof e=="object"?e:{};return{...t,status:this.mapBackendStatusToFrontend(typeof t.status=="string"?t.status:"Active"),matterType:t.practiceArea||"General"}};async getAll(e){const t=await r.get("/cases",e);return(Array.isArray(t)?t:t.items||[]).map(s=>{const i=this.transformCase(s);return{...i,client:i.client||"Unknown Client",matterType:i.matterType||i.practiceArea||"General",filingDate:i.filingDate||new Date().toISOString().split("T")[0]}})}async getStats(){try{return await r.get("/cases/stats")}catch(e){throw console.error("[CasesApiService.getStats] Error:",e),new Error("Failed to fetch case statistics")}}async getById(e){this.validateId(e,"getById");try{const t=await r.get(`/cases/${e}`);return this.transformCase(t)}catch(t){throw console.error("[CasesApiService.getById] Error:",t),new Error(`Failed to fetch case with id: ${e}`)}}async add(e){if(this.validateObject(e,"caseData","add"),!e.title)throw new Error("[CasesApiService.add] Case title is required");try{const t={Litigation:"Civil","M&A":"Corporate",IP:"Intellectual Property","Real Estate":"Real Estate",General:"Civil",Appeal:"Civil"},a={Open:"Open",Active:"Active",Discovery:"Discovery",Trial:"Trial",Settled:"Settled",Closed:"Closed",Archived:"Archived","On Hold":"On Hold","Pre-Filing":"pending",Appeal:"Active",Transferred:"Active"},s={title:e.title,caseNumber:e.caseNumber||`CASE-${Date.now()}`,description:e.description,type:t[e.matterType]||"Civil",status:a[e.status]||"Active",practiceArea:e.matterType,jurisdiction:e.jurisdiction,court:e.court,judge:e.judge,filingDate:e.filingDate?new Date(e.filingDate):void 0,...e.clientId&&{clientId:e.clientId}};Object.keys(s).forEach(o=>{const c=o;s[c]===void 0&&delete s[c]});const i=await r.post("/cases",s);return this.transformCase(i)}catch(t){throw console.error("[CasesApiService.add] Error:",t),new Error("Failed to create case")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"caseData","update");try{const a=await r.put(`/cases/${e}`,t);return this.transformCase(a)}catch(a){throw console.error("[CasesApiService.update] Error:",a),new Error(`Failed to update case with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`/cases/${e}`)}catch(t){throw console.error("[CasesApiService.delete] Error:",t),new Error(`Failed to delete case with id: ${e}`)}}async parse(e,t){this.validateString(e,"content","parse");try{return await r.post("/cases/import/parse",{content:e,options:t})}catch(a){throw console.error("[CasesApiService.parse] Error:",a),new Error("Failed to parse case data")}}async archive(e){this.validateId(e,"archive");try{const t=await r.post(`/cases/${e}/archive`,{});return this.transformCase(t)}catch(t){throw console.error("[CasesApiService.archive] Error:",t),new Error(`Failed to archive case with id: ${e}`)}}async search(e,t){this.validateString(e,"query","search");try{return(await r.get("/cases",{search:e,...t})).data.map(s=>this.transformCase(s))}catch(a){throw console.error("[CasesApiService.search] Error:",a),new Error("Failed to search cases")}}async getArchived(e){try{try{return(await r.get("/cases/archived",e)).data.map(a=>this.transformCase(a))}catch{console.warn("[CasesApiService] Archived endpoint unavailable, falling back to status filter");const a=await this.getAll({status:"Closed"});return(Array.isArray(a)?a:[]).map(i=>({id:i.id,date:i.dateTerminated||i.filingDate,title:i.title,client:i.client,outcome:i.status}))}}catch(t){throw console.error("[CasesApiService.getArchived] Error:",t),new Error("Failed to get archived cases")}}}new j;class dt{constructor(){this.logInitialization()}logInitialization(){console.log("[DocketApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[DocketApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[DocketApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{const t=e?{caseId:e}:{};return(await r.get("/docket",t)).data}catch(t){throw console.error("[DocketApiService.getAll] Error:",t),new Error("Failed to fetch docket entries")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`/docket/${e}`)}catch(t){throw console.error("[DocketApiService.getById] Error:",t),new Error(`Failed to fetch docket entry with id: ${e}`)}}async add(e){if(this.validateObject(e,"entry","add"),!e.caseId)throw new Error("[DocketApiService.add] caseId is required");try{const t={caseId:e.caseId,sequenceNumber:e.sequenceNumber,docketNumber:e.docketNumber,dateFiled:e.dateFiled?new Date(e.dateFiled):void 0,entryDate:e.entryDate?new Date(e.entryDate):new Date,description:e.description||e.title,type:e.type,filedBy:e.filedBy||e.party,text:e.text||e.summary,documentTitle:e.documentTitle||e.title,documentUrl:e.documentUrl||e.url,documentId:e.documentId,pacerDocketNumber:e.pacerDocketNumber,pacerDocumentNumber:e.pacerDocumentNumber,isSealed:e.isSealed,isRestricted:e.isRestricted,notes:e.notes,attachments:e.attachments};return Object.keys(t).forEach(a=>{t[a]===void 0&&delete t[a]}),await r.post("/docket",t)}catch(t){throw console.error("[DocketApiService.add] Error:",t),new Error("Failed to create docket entry")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"entry","update");try{return await r.patch(`/docket/${e}`,t)}catch(a){throw console.error("[DocketApiService.update] Error:",a),new Error(`Failed to update docket entry with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`/docket/${e}`)}catch(t){throw console.error("[DocketApiService.delete] Error:",t),new Error(`Failed to delete docket entry with id: ${e}`)}}async getByCaseId(e){return this.validateId(e,"getByCaseId"),this.getAll(e)}}class ut{baseUrl="/motions";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){const t=await r.get(`${this.baseUrl}/case/${e}`);return Array.isArray(t)?t:[]}async create(e){const t=e,s=t.decidedDate||e.decisionDate,i={caseId:e.caseId,title:e.title,type:e.type,status:e.status,description:t.notes||e.description,filedBy:e.filedBy,filedDate:e.filedDate?new Date(e.filedDate):void 0,hearingDate:e.hearingDate?new Date(e.hearingDate):void 0,decisionDate:s?new Date(s):void 0,decision:e.outcome||e.decision,documentId:e.documentId,metadata:t.metadata};return Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),r.post(this.baseUrl,i)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ht{baseUrl="/pleadings";constructor(){this.logInitialization()}logInitialization(){console.log("[PleadingsApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[PleadingsApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[PleadingsApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);if(i&&typeof i=="object"&&!Array.isArray(i)){const o=i,c=o.items||o.data;if(Array.isArray(c))return c}return Array.isArray(i)?i:[]}catch(t){throw console.error("[PleadingsApiService.getAll] Error:",t),new Error("Failed to fetch pleadings")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[PleadingsApiService.getById] Error:",t),new Error(`Failed to fetch pleading with id: ${e}`)}}async getByCaseId(e){return this.validateId(e,"getByCaseId"),this.getAll({caseId:e})}async create(e){if(this.validateObject(e,"data","create"),!e.caseId)throw new Error("[PleadingsApiService.create] caseId is required");if(!e.title)throw new Error("[PleadingsApiService.create] title is required");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[PleadingsApiService.create] Error:",t),new Error("Failed to create pleading")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update");try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[PleadingsApiService.update] Error:",a),new Error(`Failed to update pleading with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[PleadingsApiService.delete] Error:",t),new Error(`Failed to delete pleading with id: ${e}`)}}}class pt{baseUrl="/parties";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.type&&t.append("type",e.type),e?.role&&t.append("role",e.role);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){if(!e.caseId||!e.name||!e.type)throw new Error("caseId, name, and type are required fields");return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async search(e){if(!e.query||e.query.trim().length===0)return[];const t=new URLSearchParams;t.append("q",e.query);const a=`${this.baseUrl}/search?${t.toString()}`;return r.get(a)}}class yt{baseUrl="/case-teams";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.userId&&t.append("userId",e.userId),e?.role&&t.append("role",e.role),e?.isActive!==void 0&&t.append("isActive",String(e.isActive));const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e,isActive:!0})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async remove(e){return r.delete(`${this.baseUrl}/${e}`)}}class gt{baseUrl="/case-phases";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.phaseName&&t.append("phaseName",e.phaseName),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class wt{baseUrl="/matters";async getAll(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.clientId&&t.append("clientId",e.clientId),e?.leadAttorneyId&&t.append("leadAttorneyId",e.leadAttorneyId),e?.practiceArea&&t.append("practiceArea",e.practiceArea),e?.search&&t.append("search",e.search);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);if(Array.isArray(i))return i;const o=i.data||i;return Array.isArray(o)?o:o.matters||[]}async getById(e){const t=await r.get(`${this.baseUrl}/${e}`);return"data"in t&&t.data?t.data:t}async create(e){const t={title:e.title,description:e.description,status:e.status?.toUpperCase(),matterType:(e.matterType||e.type)?.toUpperCase(),priority:e.priority?.toUpperCase(),clientId:e.clientId||null,clientName:e.clientName||null,clientEmail:e.clientEmail||null,clientPhone:e.clientPhone||null,leadAttorneyId:e.leadAttorneyId||e.responsibleAttorneyId||null,leadAttorneyName:e.leadAttorneyName||e.responsibleAttorneyName||null,originatingAttorneyId:e.originatingAttorneyId,originatingAttorneyName:e.originatingAttorneyName,jurisdiction:e.jurisdiction,venue:e.venue||e.courtName,billingType:e.billingType||e.billingArrangement,hourlyRate:e.hourlyRate,flatFee:e.flatFee,contingencyPercentage:e.contingencyPercentage,retainerAmount:e.retainerAmount,estimatedValue:e.estimatedValue,budgetAmount:e.budgetAmount,openedDate:e.openedDate||new Date().toISOString(),targetCloseDate:e.targetCloseDate||e.closedDate,closedDate:e.closedDate,statute_of_limitations:e.statute_of_limitations,practiceArea:e.practiceArea,tags:e.tags,opposingPartyName:e.opposingPartyName,opposingCounsel:Array.isArray(e.opposingCounsel)?e.opposingCounsel.join(", "):e.opposingCounsel,opposingCounselFirm:e.opposingCounselFirm,conflictCheckCompleted:e.conflictCheckCompleted||!1,conflictCheckDate:e.conflictCheckDate||null,conflictCheckStatus:e.conflictCheckCompleted?"completed":e.conflictCheckStatus||"pending",conflictCheckNotes:e.conflictCheckNotes,riskLevel:e.riskLevel,riskNotes:e.riskNotes,linkedCaseIds:e.linkedCaseIds||[],linkedDocumentIds:e.linkedDocumentIds||[],internalNotes:e.internalNotes,customFields:e.customFields,userId:e.userId||e.createdBy||"00000000-0000-0000-0000-000000000000",isArchived:e.isArchived||!1},a=await r.post(this.baseUrl,t);return"data"in a&&a.data?a.data:a}async update(e,t){const a={title:t.title,description:t.description,status:t.status?.toUpperCase(),matterType:(t.matterType||t.type)?.toUpperCase(),priority:t.priority?.toUpperCase(),clientId:t.clientId,clientName:t.clientName,clientEmail:t.clientEmail,clientPhone:t.clientPhone,leadAttorneyId:t.leadAttorneyId||t.responsibleAttorneyId,leadAttorneyName:t.leadAttorneyName||t.responsibleAttorneyName,originatingAttorneyId:t.originatingAttorneyId,originatingAttorneyName:t.originatingAttorneyName,jurisdiction:t.jurisdiction,venue:t.venue||t.courtName,billingType:t.billingType||t.billingArrangement,hourlyRate:t.hourlyRate,flatFee:t.flatFee,contingencyPercentage:t.contingencyPercentage,retainerAmount:t.retainerAmount,estimatedValue:t.estimatedValue,budgetAmount:t.budgetAmount,openedDate:t.openedDate,targetCloseDate:t.targetCloseDate||t.closedDate,closedDate:t.closedDate,statute_of_limitations:t.statute_of_limitations,practiceArea:t.practiceArea,tags:t.tags,opposingPartyName:t.opposingPartyName,opposingCounsel:Array.isArray(t.opposingCounsel)?t.opposingCounsel.join(", "):t.opposingCounsel,opposingCounselFirm:t.opposingCounselFirm,conflictCheckCompleted:t.conflictCheckCompleted,conflictCheckDate:t.conflictCheckDate,conflictCheckStatus:t.conflictCheckCompleted?"completed":t.conflictCheckStatus,conflictCheckNotes:t.conflictCheckNotes,riskLevel:t.riskLevel,riskNotes:t.riskNotes,linkedCaseIds:t.linkedCaseIds,linkedDocumentIds:t.linkedDocumentIds,internalNotes:t.internalNotes,customFields:t.customFields,isArchived:t.isArchived},s=await r.patch(`${this.baseUrl}/${e}`,a);return"data"in s&&s.data?s.data:s}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async getStatistics(){return r.get(`${this.baseUrl}/statistics`)}async getKPIs(e){const t=e?`${this.baseUrl}/kpis?dateRange=${e}`:`${this.baseUrl}/kpis`,a=await r.get(t);return a.data||a}async getPipeline(e){const t=e?`${this.baseUrl}/pipeline?dateRange=${e}`:`${this.baseUrl}/pipeline`,a=await r.get(t);return a.data||a}async getCalendarEvents(e,t,a){const s=new URLSearchParams({startDate:e});t&&s.append("endDate",t),a?.length&&s.append("matterIds",a.join(","));const i=await r.get(`${this.baseUrl}/calendar/events?${s.toString()}`);return i.data||i}async getRevenueAnalytics(e){const t=e?`${this.baseUrl}/analytics/revenue?dateRange=${e}`:`${this.baseUrl}/analytics/revenue`,a=await r.get(t);return a.data||a}async getRiskInsights(e){const t=e?.length?`${this.baseUrl}/insights/risk?matterIds=${e.join(",")}`:`${this.baseUrl}/insights/risk`,a=await r.get(t);return a.data||a}async getFinancialOverview(e){const t=e?`${this.baseUrl}/financials/overview?dateRange=${e}`:`${this.baseUrl}/financials/overview`,a=await r.get(t);return a.data||a}async search(e){return r.get(`${this.baseUrl}/search`,{q:e})}async getByStatus(e){return this.getAll({status:e})}async getByClient(e){return this.getAll({clientId:e})}async getByAttorney(e){return this.getAll({leadAttorneyId:e})}}const b={cases:new j,docket:new dt,motions:new ut,pleadings:new ht,parties:new pt,caseTeams:new yt,casePhases:new gt,matters:new wt};class bt{baseUrl="/trial";constructor(){this.logInitialization()}logInitialization(){console.log("[TrialApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[TrialApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[TrialApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status),e?.trialType&&t.append("trialType",e.trialType);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return await r.get(s)}catch(t){throw console.error("[TrialApiService.getAll] Error:",t),new Error("Failed to fetch trials")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[TrialApiService.getById] Error:",t),new Error(`Failed to fetch trial with id: ${e}`)}}async getByCaseId(e){return this.validateId(e,"getByCaseId"),this.getAll({caseId:e})}async create(e){if(this.validateObject(e,"data","create"),!e.caseId)throw new Error("[TrialApiService.create] caseId is required");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[TrialApiService.create] Error:",t),new Error("Failed to create trial")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update");try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[TrialApiService.update] Error:",a),new Error(`Failed to update trial with id: ${e}`)}}async updateStatus(e,t){if(this.validateId(e,"updateStatus"),!t)throw new Error("[TrialApiService.updateStatus] status is required");try{return await r.patch(`${this.baseUrl}/${e}/status`,{status:t})}catch(a){throw console.error("[TrialApiService.updateStatus] Error:",a),new Error(`Failed to update status for trial with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[TrialApiService.delete] Error:",t),new Error(`Failed to delete trial with id: ${e}`)}}async getEvents(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.trialId&&t.append("trialId",e.trialId);const a=t.toString(),s=a?`${this.baseUrl}/events?${a}`:`${this.baseUrl}/events`;return await r.get(s)}catch(t){throw console.error("[TrialApiService.getEvents] Error:",t),new Error("Failed to fetch trial events")}}async createEvent(e){if(this.validateObject(e,"data","createEvent"),!e.trialId)throw new Error("[TrialApiService.createEvent] trialId is required");if(!e.eventType)throw new Error("[TrialApiService.createEvent] eventType is required");try{return await r.post(`${this.baseUrl}/events`,e)}catch(t){throw console.error("[TrialApiService.createEvent] Error:",t),new Error("Failed to create trial event")}}async updateEvent(e,t){this.validateId(e,"updateEvent"),this.validateObject(t,"data","updateEvent");try{return await r.put(`${this.baseUrl}/events/${e}`,t)}catch(a){throw console.error("[TrialApiService.updateEvent] Error:",a),new Error(`Failed to update trial event with id: ${e}`)}}async deleteEvent(e){this.validateId(e,"deleteEvent");try{await r.delete(`${this.baseUrl}/events/${e}`)}catch(t){throw console.error("[TrialApiService.deleteEvent] Error:",t),new Error(`Failed to delete trial event with id: ${e}`)}}async getWitnessPrep(e){try{const t=new URLSearchParams;e?.trialId&&t.append("trialId",e.trialId),e?.witnessId&&t.append("witnessId",e.witnessId);const a=t.toString(),s=a?`${this.baseUrl}/witness-prep?${a}`:`${this.baseUrl}/witness-prep`;return await r.get(s)}catch(t){throw console.error("[TrialApiService.getWitnessPrep] Error:",t),new Error("Failed to fetch witness preparation records")}}async createWitnessPrep(e){if(this.validateObject(e,"data","createWitnessPrep"),!e.trialId)throw new Error("[TrialApiService.createWitnessPrep] trialId is required");if(!e.witnessId)throw new Error("[TrialApiService.createWitnessPrep] witnessId is required");try{return await r.post(`${this.baseUrl}/witness-prep`,e)}catch(t){throw console.error("[TrialApiService.createWitnessPrep] Error:",t),new Error("Failed to create witness preparation record")}}}class $t{baseUrl="/exhibits";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.party&&t.append("party",e.party),e?.status&&t.append("status",e.status),e?.type&&t.append("type",e.type);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async getByCaseId(e){return this.getAll({caseId:e})}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}const P={trial:new bt,exhibits:new $t};class vt{baseUrl="/tasks";constructor(){this.logInitialization()}logInitialization(){console.log("[TasksApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[TasksApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[TasksApiService.${a}] Invalid ${t} parameter`)}async getAll(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status),e?.priority&&t.append("priority",e.priority),e?.assignedTo&&t.append("assignedTo",e.assignedTo);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return await r.get(s)}catch(t){throw console.error("[TasksApiService.getAll] Error:",t),new Error("Failed to fetch tasks")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[TasksApiService.getById] Error:",t),new Error(`Failed to fetch task with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),!e.title)throw new Error("[TasksApiService.create] title is required");if(!e.status)throw new Error("[TasksApiService.create] status is required");if(!e.priority)throw new Error("[TasksApiService.create] priority is required");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[TasksApiService.create] Error:",t),new Error("Failed to create task")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update");try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[TasksApiService.update] Error:",a),new Error(`Failed to update task with id: ${e}`)}}async patch(e,t){this.validateId(e,"patch"),this.validateObject(t,"data","patch");try{return await r.patch(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[TasksApiService.patch] Error:",a),new Error(`Failed to patch task with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[TasksApiService.delete] Error:",t),new Error(`Failed to delete task with id: ${e}`)}}async updateStatus(e,t){if(this.validateId(e,"updateStatus"),!t)throw new Error("[TasksApiService.updateStatus] status is required");return this.patch(e,{status:t})}async updateProgress(e,t,a){if(this.validateId(e,"updateProgress"),t<0||t>100)throw new Error("[TasksApiService.updateProgress] completionPercentage must be between 0 and 100");return this.patch(e,{completionPercentage:t,actualHours:a})}async getStatistics(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status),e?.assignedTo&&t.append("assignedTo",e.assignedTo);const a=t.toString(),s=a?`${this.baseUrl}/statistics?${a}`:`${this.baseUrl}/statistics`;return await r.get(s)}catch(t){throw console.error("[TasksApiService.getStatistics] Error:",t),new Error("Failed to fetch task statistics")}}async bulkUpdateStatus(e,t){if(!Array.isArray(e)||e.length===0)throw new Error("[TasksApiService.bulkUpdateStatus] taskIds must be a non-empty array");if(!t)throw new Error("[TasksApiService.bulkUpdateStatus] status is required");try{return await r.post(`${this.baseUrl}/bulk/status`,{taskIds:e,status:t})}catch(a){throw console.error("[TasksApiService.bulkUpdateStatus] Error:",a),new Error("Failed to bulk update task status")}}async bulkAssign(e,t){if(!Array.isArray(e)||e.length===0)throw new Error("[TasksApiService.bulkAssign] taskIds must be a non-empty array");this.validateId(t,"bulkAssign");try{return await r.post(`${this.baseUrl}/bulk/assign`,{taskIds:e,assignedTo:t})}catch(a){throw console.error("[TasksApiService.bulkAssign] Error:",a),new Error("Failed to bulk assign tasks")}}async bulkDelete(e){if(!Array.isArray(e)||e.length===0)throw new Error("[TasksApiService.bulkDelete] taskIds must be a non-empty array");try{return await r.post(`${this.baseUrl}/bulk/delete`,{taskIds:e})}catch(t){throw console.error("[TasksApiService.bulkDelete] Error:",t),new Error("Failed to bulk delete tasks")}}async getSubtasks(e){this.validateId(e,"getSubtasks");try{return await r.get(`${this.baseUrl}/${e}/subtasks`)}catch(t){throw console.error("[TasksApiService.getSubtasks] Error:",t),new Error(`Failed to fetch subtasks for task: ${e}`)}}async addSubtask(e,t){this.validateId(e,"addSubtask"),this.validateObject(t,"subtaskData","addSubtask");try{return await r.post(`${this.baseUrl}/${e}/subtasks`,t)}catch(a){throw console.error("[TasksApiService.addSubtask] Error:",a),new Error(`Failed to add subtask to task: ${e}`)}}async getComments(e){this.validateId(e,"getComments");try{return await r.get(`${this.baseUrl}/${e}/comments`)}catch(t){throw console.error("[TasksApiService.getComments] Error:",t),new Error(`Failed to fetch comments for task: ${e}`)}}async addComment(e,t){if(this.validateId(e,"addComment"),!t||t.trim()==="")throw new Error("[TasksApiService.addComment] content is required");try{return await r.post(`${this.baseUrl}/${e}/comments`,{content:t})}catch(a){throw console.error("[TasksApiService.addComment] Error:",a),new Error(`Failed to add comment to task: ${e}`)}}async getAttachments(e){this.validateId(e,"getAttachments");try{return await r.get(`${this.baseUrl}/${e}/attachments`)}catch(t){throw console.error("[TasksApiService.getAttachments] Error:",t),new Error(`Failed to fetch attachments for task: ${e}`)}}async uploadAttachment(e,t){if(this.validateId(e,"uploadAttachment"),!t||!(t instanceof File))throw new Error("[TasksApiService.uploadAttachment] file is required");try{const a=new FormData;return a.append("file",t),await r.post(`${this.baseUrl}/${e}/attachments`,a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){throw console.error("[TasksApiService.uploadAttachment] Error:",a),new Error(`Failed to upload attachment to task: ${e}`)}}async getHistory(e){this.validateId(e,"getHistory");try{return await r.get(`${this.baseUrl}/${e}/history`)}catch(t){throw console.error("[TasksApiService.getHistory] Error:",t),new Error(`Failed to fetch history for task: ${e}`)}}}class mt{baseUrl="/calendar";constructor(){this.logInitialization()}logInitialization(){console.log("[CalendarApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[CalendarApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[CalendarApiService.${a}] Invalid ${t} parameter`)}validateDate(e,t,a){if(!e)throw new Error(`[CalendarApiService.${a}] ${t} must be a valid date string`);const s=new Date(e);if(isNaN(s.getTime()))throw new Error(`[CalendarApiService.${a}] ${t} is not a valid date`)}async getAll(e){try{const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.eventType&&t.append("eventType",e.eventType),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate),e?.completed!==void 0&&t.append("completed",String(e.completed));const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return await r.get(s)}catch(t){throw console.error("[CalendarApiService.getAll] Error:",t),new Error("Failed to fetch calendar events")}}async getById(e){this.validateId(e,"getById");try{return await r.get(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[CalendarApiService.getById] Error:",t),new Error(`Failed to fetch calendar event with id: ${e}`)}}async create(e){if(this.validateObject(e,"data","create"),!e.title)throw new Error("[CalendarApiService.create] title is required");if(!e.eventType)throw new Error("[CalendarApiService.create] eventType is required");if(!e.startDate||!e.endDate)throw new Error("[CalendarApiService.create] startDate and endDate are required");this.validateDate(e.startDate,"startDate","create"),this.validateDate(e.endDate,"endDate","create");try{return await r.post(this.baseUrl,e)}catch(t){throw console.error("[CalendarApiService.create] Error:",t),new Error("Failed to create calendar event")}}async update(e,t){this.validateId(e,"update"),this.validateObject(t,"data","update"),t.startDate&&this.validateDate(t.startDate,"startDate","update"),t.endDate&&this.validateDate(t.endDate,"endDate","update");try{return await r.put(`${this.baseUrl}/${e}`,t)}catch(a){throw console.error("[CalendarApiService.update] Error:",a),new Error(`Failed to update calendar event with id: ${e}`)}}async delete(e){this.validateId(e,"delete");try{await r.delete(`${this.baseUrl}/${e}`)}catch(t){throw console.error("[CalendarApiService.delete] Error:",t),new Error(`Failed to delete calendar event with id: ${e}`)}}async getUpcoming(e=7){if(e<1)throw new Error("[CalendarApiService.getUpcoming] days must be a positive number");try{return await r.get(`${this.baseUrl}/upcoming?days=${e}`)}catch(t){throw console.error("[CalendarApiService.getUpcoming] Error:",t),new Error("Failed to fetch upcoming events")}}async getStatuteOfLimitations(e){try{const a=new URLSearchParams(e).toString(),s=a?`${this.baseUrl}/statute-of-limitations?${a}`:`${this.baseUrl}/statute-of-limitations`;return await r.get(s)}catch(t){throw console.error("[CalendarApiService.getStatuteOfLimitations] Error:",t),new Error("Failed to fetch statute of limitations")}}async markAsCompleted(e){return this.validateId(e,"markAsCompleted"),this.update(e,{completed:!0})}}class At{baseUrl="/workflow";constructor(){this.logInitialization()}logInitialization(){console.log("[WorkflowApiService] Initialized with Backend API (PostgreSQL)")}validateId(e,t){if(!e||e.trim()==="")throw new Error(`[WorkflowApiService.${t}] Invalid id parameter`)}validateObject(e,t,a){if(!e||typeof e!="object"||Array.isArray(e))throw new Error(`[WorkflowApiService.${a}] Invalid ${t} parameter`)}validateTemplateStatus(e,t){const a=["active","inactive","draft"];if(!e||!a.includes(e))throw new Error(`[WorkflowApiService.${t}] Invalid status. Must be one of: ${a.join(", ")}`)}validateInstanceStatus(e,t){const a=["running","paused","completed","failed","cancelled"];if(!e||!a.includes(e))throw new Error(`[WorkflowApiService.${t}] Invalid status. Must be one of: ${a.join(", ")}`)}async getTemplates(e){try{e?.status&&this.validateTemplateStatus(e.status,"getTemplates");const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.category&&t.append("category",e.category);const a=t.toString(),s=a?`${this.baseUrl}/templates?${a}`:`${this.baseUrl}/templates`;return await r.get(s)}catch(t){throw console.error("[WorkflowApiService.getTemplates] Error:",t),new Error("Failed to fetch workflow templates")}}async getTemplateById(e){this.validateId(e,"getTemplateById");try{return await r.get(`${this.baseUrl}/templates/${e}`)}catch(t){throw console.error("[WorkflowApiService.getTemplateById] Error:",t),new Error(`Failed to fetch workflow template with id: ${e}`)}}async createTemplate(e){if(this.validateObject(e,"data","createTemplate"),!e.name)throw new Error("[WorkflowApiService.createTemplate] Name is required");if(!e.category)throw new Error("[WorkflowApiService.createTemplate] Category is required");if(!e.steps||!Array.isArray(e.steps)||e.steps.length===0)throw new Error("[WorkflowApiService.createTemplate] At least one step is required");try{return await r.post(`${this.baseUrl}/templates`,e)}catch(t){throw console.error("[WorkflowApiService.createTemplate] Error:",t),new Error("Failed to create workflow template")}}async updateTemplate(e,t){this.validateId(e,"updateTemplate"),this.validateObject(t,"data","updateTemplate"),t.status&&this.validateTemplateStatus(t.status,"updateTemplate");try{return await r.put(`${this.baseUrl}/templates/${e}`,t)}catch(a){throw console.error("[WorkflowApiService.updateTemplate] Error:",a),new Error(`Failed to update workflow template with id: ${e}`)}}async deleteTemplate(e){this.validateId(e,"deleteTemplate");try{await r.delete(`${this.baseUrl}/templates/${e}`)}catch(t){throw console.error("[WorkflowApiService.deleteTemplate] Error:",t),new Error(`Failed to delete workflow template with id: ${e}`)}}async getInstances(e){try{e?.status&&this.validateInstanceStatus(e.status,"getInstances");const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.caseId&&t.append("caseId",e.caseId);const a=t.toString(),s=a?`${this.baseUrl}/instances?${a}`:`${this.baseUrl}/instances`;return await r.get(s)}catch(t){const a=t instanceof Error?t.message:String(t);if(a.includes("404")||a.includes("Cannot GET"))return console.warn("[WorkflowApiService.getInstances] Workflow instances endpoint not implemented yet, returning empty array"),[];throw console.error("[WorkflowApiService.getInstances] Error:",t),new Error("Failed to fetch workflow instances")}}async getInstanceById(e){this.validateId(e,"getInstanceById");try{return await r.get(`${this.baseUrl}/instances/${e}`)}catch(t){throw console.error("[WorkflowApiService.getInstanceById] Error:",t),new Error(`Failed to fetch workflow instance with id: ${e}`)}}async startWorkflow(e,t){this.validateId(e,"startWorkflow"),this.validateObject(t,"context","startWorkflow");try{return await r.post(`${this.baseUrl}/instances`,{templateId:e,...t})}catch(a){throw console.error("[WorkflowApiService.startWorkflow] Error:",a),new Error("Failed to start workflow")}}async pauseWorkflow(e){this.validateId(e,"pauseWorkflow");try{return await r.post(`${this.baseUrl}/instances/${e}/pause`,{})}catch(t){throw console.error("[WorkflowApiService.pauseWorkflow] Error:",t),new Error(`Failed to pause workflow with id: ${e}`)}}async resumeWorkflow(e){this.validateId(e,"resumeWorkflow");try{return await r.post(`${this.baseUrl}/instances/${e}/resume`,{})}catch(t){throw console.error("[WorkflowApiService.resumeWorkflow] Error:",t),new Error(`Failed to resume workflow with id: ${e}`)}}async cancelWorkflow(e){this.validateId(e,"cancelWorkflow");try{return await r.post(`${this.baseUrl}/instances/${e}/cancel`,{})}catch(t){throw console.error("[WorkflowApiService.cancelWorkflow] Error:",t),new Error(`Failed to cancel workflow with id: ${e}`)}}async syncEngine(){try{return await r.post(`${this.baseUrl}/sync`,{})}catch(e){throw console.error("[WorkflowApiService.syncEngine] Error:",e),new Error("Failed to synchronize workflow engine")}}async getEnhanced(e){this.validateId(e,"getEnhanced");try{return await r.get(`${this.baseUrl}/advanced/${e}`)}catch(t){throw console.error("[WorkflowApiService.getEnhanced] Error:",t),new Error(`Failed to fetch enhanced workflow instance with id: ${e}`)}}async getAnalytics(e,t){this.validateId(e,"getAnalytics");try{return await r.get(`${this.baseUrl}/advanced/${e}/analytics?start=${t.start}&end=${t.end}`)}catch(a){throw console.error("[WorkflowApiService.getAnalytics] Error:",a),new Error(`Failed to fetch workflow analytics for id: ${e}`)}}async getAISuggestions(e){this.validateId(e,"getAISuggestions");try{return await r.get(`${this.baseUrl}/advanced/${e}/ai/suggestions`)}catch(t){throw console.error("[WorkflowApiService.getAISuggestions] Error:",t),new Error(`Failed to fetch AI suggestions for workflow id: ${e}`)}}async applyAISuggestion(e,t){this.validateId(e,"applyAISuggestion"),this.validateId(t,"applyAISuggestion");try{return await r.post(`${this.baseUrl}/advanced/${e}/ai/suggestions/${t}/apply`,{})}catch(a){throw console.error("[WorkflowApiService.applyAISuggestion] Error:",a),new Error("Failed to apply AI suggestion")}}async createSnapshot(e,t){this.validateId(e,"createSnapshot");try{return await r.post(`${this.baseUrl}/advanced/${e}/snapshots`,t)}catch(a){throw console.error("[WorkflowApiService.createSnapshot] Error:",a),new Error("Failed to create workflow snapshot")}}async rollbackToSnapshot(e,t){this.validateId(e,"rollbackToSnapshot"),this.validateId(t,"rollbackToSnapshot");try{return await r.post(`${this.baseUrl}/advanced/${e}/rollback`,{snapshotId:t})}catch(a){throw console.error("[WorkflowApiService.rollbackToSnapshot] Error:",a),new Error("Failed to rollback workflow")}}async getVersions(e){this.validateId(e,"getVersions");try{return await r.get(`${this.baseUrl}/advanced/${e}/versions`)}catch(t){throw console.error("[WorkflowApiService.getVersions] Error:",t),new Error(`Failed to fetch workflow versions for id: ${e}`)}}async getSLAStatuses(e){this.validateId(e,"getSLAStatuses");try{return await r.get(`${this.baseUrl}/advanced/${e}/sla/statuses`)}catch(t){throw console.error("[WorkflowApiService.getSLAStatuses] Error:",t),new Error(`Failed to fetch SLA statuses for workflow id: ${e}`)}}async getExternalTrigger(e){this.validateId(e,"getExternalTrigger");try{return await r.get(`${this.baseUrl}/advanced/${e}/triggers/external`)}catch{return console.warn("[WorkflowApiService.getExternalTrigger] No external trigger found"),null}}async createWebhookTrigger(e,t){this.validateId(e,"createWebhookTrigger");try{return await r.post(`${this.baseUrl}/advanced/${e}/triggers/webhook`,t)}catch(a){throw console.error("[WorkflowApiService.createWebhookTrigger] Error:",a),new Error("Failed to create webhook trigger")}}}class St{baseUrl="/projects";async getAll(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.projectType&&t.append("projectType",e.projectType),e?.clientId&&t.append("clientId",e.clientId),e?.leadAttorney&&t.append("leadAttorney",e.leadAttorney);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class ft{baseUrl="/risks";async getAll(e){const t=new URLSearchParams;e?.caseId&&t.append("caseId",e.caseId),e?.status&&t.append("status",e.status),e?.impact&&t.append("impact",e.impact),e?.probability&&t.append("probability",e.probability);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async patch(e,t){return r.patch(`${this.baseUrl}/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async getRiskMatrix(){return r.get(`${this.baseUrl}/matrix`)}}class Ut{baseUrl="/war-room";async getAdvisors(e){const a=new URLSearchParams(e).toString(),s=a?`${this.baseUrl}/advisors?${a}`:`${this.baseUrl}/advisors`;return r.get(s)}async getAdvisor(e){return r.get(`${this.baseUrl}/advisors/${e}`)}async createAdvisor(e){return r.post(`${this.baseUrl}/advisors`,e)}async deleteAdvisor(e){return r.delete(`${this.baseUrl}/advisors/${e}`)}async getExperts(e){const a=new URLSearchParams(e).toString(),s=a?`${this.baseUrl}/experts?${a}`:`${this.baseUrl}/experts`;return r.get(s)}async getExpert(e){return r.get(`${this.baseUrl}/experts/${e}`)}async createExpert(e){return r.post(`${this.baseUrl}/experts`,e)}async deleteExpert(e){return r.delete(`${this.baseUrl}/experts/${e}`)}async getWarRoomData(e){return r.get(`${this.baseUrl}/${e}`)}async getStrategy(e){return r.get(`${this.baseUrl}/${e}/strategy`)}async updateStrategy(e,t){return r.put(`${this.baseUrl}/${e}/strategy`,t)}}const U={tasks:new vt,calendar:new mt,workflow:new At,projects:new St,risks:new ft,warRoom:new Ut};class k{static instance;client;constructor(){this.client=new O}static getInstance(){return k.instance||(k.instance=new k),k.instance}async getRecentDrafts(e=5){return this.client.get(`/drafting/recent-drafts?limit=${e}`)}async getTemplates(e=10){return this.client.get(`/drafting/templates?limit=${e}`)}async getPendingApprovals(){return this.client.get("/drafting/approvals")}async getStats(){return this.client.get("/drafting/stats")}async createTemplate(e){return this.client.post("/drafting/templates",e)}async getAllTemplates(e){const t=new URLSearchParams;e?.category&&t.append("category",e.category),e?.jurisdiction&&t.append("jurisdiction",e.jurisdiction),e?.practiceArea&&t.append("practiceArea",e.practiceArea),e?.search&&t.append("search",e.search);const a=t.toString();return this.client.get(`/drafting/templates/all${a?`?${a}`:""}`)}async getTemplateById(e){return this.client.get(`/drafting/templates/${e}`)}async updateTemplate(e,t){return this.client.put(`/drafting/templates/${e}`,t)}async deleteTemplate(e){return this.client.delete(`/drafting/templates/${e}`)}async archiveTemplate(e){return this.client.post(`/drafting/templates/${e}/archive`,{})}async duplicateTemplate(e){return this.client.post(`/drafting/templates/${e}/duplicate`,{})}async generateDocument(e){return this.client.post("/drafting/generate",e)}async getAllGeneratedDocuments(e){const t=new URLSearchParams;e?.status&&t.append("status",e.status),e?.caseId&&t.append("caseId",e.caseId);const a=t.toString();return this.client.get(`/drafting/documents${a?`?${a}`:""}`)}async getGeneratedDocumentById(e){return this.client.get(`/drafting/documents/${e}`)}async updateGeneratedDocument(e,t){return this.client.put(`/drafting/documents/${e}`,t)}async submitForReview(e){return this.client.post(`/drafting/documents/${e}/submit`,{})}async approveDocument(e,t){return this.client.post(`/drafting/documents/${e}/approve`,{notes:t})}async rejectDocument(e,t){return this.client.post(`/drafting/documents/${e}/reject`,{notes:t})}async finalizeDocument(e){return this.client.post(`/drafting/documents/${e}/finalize`,{})}async deleteGeneratedDocument(e){return this.client.delete(`/drafting/documents/${e}`)}}const Et=k.getInstance();class It{baseUrl="/hr";async getAll(e){const t=new URLSearchParams;e?.role&&t.append("role",e.role),e?.status&&t.append("status",e.status),e?.department&&t.append("department",e.department);const a=t.toString(),s=a?`${this.baseUrl}/staff?${a}`:`${this.baseUrl}/staff`;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/staff/${e}`)}async create(e){return r.post(`${this.baseUrl}/staff`,e)}async update(e,t){return r.put(`${this.baseUrl}/staff/${e}`,t)}async updateStatus(e,t){return r.patch(`${this.baseUrl}/staff/${e}/status`,{status:t})}async delete(e){return r.delete(`${this.baseUrl}/staff/${e}`)}async getUtilizationMetrics(){try{return(await this.getAll({status:"Active"})).map(t=>({name:t.name,role:t.role,utilization:Math.floor(Math.random()*40)+60,cases:Math.floor(Math.random()*10)+1}))}catch(e){return console.warn("[HRApiService] getUtilizationMetrics failed, returning empty array:",e),[]}}async getStaff(e){return this.getAll(e)}}const kt={hr:new It};class Tt{baseUrl="/legal-entities";async getAll(e){const t=new URLSearchParams;e?.entityType&&t.append("entityType",e.entityType),e?.status&&t.append("status",e.status),e?.jurisdiction&&t.append("jurisdiction",e.jurisdiction),e?.search&&t.append("search",e.search),e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString());const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl,i=await r.get(s);return Array.isArray(i)?i:[]}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}async getRelationships(e){return r.get(`${this.baseUrl}/${e}/relationships`)}async getAllRelationships(){return r.get(`${this.baseUrl}/relationships`)}async getStats(){return r.get(`${this.baseUrl}/stats`)}}class Ct{baseUrl="/data-sources";async getAll(e){const t=new URLSearchParams;e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status);const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async test(e){return r.post(`${this.baseUrl}/${e}/test`,{})}async sync(e){return r.post(`${this.baseUrl}/${e}/sync`,{})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Dt{baseUrl="/rls-policies";async getAll(e){const t=new URLSearchParams;e?.tableName&&t.append("tableName",e.tableName),e?.enabled!==void 0&&t.append("enabled",String(e.enabled));const a=t.toString(),s=a?`${this.baseUrl}?${a}`:this.baseUrl;return r.get(s)}async getById(e){return r.get(`${this.baseUrl}/${e}`)}async create(e){return r.post(this.baseUrl,e)}async update(e,t){return r.put(`${this.baseUrl}/${e}`,t)}async enable(e){return r.patch(`${this.baseUrl}/${e}/enable`,{})}async disable(e){return r.patch(`${this.baseUrl}/${e}/disable`,{})}async delete(e){return r.delete(`${this.baseUrl}/${e}`)}}class Ft{async getTables(){try{return await r.get("/schema/tables")}catch(e){return console.error("[SchemaManagementApi] Error fetching tables:",e),[]}}async getTableColumns(e){try{return await r.get(`/schema/tables/${e}/columns`)}catch(t){return console.error("[SchemaManagementApi] Error fetching columns:",t),[]}}async getMigrations(){try{return await r.get("/schema/migrations")}catch(e){return console.error("[SchemaManagementApi] Error fetching migrations:",e),[]}}async createMigration(e){return await r.post("/schema/migrations",e)}async applyMigration(e){return await r.post(`/schema/migrations/${e}/apply`,{})}async revertMigration(e){return await r.post(`/schema/migrations/${e}/revert`,{})}async getSnapshots(){try{return await r.get("/schema/snapshots")}catch(e){return console.error("[SchemaManagementApi] Error fetching snapshots:",e),[]}}async getSnapshot(e){return await r.get(`/schema/snapshots/${e}`)}async createSnapshot(e){return await r.post("/schema/snapshots",e)}async deleteSnapshot(e){await r.delete(`/schema/snapshots/${e}`)}async createTable(e){return await r.post("/schema/tables",e)}async dropTable(e){return await r.delete(`/schema/tables/${e}`)}}class Bt{async executeQuery(e){try{return await r.post("/query-workbench/execute",{query:e})}catch(t){console.error("[QueryWorkbenchApi] Error executing query:",t);const a=t instanceof Error?t.message:"Unknown error";return{success:!1,data:[],executionTimeMs:0,rowsAffected:0,error:a,historyId:""}}}async explainQuery(e){try{return await r.post("/query-workbench/explain",{query:e})}catch(t){return console.error("[QueryWorkbenchApi] Error explaining query:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async getHistory(e=100){try{return await r.get("/query-workbench/history",{limit:e})}catch(t){return console.error("[QueryWorkbenchApi] Error fetching history:",t),[]}}async getSavedQueries(){try{return await r.get("/query-workbench/saved")}catch(e){return console.error("[QueryWorkbenchApi] Error fetching saved queries:",e),[]}}async saveQuery(e){return await r.post("/query-workbench/saved",e)}async deleteSavedQuery(e){await r.delete(`/query-workbench/saved/${e}`)}}const D={dataSources:new Ct,rlsPolicies:new Dt,schemaManagement:new Ft,queryWorkbench:new Bt},Mt={auth:S.auth,users:S.users,apiKeys:S.apiKeys,permissions:S.permissions,ethicalWalls:S.ethicalWalls,tokenBlacklist:S.tokenBlacklist,cases:b.cases,docket:b.docket,motions:b.motions,pleadings:b.pleadings,parties:b.parties,caseTeams:b.caseTeams,casePhases:b.casePhases,matters:b.matters,evidence:g.evidence,custodians:g.custodians,examinations:g.examinations,witnesses:g.witnesses,depositions:g.depositions,legalHolds:g.legalHolds,productions:g.productions,discoveryRequests:g.discoveryRequests,esiSources:g.esiSources,privilegeLog:g.privilegeLog,custodianInterviews:g.custodianInterviews,discovery:g.discovery,billing:$.billing,timeEntries:$.timeEntries,invoices:$.invoices,expenses:$.expenses,feeAgreements:$.feeAgreements,rateTables:$.rateTables,trustAccounts:$.trustAccounts,trial:P.trial,exhibits:P.exhibits,tasks:U.tasks,calendar:U.calendar,workflow:U.workflow,projects:U.projects,risks:U.risks,warRoom:U.warRoom,clients:T.clients,communications:T.communications,correspondence:T.correspondence,messaging:T.messaging,notifications:T.notifications,compliance:C.compliance,conflictChecks:C.conflictChecks,reports:C.reports,complianceReporting:C.complianceReporting,pacer:f.pacer,webhooks:f.webhooks,integrations:f.integrations,organizations:f.organizations,externalApi:f.externalApi,pipelines:f.pipelines,search:h.search,dashboard:h.dashboard,aiOps:h.aiOps,analyticsDashboard:h.analyticsDashboard,billingAnalytics:h.billingAnalytics,caseAnalytics:h.caseAnalytics,discoveryAnalytics:h.discoveryAnalytics,outcomePredictions:h.outcomePredictions,judgeStats:h.judgeStats,bluebook:h.bluebook,knowledge:h.knowledge,citations:h.citations,clauses:h.clauses,jurisdiction:h.jurisdiction,documents:y.documents,documentVersions:y.documentVersions,processingJobs:y.processingJobs,ocr:y.ocr,monitoring:y.monitoring,health:y.health,analytics:y.analytics,auditLogs:y.auditLogs,versioning:y.versioning,sync:y.sync,backups:y.backups,serviceJobs:y.serviceJobs,metrics:y.metrics,dataSources:D.dataSources,rlsPolicies:D.rlsPolicies,schemaManagement:D.schemaManagement,queryWorkbench:D.queryWorkbench,hr:kt.hr,legalEntities:new Tt,drafting:Et};function Rt(n,e){if(!n)throw new p(`[queryUtils.${e}] Query key is required`);if(typeof n!="string"&&!Array.isArray(n))throw new p(`[queryUtils.${e}] Query key must be a string or array`)}function B(n,e=new WeakSet){try{if(n===null||typeof n!="object")return JSON.stringify(n);if(e.has(n))return'"[Circular]"';if(e.add(n),Array.isArray(n)){const i="["+n.map(o=>B(o,e)).join(",")+"]";return e.delete(n),i}const t=Object.keys(n).sort(),a=[];for(const i of t){const o=n[i];if(typeof o=="function"||o===void 0)continue;const c=JSON.stringify(i),l=B(o,e);a.push(`${c}:${l}`)}const s="{"+a.join(",")+"}";return e.delete(n),s}catch(t){throw console.error("[queryUtils.stableStringify] Serialization failed:",t),t}}function Pt(n){try{return Rt(n,"hashQueryKey"),typeof n=="string"?n:B(n)}catch(e){return console.error("[queryUtils.hashQueryKey] Failed to hash query key:",e),String(n)}}class Lt{cache=new Map;listeners=new Map;inflight=new Map;globalListeners=new Set;DEFAULT_STALE_TIME=3e4;constructor(){this.logInitialization()}logInitialization(){console.log("[QueryClient] Initialized with in-memory cache")}validateQueryKey(e,t){if(!e||!Array.isArray(e))throw new p(`[QueryClient.${t}] Invalid queryKey - must be an array`);if(e.length===0)throw new p(`[QueryClient.${t}] Query key cannot be empty`)}validateQueryFunction(e,t){if(typeof e!="function")throw new p(`[QueryClient.${t}] Query function must be a function`)}hashKey(e){return this.validateQueryKey(e,"hashKey"),Pt(e)}subscribeToGlobalUpdates(e){if(typeof e!="function")throw new p("[QueryClient.subscribeToGlobalUpdates] Listener must be a function");return this.globalListeners.add(e),this.notifyGlobal(),()=>{this.globalListeners.delete(e)}}subscribe(e,t){if(this.validateQueryKey(e,"subscribe"),typeof t!="function")throw new p("[QueryClient.subscribe] Listener must be a function");const a=this.hashKey(e);return this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a).add(t),()=>{this.listeners.get(a)?.delete(t)}}notifyGlobal(){let e=0;this.cache.forEach(t=>{t.isFetching&&e++}),this.globalListeners.forEach(t=>t({isFetching:e}))}notify(e,t){this.listeners.get(e)?.forEach(a=>a(t))}getQueryState(e){return this.validateQueryKey(e,"getQueryState"),this.cache.get(this.hashKey(e))}setQueryData(e,t){this.validateQueryKey(e,"setQueryData");try{const a=this.hashKey(e),s=this.cache.get(a),o={data:typeof t=="function"?t(s?.data):t,status:"success",error:null,dataUpdatedAt:Date.now(),isFetching:!1};this.cache.set(a,o),this.notify(a,o),this.notifyGlobal()}catch(a){throw console.error("[QueryClient.setQueryData] Error:",a),a}}async fetch(e,t,a=this.DEFAULT_STALE_TIME){if(this.validateQueryKey(e,"fetch"),this.validateQueryFunction(t,"fetch"),a<0)throw new p("[QueryClient.fetch] staleTime must be a non-negative number");const s=this.hashKey(e),i=this.cache.get(s);if(i?.status==="success"&&i.data!==void 0&&Date.now()-i.dataUpdatedAt<a)return i.data;if(this.inflight.has(s))return this.inflight.get(s);const o={...i||{data:void 0,status:"loading",error:null,dataUpdatedAt:0},isFetching:!0};this.cache.set(s,o),this.notify(s,o),this.notifyGlobal();const c=new AbortController,l=t(c.signal).then(d=>(this.setQueryData(e,d),this.inflight.delete(s),d)).catch(d=>{this.inflight.delete(s);const u=this.cache.get(s),m={data:u?.data,dataUpdatedAt:u?.dataUpdatedAt??0,status:"error",error:d instanceof Error?d:new Error(String(d)),isFetching:!1};throw this.cache.set(s,m),this.notify(s,m),this.notifyGlobal(),console.error("[QueryClient.fetch] Query failed:",{key:e,error:d}),d});return this.inflight.set(s,l),l}invalidate(e){try{const t=typeof e=="string"?e:this.hashKey(e),a=[];this.cache.forEach((s,i)=>{i.includes(t)&&(this.cache.set(i,{...s,dataUpdatedAt:0}),a.push(i))}),this.notifyGlobal(),a.length>0?console.debug(`[QueryClient] Invalidated ${a.length} queries matching: ${t}`):console.debug(`[QueryClient] No queries matched pattern: ${t}`)}catch(t){throw console.error("[QueryClient.invalidate] Error:",t),t}}clear(){try{const e=this.cache.size;this.cache.clear(),this.inflight.clear(),this.notifyGlobal(),console.log(`[QueryClient] Cleared ${e} cached queries`)}catch(e){throw console.error("[QueryClient.clear] Error:",e),e}}cancelQueries(e){try{if(!e){this.inflight.clear(),console.debug("[QueryClient] Cancelled all in-flight queries");return}const t=typeof e=="string"?e:this.hashKey(e),a=[];this.inflight.forEach((s,i)=>{i.includes(t)&&(this.inflight.delete(i),a.push(i))}),a.length>0&&console.debug(`[QueryClient] Cancelled ${a.length} queries matching: ${t}`)}catch(t){throw console.error("[QueryClient.cancelQueries] Error:",t),t}}getStats(){return{cacheSize:this.cache.size,inflightCount:this.inflight.size,listenerCount:this.listeners.size}}}const E=new Lt;function Qt(n,e,t={}){const{staleTime:a=6e4,enabled:s=!0,initialData:i}=t,o=I.useMemo(()=>E.hashKey(n),[n]),[c,l]=I.useState(()=>{const u=E.getQueryState(n);return u||(i!==void 0?{data:i,status:"success",error:null,dataUpdatedAt:Date.now(),isFetching:!1}:{data:void 0,status:"idle",error:null,dataUpdatedAt:0,isFetching:!1})}),d=I.useRef(e);return d.current=e,I.useEffect(()=>{if(!s)return;const u=E.subscribe(n,m=>{l(m)});return E.fetch(n,m=>d.current(m),a).catch(()=>{}),u},[o,s,a]),{...c,isLoading:c.status==="loading"||c.isFetching&&c.status==="idle",isError:c.status==="error",refetch:()=>E.fetch(n,u=>d.current(u),0)}}function Kt(n,e){const[t,a]=I.useState(!1),s=I.useCallback(async i=>{a(!0);let o={};try{if(e?.onMutate){const l=await e.onMutate(i);l&&(o=l)}const c=await n(i);return e?.onSuccess?.(c,i,o),e?.invalidateKeys?.forEach(l=>E.invalidate(l)),e?.onSettled?.(c,null,i,o),c}catch(c){const l=c instanceof Error?c:new Error(String(c));throw e?.onError?.(l,i,o),e?.onSettled?.(void 0,l,i,o),l}finally{a(!1)}},[n,e]);return{mutate:s,mutateAsync:s,isLoading:t}}export{Nt as A,se as B,q as C,dt as D,_t as E,me as J,Tt as L,ut as M,We as N,_ as O,Oe as P,ft as R,vt as T,p as V,zt as W,r as a,Mt as b,qt as c,Kt as d,j as e,A as f,L as g,xt as h,Wt as i,C as j,jt as k,y as l,T as m,h as n,qe as o,Le as p,E as q,V as r,Ke as s,ht as t,Qt as u,g as v,ot as w,Je as x,$e as y};
