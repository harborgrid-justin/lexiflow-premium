import { useState } from 'react';
import { Link, useFetcher } from 'react-router';
import type { Integration } from './types'; // ============================================================================
// Integration Card Component
// ============================================================================ interface IntegrationCardProps { integration: Integration; onConnect: () => void; onDisconnect: () => void; onSync: () => void;
} function IntegrationCard({ integration, onConnect, onDisconnect, onSync }: IntegrationCardProps) { const statusColors = { connected: 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400', disconnected: 'bg-[var(--color-surfaceRaised)] text-[var(--color-text)] ', error: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400', }; return ( <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-start justify-between"> <div className="flex items-start gap-4"> <div className="flex h-12 w-12 items-center justify-center rounded-lg bg-[var(--color-surfaceRaised)] text-2xl"> {integration.icon} </div> <div> <h3 className="font-semibold text-[var(--color-text)]"> {integration.name} </h3> <p className="mt-1 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> {integration.description} </p> {integration.lastSync && ( <p className="mt-2 text-xs text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Last synced: {new Date(integration.lastSync).toLocaleString()} </p> )} </div> </div> <span className={`rounded-full px-2 py-1 text-xs font-medium ${statusColors[integration.status]}`}> {integration.status} </span> </div> <div className="mt-4 flex gap-2"> {integration.status === 'connected' ? ( <> <button type="button" onClick={onSync} className="flex-1 rounded-md border border-[var(--color-border)] px-3 py-2 text-sm font-medium text-[var(--color-text)] hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-700" > Sync Now </button> <button type="button" onClick={onDisconnect} className="flex-1 rounded-md border border-red-300 px-3 py-2 text-sm font-medium text-red-700 hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:hover:bg-red-900/20" > Disconnect </button> </> ) : ( <button type="button" onClick={onConnect} className="w-full rounded-md bg-[var(--color-primary)] px-3 py-2 text-sm font-medium text-white hover:bg-[var(--color-primaryDark)]" > Connect </button> )} </div> </div> );
} interface IntegrationsManagerProps { integrations: Integration[];
} export function IntegrationsManager({ integrations }: IntegrationsManagerProps) { const fetcher = useFetcher(); const [selectedCategory, setSelectedCategory] = useState<string>('all'); const categories = [ { id: 'all', label: 'All' }, { id: 'ai', label: 'AI & ML' }, { id: 'storage', label: 'Storage' }, { id: 'communication', label: 'Communication' }, { id: 'calendar', label: 'Calendar' }, { id: 'billing', label: 'Billing' }, { id: 'analytics', label: 'Analytics' }, ]; const filteredIntegrations = selectedCategory === 'all' ? integrations : integrations.filter((i: { category: string; }) => i.category === selectedCategory); const handleConnect = (integrationId: string) => { fetcher.submit( { intent: 'connect', integrationId }, { method: 'post' } ); }; const handleDisconnect = (integrationId: string) => { fetcher.submit( { intent: 'disconnect', integrationId }, { method: 'post' } ); }; const handleSync = (integrationId: string) => { fetcher.submit( { intent: 'sync', integrationId }, { method: 'post' } ); }; return ( <div className="p-8"> {/* Breadcrumb */} <nav className="mb-6 flex items-center gap-2 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> <Link to="/admin" className="hover:text-[var(--color-text)] dark:hover:text-gray-200"> Admin </Link> <span>/</span> <span className="text-[var(--color-text)]">Integrations</span> </nav> {/* Page Header */} <div className="mb-8"> <h1 className="text-2xl font-bold text-[var(--color-text)]"> Integrations </h1> <p className="mt-1 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Connect LexiFlow with your favorite tools and services </p> </div> {/* Category Tabs */} <div className="mb-6 flex flex-wrap gap-2"> {categories.map((category) => ( <button key={category.id} type="button" onClick={() => setSelectedCategory(category.id)} className={`rounded-full px-4 py-2 text-sm font-medium transition-colors ${selectedCategory === category.id ? 'bg-[var(--color-primary)] text-white' : 'bg-[var(--color-surfaceRaised)] text-[var(--color-text)] hover:bg-[var(--color-backgroundTertiary)] dark:hover:bg-gray-600' }`} > {category.label} </button> ))} </div> {/* Integration Stats */} <div className="mb-6 grid grid-cols-1 gap-4 sm:grid-cols-3"> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4"> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Total Integrations</p> <p className="text-2xl font-bold text-[var(--color-text)]"> {integrations.length} </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4"> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Connected</p> <p className="text-2xl font-bold text-green-600 dark:text-green-400"> {integrations.filter((i: { status: string; }) => i.status === 'connected').length} </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4"> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Available</p> <p className="text-2xl font-bold text-[var(--color-textMuted)]"> {integrations.filter((i: { status: string; }) => i.status === 'disconnected').length} </p> </div> </div> {/* Integration Grid */} <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"> {filteredIntegrations.map((integration: Integration) => ( <IntegrationCard key={integration.id} integration={integration} onConnect={() => handleConnect(integration.id)} onDisconnect={() => handleDisconnect(integration.id)} onSync={() => handleSync(integration.id)} /> ))} </div> {filteredIntegrations.length === 0 && ( <div style={{ backgroundColor: 'var(--color-surface)', borderColor: 'var(--color-border)' }} className="rounded-lg border p-12 text-center"> <p className="text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> No integrations found in this category. </p> </div> )} {/* API Keys Section */} <div className="mt-12"> <h2 className="mb-4 text-xl font-bold text-[var(--color-text)]"> API Keys </h2> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <p className="mb-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Manage API keys for programmatic access to LexiFlow. </p> <button type="button" className="rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white hover:bg-[var(--color-primaryDark)]" > Generate New API Key </button> <div className="mt-4 rounded-md bg-[var(--color-surfaceRaised)] p-4"> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> No API keys generated yet. </p> </div> </div> </div> {/* Webhooks Section */} <div className="mt-8"> <h2 className="mb-4 text-xl font-bold text-[var(--color-text)]"> Webhooks </h2> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <p className="mb-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Configure webhooks to receive real-time notifications about system events. </p> <button type="button" className="rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white hover:bg-[var(--color-primaryDark)]" > Add Webhook </button> <div className="mt-4 rounded-md bg-[var(--color-surfaceRaised)] p-4"> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> No webhooks configured yet. </p> </div> </div> </div> </div> );
}
