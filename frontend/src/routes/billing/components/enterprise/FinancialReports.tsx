/** * FinancialReports Component * Advanced financial reporting with profitability analysis, realization rates, and revenue forecasting */ import { FINANCIAL_REPORT_TAB_LABELS, FINANCIAL_REPORT_TABS, REPORT_PERIODS, ReportPeriod
} from '@/config/billing.config';
import { useFinancialHelpers, useFinancialReports } from '@/routes/billing/_hooks/useFinancialReports';
import { Activity, BarChart3, DollarSign, Download, Filter, PieChart, TrendingDown, TrendingUp
} from 'lucide-react';
import React from"react";
interface FinancialReportsProps { firmId?: string; dateRange?: { start: string; end: string }; onExport?: (reportType: string, format: 'pdf' | 'excel' | 'csv') => void;
} export const FinancialReports: React.FC<FinancialReportsProps> = ({ dateRange, onExport,
}) => { const { selectedTab, setSelectedTab, selectedPeriod, setSelectedPeriod, showFilters, setShowFilters, isLoading, error, data } = useFinancialReports({ dateRange }); const { formatCurrency, formatPercent, getPerformanceColor } = useFinancialHelpers(); const { profitability, realization, wipMetrics: wipMetrics, revenueForecast, timekeeperPerformance, matterProfitability } = data; if (isLoading) { return ( <div className="flex items-center justify-center h-64"> <div className="text-[var(--color-textMuted)]">Loading financial reports...</div> </div> ); } if (error) { return ( <div className="flex items-center justify-center h-64"> <div className="text-red-500">{error}</div> </div> ); } return ( <div className="space-y-6"> {/* Header */} <div className="flex items-center justify-between"> <div> <h2 className="text-2xl font-bold text-[var(--color-text)]"> Financial Reports & Analytics </h2> <p className="mt-1 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Comprehensive financial analysis and performance metrics </p> </div> <div className="flex gap-3"> <select value={selectedPeriod} onChange={(e) => setSelectedPeriod(e.target.value as ReportPeriod)} className="rounded-md border border-[var(--color-border)] bg-[var(--color-surface)] px-4 py-2 text-sm font-medium text-[var(--color-text)] shadow-sm hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-600" > {REPORT_PERIODS.map(period => ( <option key={period.value} value={period.value}>{period.label}</option> ))} </select> <button onClick={() => setShowFilters(!showFilters)} className="inline-flex items-center gap-2 rounded-md border border-[var(--color-border)] bg-[var(--color-surface)] px-4 py-2 text-sm font-medium text-[var(--color-text)] shadow-sm hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-600" > <Filter className="h-4 w-4" /> Filters </button> <button onClick={() => onExport?.(selectedTab, 'excel')} className="inline-flex items-center gap-2 rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-[var(--color-primaryDark)]" > <Download className="h-4 w-4" /> Export </button> </div> </div> {/* Tabs */} <div className="border-b border-[var(--color-borderLight)]"> <nav className="-mb-px flex space-x-8"> {FINANCIAL_REPORT_TABS.map((tab) => ( <button key={tab} onClick={() => setSelectedTab(tab)} className={`whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium ${selectedTab === tab ? 'border-blue-500 text-[var(--color-primary)] ' : 'border-transparent text-[var(--color-textMuted)] hover:border-[var(--color-border)] hover:text-[var(--color-text)] dark:text-[var(--color-textMuted)] dark:hover:text-gray-300' }`} > {FINANCIAL_REPORT_TAB_LABELS[tab]} </button> ))} </nav> </div> {/* Tab Content */} {selectedTab === 'profitability' && ( <div className="space-y-6"> {/* Summary Metrics */} <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4"> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <div className="flex items-center justify-between"> <div> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Gross Revenue </p> <p className="mt-2 text-3xl font-semibold text-[var(--color-text)]"> {profitability ? formatCurrency(profitability.grossRevenue) : '-'} </p> <div className="mt-1 flex items-center gap-1 text-sm"> <TrendingUp className="h-4 w-4 text-green-600" /> <span className="text-green-600">+12.3% YoY</span> </div> </div> <div className="rounded-full bg-blue-50 p-3 dark:bg-blue-900/20"> <DollarSign className="h-6 w-6 text-[var(--color-primary)]" /> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <div className="flex items-center justify-between"> <div> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Gross Margin </p> <p className="mt-2 text-3xl font-semibold text-green-600 dark:text-green-400"> {profitability ? formatPercent(profitability.grossMargin) : '-'} </p> <div className="mt-1 flex items-center gap-1 text-sm"> <TrendingUp className="h-4 w-4 text-green-600" /> <span className="text-green-600">+2.1%</span> </div> </div> <div className="rounded-full bg-green-50 p-3 dark:bg-green-900/20"> <PieChart className="h-6 w-6 text-green-600 dark:text-green-400" /> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <div className="flex items-center justify-between"> <div> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Net Profit </p> <p className="mt-2 text-3xl font-semibold text-[var(--color-text)]"> {profitability ? formatCurrency(profitability.netProfit) : '-'} </p> <div className="mt-1 flex items-center gap-1 text-sm"> <TrendingUp className="h-4 w-4 text-green-600" /> <span className="text-green-600">+8.7%</span> </div> </div> <div className="rounded-full bg-purple-50 p-3 dark:bg-purple-900/20"> <Activity className="h-6 w-6 text-purple-600 dark:text-purple-400" /> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <div className="flex items-center justify-between"> <div> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Net Margin </p> <p className="mt-2 text-3xl font-semibold text-[var(--color-text)]"> {profitability ? formatPercent(profitability.netMargin) : '-'} </p> <div className="mt-1 flex items-center gap-1 text-sm"> <TrendingDown className="h-4 w-4 text-red-600" /> <span className="text-red-600">-1.2%</span> </div> </div> <div className="rounded-full bg-yellow-50 p-3 dark:bg-yellow-900/20"> <BarChart3 className="h-6 w-6 text-yellow-600 dark:text-yellow-400" /> </div> </div> </div> </div> {/* Detailed Breakdown */} <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <h3 className="text-lg font-semibold text-[var(--color-text)] mb-4"> Profitability Breakdown </h3> <div className="space-y-4"> <div className="flex items-center justify-between border-b border-[var(--color-borderLight)] pb-3"> <span className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Gross Revenue </span> <span className="text-lg font-semibold text-[var(--color-text)]"> {profitability ? formatCurrency(profitability.grossRevenue) : '-'} </span> </div> <div className="flex items-center justify-between border-b border-[var(--color-borderLight)] pb-3"> <span className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Direct Costs </span> <span className="text-lg font-semibold text-red-600 dark:text-red-400"> -{profitability ? formatCurrency(profitability.grossRevenue - profitability.grossProfit) : '-'} </span> </div> <div className="flex items-center justify-between border-b border-[var(--color-borderLight)] pb-3"> <span className="text-sm font-medium text-[var(--color-text)]"> Gross Profit </span> <span className="text-lg font-semibold text-green-600 dark:text-green-400"> {profitability ? formatCurrency(profitability.grossProfit) : '-'} </span> </div> <div className="flex items-center justify-between border-b border-[var(--color-borderLight)] pb-3"> <span className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Operating Expenses </span> <span className="text-lg font-semibold text-red-600 dark:text-red-400"> -{profitability ? formatCurrency(profitability.operatingExpenses) : '-'} </span> </div> <div className="flex items-center justify-between pt-3"> <span className="text-base font-semibold text-[var(--color-text)]"> Net Profit </span> <span className="text-2xl font-bold text-[var(--color-primary)]"> {profitability ? formatCurrency(profitability.netProfit) : '-'} </span> </div> </div> </div> </div> )} {selectedTab === 'realization' && ( <div className="space-y-6"> {/* Realization Metrics */} <div className="grid gap-4 sm:grid-cols-3"> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Billing Realization </p> <p className="mt-2 text-3xl font-semibold text-[var(--color-text)]"> {realization ? formatPercent(realization.billingRealization) : '-'} </p> <p className="mt-1 text-sm text-[var(--color-textMuted)]"> {realization ? `${formatCurrency(realization.actualBillingRate)} / ${formatCurrency(realization.standardBillingRate)}` : '-'} </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Collection Realization </p> <p className="mt-2 text-3xl font-semibold text-[var(--color-text)]"> {realization ? formatPercent(realization.collectionRealization) : '-'} </p> <p className="mt-1 text-sm text-[var(--color-textMuted)]"> {realization ? `${formatCurrency(realization.actualCollectionAmount)} / ${formatCurrency(realization.standardCollectionAmount)}` : '-'} </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Overall Realization </p> <p className={`mt-2 text-3xl font-semibold ${realization ? getPerformanceColor(realization.overallRealization, 85) : ''}`}> {realization ? formatPercent(realization.overallRealization) : '-'} </p> <p className="mt-1 text-sm text-[var(--color-textMuted)]"> Combined realization rate </p> </div> </div> {/* Realization Analysis */} <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <h3 className="text-lg font-semibold text-[var(--color-text)] mb-4"> Realization Analysis </h3> <div className="space-y-6"> <div> <div className="flex items-center justify-between mb-2"> <span className="text-sm font-medium text-[var(--color-text)]"> Billing Realization Rate </span> <span className="text-sm font-semibold text-[var(--color-text)]"> {realization ? formatPercent(realization.billingRealization) : '-'} </span> </div> <div className="relative h-4 bg-[var(--color-backgroundTertiary)] rounded-full overflow-hidden"> <div className="absolute h-full bg-[var(--color-primary)] dark:bg-blue-500" style={{ width: `${realization ? realization.billingRealization : 0}%` }} /> </div> </div> <div> <div className="flex items-center justify-between mb-2"> <span className="text-sm font-medium text-[var(--color-text)]"> Collection Realization Rate </span> <span className="text-sm font-semibold text-[var(--color-text)]"> {realization ? formatPercent(realization.collectionRealization) : '-'} </span> </div> <div className="relative h-4 bg-[var(--color-backgroundTertiary)] rounded-full overflow-hidden"> <div className="absolute h-full bg-green-600 dark:bg-green-500" style={{ width: `${realization ? realization.collectionRealization : 0}%` }} /> </div> </div> <div> <div className="flex items-center justify-between mb-2"> <span className="text-sm font-medium text-[var(--color-text)]"> Overall Realization Rate </span> <span className="text-sm font-semibold text-[var(--color-text)]"> {realization ? formatPercent(realization.overallRealization) : '-'} </span> </div> <div className="relative h-4 bg-[var(--color-backgroundTertiary)] rounded-full overflow-hidden"> <div className="absolute h-full bg-purple-600 dark:bg-purple-500" style={{ width: `${realization ? realization.overallRealization : 0}%` }} /> </div> </div> </div> </div> </div> )} {selectedTab === 'wip' && ( <div className="space-y-6"> {/* WIP Summary */} <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4"> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Total WIP </p> <p className="mt-2 text-2xl font-semibold text-[var(--color-text)]"> {wipMetrics ? formatCurrency(wipMetrics.totalWIP) : '-'} </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Unbilled Time </p> <p className="mt-2 text-2xl font-semibold text-yellow-600 dark:text-yellow-400"> {wipMetrics ? formatCurrency(wipMetrics.unbilledTime) : '-'} </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Average Age </p> <p className="mt-2 text-2xl font-semibold text-[var(--color-text)]"> {wipMetrics ? wipMetrics.averageAgeDays : '-'} days </p> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6 shadow-sm"> <p className="text-sm font-medium text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Write-off Rate </p> <p className="mt-2 text-2xl font-semibold text-red-600 dark:text-red-400"> {wipMetrics ? formatPercent(wipMetrics.writeOffPercentage) : '-'} </p> </div> </div> {/* WIP Breakdown */} <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <h3 className="text-lg font-semibold text-[var(--color-text)] mb-4"> Work in Progress Breakdown </h3> <div className="space-y-4"> {wipMetrics && [ { label: 'Unbilled Time', amount: wipMetrics.unbilledTime, color: 'bg-[var(--color-primary)]' }, { label: 'Unbilled Expenses', amount: wipMetrics.unbilledExpenses, color: 'bg-green-600' }, { label: 'Billed Not Collected', amount: wipMetrics.billedNotCollected, color: 'bg-yellow-600' }, ].map((item, index) => ( <div key={index}> <div className="flex items-center justify-between mb-2"> <span className="text-sm font-medium text-[var(--color-text)]"> {item.label} </span> <span className="text-sm font-semibold text-[var(--color-text)]"> {formatCurrency(item.amount)} </span> </div> <div className="relative h-3 bg-[var(--color-backgroundTertiary)] rounded-full overflow-hidden"> <div className={`absolute h-full ${item.color}`} style={{ width: `${(item.amount / wipMetrics.totalWIP) * 100}%` }} /> </div> </div> ))} </div> </div> </div> )} {selectedTab === 'forecasting' && ( <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)]"> <div className="border-b border-[var(--color-borderLight)] bg-[var(--color-surfaceRaised)] px-6 py-4 /50"> <h3 className="text-lg font-semibold text-[var(--color-text)]"> Revenue Forecasting </h3> </div> <div className="overflow-x-auto"> <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700"> <thead className="bg-[var(--color-surfaceRaised)]"> <tr> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Period </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Projected </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Actual </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Variance </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Variance % </th> </tr> </thead> <tbody className="divide-y divide-gray-200 bg-[var(--color-surface)] dark:divide-gray-700"> {revenueForecast.map((period, index) => ( <tr key={index} className="hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-700"> <td className="whitespace-nowrap px-6 py-4 text-sm font-medium text-[var(--color-text)]"> {period.month} </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-text)]"> {formatCurrency(period.projectedRevenue)} </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-text)]"> {period.actualRevenue > 0 ? formatCurrency(period.actualRevenue) : '-'} </td> <td className={`whitespace-nowrap px-6 py-4 text-sm font-medium ${period.variance > 0 ? 'text-green-600 dark:text-green-400' : period.variance < 0 ? 'text-red-600 dark:text-red-400' : 'text-[var(--color-textMuted)]' }`}> {period.variance !== 0 ? ( <> {period.variance > 0 ? '+' : ''} {formatCurrency(period.variance)} </> ) : '-'} </td> <td className={`whitespace-nowrap px-6 py-4 text-sm font-medium ${period.variancePercent > 0 ? 'text-green-600 dark:text-green-400' : period.variancePercent < 0 ? 'text-red-600 dark:text-red-400' : 'text-[var(--color-textMuted)]' }`}> {period.variancePercent !== 0 ? ( <> {period.variancePercent > 0 ? '+' : ''} {formatPercent(period.variancePercent)} </> ) : '-'} </td> </tr> ))} </tbody> </table> </div> </div> )} {selectedTab === 'performance' && ( <div className="space-y-6"> {/* Timekeeper Performance */} <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)]"> <div className="border-b border-[var(--color-borderLight)] bg-[var(--color-surfaceRaised)] px-6 py-4 /50"> <h3 className="text-lg font-semibold text-[var(--color-text)]"> Timekeeper Performance </h3> </div> <div className="overflow-x-auto"> <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700"> <thead className="bg-[var(--color-surfaceRaised)]"> <tr> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Timekeeper </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Billable Hours </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Utilization </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Billing Rate </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Revenue </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Realization </th> </tr> </thead> <tbody className="divide-y divide-gray-200 bg-[var(--color-surface)] dark:divide-gray-700"> {timekeeperPerformance.map((timekeeper) => ( <tr key={timekeeper.id} className="hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-700"> <td className="px-6 py-4"> <div> <div className="font-medium text-[var(--color-text)]"> {timekeeper.name} </div> <div className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> {timekeeper.level} </div> </div> </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-text)]"> {timekeeper.billableHours} / {timekeeper.targetHours} </td> <td className="whitespace-nowrap px-6 py-4"> <span className={`text-sm font-medium ${getPerformanceColor(timekeeper.utilizationRate)}`}> {formatPercent(timekeeper.utilizationRate)} </span> </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-text)]"> {formatCurrency(timekeeper.billingRate)}/hr </td> <td className="whitespace-nowrap px-6 py-4 text-sm font-medium text-[var(--color-text)]"> {formatCurrency(timekeeper.revenue)} </td> <td className="whitespace-nowrap px-6 py-4"> <span className={`text-sm font-medium ${getPerformanceColor(timekeeper.realization)}`}> {formatPercent(timekeeper.realization)} </span> </td> </tr> ))} </tbody> </table> </div> </div> {/* Matter Profitability */} <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)]"> <div className="border-b border-[var(--color-borderLight)] bg-[var(--color-surfaceRaised)] px-6 py-4 /50"> <h3 className="text-lg font-semibold text-[var(--color-text)]"> Matter Profitability </h3> </div> <div className="overflow-x-auto"> <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700"> <thead className="bg-[var(--color-surfaceRaised)]"> <tr> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Matter </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Total Fees </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Total Costs </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Profit </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Margin </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Realization </th> </tr> </thead> <tbody className="divide-y divide-gray-200 bg-[var(--color-surface)] dark:divide-gray-700"> {matterProfitability.map((matter) => ( <tr key={matter.id} className="hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-700"> <td className="px-6 py-4"> <div> <div className="font-medium text-[var(--color-text)]"> {matter.matterNumber} </div> <div className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> {matter.client} </div> </div> </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-text)]"> {formatCurrency(matter.totalFees)} </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-text)]"> {formatCurrency(matter.totalCosts)} </td> <td className="whitespace-nowrap px-6 py-4 text-sm font-medium text-green-600 dark:text-green-400"> {formatCurrency(matter.profit)} </td> <td className="whitespace-nowrap px-6 py-4"> <span className={`text-sm font-medium ${getPerformanceColor(matter.profitMargin, 70)}`}> {formatPercent(matter.profitMargin)} </span> </td> <td className="whitespace-nowrap px-6 py-4"> <span className={`text-sm font-medium ${getPerformanceColor(matter.realizationRate)}`}> {formatPercent(matter.realizationRate)} </span> </td> </tr> ))} </tbody> </table> </div> </div> </div> )} </div> );
};
