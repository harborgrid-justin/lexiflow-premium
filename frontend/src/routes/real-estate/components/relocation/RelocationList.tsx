import type { RealEstateRelocation } from '@/services/domain/RealEstateDomain';
import { ArrowRightLeft, CheckCircle, Clock, Plus, Truck } from 'lucide-react';
import { useState } from 'react';
import { Form, Link, useNavigate } from 'react-router';
import type { RelocationLoaderData } from './types'; export function RelocationList({ data, stats }: RelocationLoaderData) { const navigate = useNavigate(); const [showCreateForm, setShowCreateForm] = useState(false); const getStatusColor = (status: RealEstateRelocation["status"]): string => { switch (status) { case 'Planning': return 'text-[var(--color-primary)] bg-blue-50 dark:bg-blue-900/20'; case 'In Progress': return 'text-amber-600 bg-amber-50 dark:text-amber-400 dark:bg-amber-900/20'; case 'Completed': return 'text-emerald-600 bg-emerald-50 dark:text-emerald-400 dark:bg-emerald-900/20'; case 'Cancelled': return 'text-[var(--color-textMuted)] bg-[var(--color-surfaceRaised)] /20'; default: return 'text-[var(--color-textMuted)] bg-[var(--color-surfaceRaised)]'; } }; const formatCurrency = (value?: number): string => { if (!value) return '—'; return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value); }; const formatDate = (dateStr?: string): string => { if (!dateStr) return '—'; return new Date(dateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }); }; return ( <div className="p-8"> {/* Breadcrumb */} <nav className="mb-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> <Link to="/real_estate/portfolio_summary" className="hover:text-[var(--color-text)] dark:hover:text-gray-200"> Real Estate </Link> <span className="mx-2">/</span> <span className="text-[var(--color-text)]">Relocation</span> </nav> {/* Header */} <div className="mb-8 flex items-center justify-between"> <div> <h1 className="text-2xl font-bold text-[var(--color-text)]"> Relocation </h1> <p className="mt-1 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Coordinate relocation assistance for displaced individuals and businesses. </p> </div> <button onClick={() => setShowCreateForm(true)} className="inline-flex items-center gap-2 rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white hover:bg-[var(--color-primaryDark)] transition-colors" > <Plus className="h-4 w-4" /> New Relocation </button> </div> {/* Stats Cards */} <div className="mb-8 grid grid-cols-1 gap-4 sm:grid-cols-3"> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4"> <div className="flex items-center gap-3"> <div className="rounded-lg bg-slate-100 p-2"> <Truck className="h-5 w-5 text-[var(--color-textMuted)]" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Total Relocations</p> <p className="text-2xl font-semibold text-[var(--color-text)]">{stats.total}</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4"> <div className="flex items-center gap-3"> <div className="rounded-lg bg-amber-100 p-2 dark:bg-amber-900/30"> <Clock className="h-5 w-5 text-amber-600 dark:text-amber-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">In Progress</p> <p className="text-2xl font-semibold text-amber-600 dark:text-amber-400">{stats.inProgress}</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4"> <div className="flex items-center gap-3"> <div className="rounded-lg bg-emerald-100 p-2 dark:bg-emerald-900/30"> <CheckCircle className="h-5 w-5 text-emerald-600 dark:text-emerald-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Completed</p> <p className="text-2xl font-semibold text-emerald-600 dark:text-emerald-400">{stats.completed}</p> </div> </div> </div> </div> {/* Data Table or Empty State */} {data.length === 0 ? ( <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surfaceRaised)] p-12 text-center /50"> <ArrowRightLeft className="mx-auto h-12 w-12 text-[var(--color-textMuted)]" /> <h3 className="mt-4 text-lg font-medium text-[var(--color-text)]"> No Relocation Records </h3> <p className="mt-2 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> No relocation projects have been initiated yet. </p> <button onClick={() => setShowCreateForm(true)} className="mt-4 inline-flex items-center gap-2 rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white hover:bg-[var(--color-primaryDark)]" > <Plus className="h-4 w-4" /> Create First Relocation </button> </div> ) : ( <div className="overflow-hidden rounded-lg border border-[var(--color-borderLight)]"> <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700"> <thead className="bg-[var(--color-surfaceRaised)]"> <tr> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> From / To </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Type </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Status </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Scheduled </th> <th className="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Est. Cost </th> <th className="px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Actions </th> </tr> </thead> <tbody className="divide-y divide-gray-200 bg-[var(--color-surface)] dark:divide-gray-700"> {data.map((relocation) => ( <tr key={relocation.id} className="hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-800"> <td className="whitespace-nowrap px-6 py-4"> <div className="text-sm font-medium text-[var(--color-text)]"> {relocation.fromPropertyName} </div> <div className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> → {relocation.toPropertyName || 'TBD'} </div> </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> {relocation.relocationType} </td> <td className="whitespace-nowrap px-6 py-4"> <span className={`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${getStatusColor(relocation.status)}`}> {relocation.status} </span> </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> {formatDate(relocation.scheduledDate)} </td> <td className="whitespace-nowrap px-6 py-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> {formatCurrency(relocation.estimatedCost)} </td> <td className="whitespace-nowrap px-6 py-4 text-right text-sm"> <button onClick={() => navigate(`/real_estate/relocation/${relocation.id}`)} className="text-[var(--color-primary)] hover:text-blue-900 dark:hover:text-blue-300" > View </button> </td> </tr> ))} </tbody> </table> </div> )} {/* Create Form Modal */} {showCreateForm && ( <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50"> <div className="w-full max-w-md rounded-lg bg-[var(--color-surface)] p-6"> <h2 className="mb-4 text-lg font-semibold text-[var(--color-text)]"> Create New Relocation </h2> <Form method="post" className="space-y-4"> <input type="hidden" name="intent" value="create" /> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> From Property ID </label> <input type="text" name="fromPropertyId" required className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" /> </div> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> From Property Name </label> <input type="text" name="fromPropertyName" required className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" /> </div> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> To Property Name </label> <input type="text" name="toPropertyName" className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" /> </div> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> Relocation Type </label> <select name="relocationType" className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" > <option value="Department">Department</option> <option value="Equipment">Equipment</option> <option value="Staff">Staff</option> <option value="Full Facility">Full Facility</option> </select> </div> <div className="grid grid-cols-2 gap-4"> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> Scheduled Date </label> <input type="date" name="scheduledDate" className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" /> </div> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> Estimated Cost </label> <input type="number" name="estimatedCost" min="0" step="0.01" className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" /> </div> </div> <div> <label className="block text-sm font-medium text-[var(--color-text)]"> Coordinator </label> <input type="text" name="coordinator" className="mt-1 block w-full rounded-md border border-[var(--color-border)] px-3 py-2 text-sm dark:text-white" /> </div> <div className="flex justify-end gap-3"> <button type="button" onClick={() => setShowCreateForm(false)} className="rounded-md border border-[var(--color-border)] px-4 py-2 text-sm font-medium text-[var(--color-text)] hover:bg-[var(--color-surfaceRaised)] dark:hover:bg-gray-700" > Cancel </button> <button type="submit" className="rounded-md bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white hover:bg-[var(--color-primaryDark)]" > Create </button> </div> </Form> </div> </div> )} </div> );
}
