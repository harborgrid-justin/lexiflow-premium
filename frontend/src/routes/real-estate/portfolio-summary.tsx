/** * Real Estate: Portfolio Summary Route * * Provides a comprehensive overview of the organization's real estate portfolio, * including property counts, total acreage, value assessments, and key metrics. * * @module routes/real-estate/portfolio-summary */ import { DataService } from '@/services/data/data-service.service';
import type { PortfolioStats } from '@/services/domain/RealEstateDomain';
import { Building2, DollarSign, Landmark, MapPin, PieChart, TrendingUp } from 'lucide-react';
import { Link, useLoaderData } from 'react-router';
import { RouteErrorBoundary } from '../_shared/RouteErrorBoundary';
import { createMeta } from '../_shared/meta-utils';
import type { Route } from"./+types/portfolio-summary"; // ============================================================================
// Types
// ============================================================================
interface LoaderData { stats: PortfolioStats;
} // ============================================================================
// Meta Tags
// ============================================================================
export function meta() { return createMeta({ title: 'Real Estate - Portfolio Summary', description: 'View comprehensive overview of real estate portfolio including property counts, acreage, and value assessments.', });
} // ============================================================================
// Loader
// ============================================================================
export async function loader(): Promise<LoaderData> { try { const stats = await DataService.realEstate.getPortfolioStats(); return { stats }; } catch (error) { console.error('Failed to fetch portfolio stats:', error); return { stats: { totalProperties: 0, totalValue: 0, activeProperties: 0, pendingAcquisitions: 0, pendingDisposals: 0, activeEncroachments: 0, avgUtilizationRate: 0, totalSquareFootage: 0, totalAcreage: 0, } }; }
} // ============================================================================
// Action
// ============================================================================
export async function action({ request }: Route.ActionArgs) { const formData = await request.formData(); const intent = formData.get("intent"); switch (intent) { case"refresh": return { success: true, message:"Data refreshed" }; default: return { success: false, error:"Invalid action" }; }
} // ============================================================================
// Component
// ============================================================================
export default function PortfolioSummaryRoute() { const { stats } = useLoaderData<LoaderData>(); const formatCurrency = (value?: number): string => { if (!value) return '$0'; return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(value); }; const formatNumber = (value?: number): string => { if (!value) return '0'; return new Intl.NumberFormat('en-US').format(value); }; const quickLinks = [ { label: 'Inventory', to: '/real_estate/inventory', description: 'View all properties' }, { label: 'Acquisitions', to: '/real_estate/acquisition', description: 'Pending acquisitions' }, { label: 'Disposals', to: '/real_estate/disposal', description: 'Property disposals' }, { label: 'Utilization', to: '/real_estate/utilization', description: 'Space utilization' }, ]; return ( <div className="p-8"> {/* Breadcrumb */} <nav className="mb-4 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> <Link to="/real_estate/portfolio_summary" className="hover:text-[var(--color-text)] dark:hover:text-gray-200"> Real Estate </Link> <span className="mx-2">/</span> <span className="text-[var(--color-text)]">Portfolio Summary</span> </nav> {/* Header */} <div className="mb-8"> <h1 className="text-2xl font-bold text-[var(--color-text)]"> Portfolio Summary </h1> <p className="mt-1 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]"> Comprehensive overview of your real estate portfolio with key metrics and analytics. </p> </div> {/* Key Metrics Grid */} <div className="mb-8 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-center gap-4"> <div className="rounded-lg bg-blue-100 p-3 dark:bg-blue-900/30"> <Building2 className="h-6 w-6 text-[var(--color-primary)]" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Total Properties</p> <p className="text-3xl font-bold text-[var(--color-text)]">{formatNumber(stats.totalProperties)}</p> <p className="text-xs text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">{stats.activeProperties} active</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-center gap-4"> <div className="rounded-lg bg-emerald-100 p-3 dark:bg-emerald-900/30"> <DollarSign className="h-6 w-6 text-emerald-600 dark:text-emerald-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Total Portfolio Value</p> <p className="text-3xl font-bold text-emerald-600 dark:text-emerald-400">{formatCurrency(stats.totalValue)}</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-center gap-4"> <div className="rounded-lg bg-purple-100 p-3 dark:bg-purple-900/30"> <PieChart className="h-6 w-6 text-purple-600 dark:text-purple-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Avg Utilization</p> <p className="text-3xl font-bold text-purple-600 dark:text-purple-400">{stats.avgUtilizationRate.toFixed(1)}%</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-center gap-4"> <div className="rounded-lg bg-amber-100 p-3 dark:bg-amber-900/30"> <Landmark className="h-6 w-6 text-amber-600 dark:text-amber-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Total Square Footage</p> <p className="text-3xl font-bold text-amber-600 dark:text-amber-400">{formatNumber(stats.totalSquareFootage)}</p> <p className="text-xs text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">sq ft</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-center gap-4"> <div className="rounded-lg bg-teal-100 p-3 dark:bg-teal-900/30"> <MapPin className="h-6 w-6 text-teal-600 dark:text-teal-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Total Acreage</p> <p className="text-3xl font-bold text-teal-600 dark:text-teal-400">{formatNumber(stats.totalAcreage)}</p> <p className="text-xs text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">acres</p> </div> </div> </div> <div className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-6"> <div className="flex items-center gap-4"> <div className="rounded-lg bg-rose-100 p-3 dark:bg-rose-900/30"> <TrendingUp className="h-6 w-6 text-rose-600 dark:text-rose-400" /> </div> <div> <p className="text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">Pending Activity</p> <p className="text-3xl font-bold text-rose-600 dark:text-rose-400">{stats.pendingAcquisitions + stats.pendingDisposals}</p> <p className="text-xs text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">{stats.pendingAcquisitions} acq / {stats.pendingDisposals} disp</p> </div> </div> </div> </div> {/* Quick Links Section */} <div className="mb-8"> <h2 className="mb-4 text-lg font-semibold text-[var(--color-text)]">Quick Links</h2> <div className="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"> {quickLinks.map((link) => ( <Link key={link.to} to={link.to} className="rounded-lg border border-[var(--color-borderLight)] bg-[var(--color-surface)] p-4 hover:border-blue-300 hover:shadow-md transition-all dark:hover:border-blue-600" > <h3 className="font-medium text-[var(--color-text)]">{link.label}</h3> <p className="mt-1 text-sm text-[var(--color-textMuted)] dark:text-[var(--color-textMuted)]">{link.description}</p> </Link> ))} </div> </div> {/* Active Issues */} {stats.activeEncroachments > 0 && ( <div className="rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-700 dark:bg-amber-900/20"> <h3 className="font-medium text-amber-800 dark:text-amber-200">Attention Required</h3> <p className="mt-1 text-sm text-amber-600 dark:text-amber-400"> There are {stats.activeEncroachments} active encroachment{stats.activeEncroachments !== 1 ? 's' : ''} that require attention. </p> <Link to="/real_estate/encroachments" className="mt-2 inline-block text-sm font-medium text-amber-700 hover:text-amber-900 dark:text-amber-300 dark:hover:text-amber-100" > View Encroachments â†’ </Link> </div> )} </div> );
} // ============================================================================
// Error Boundary
// ============================================================================
export function ErrorBoundary({ error }: Route.ErrorBoundaryProps) { return ( <RouteErrorBoundary error={error} title="Failed to Load Portfolio Summary" message="We couldn't load the portfolio summary. Please try again." backTo="/real_estate/portfolio_summary" backLabel="Return to Portfolio Summary" /> );
}
